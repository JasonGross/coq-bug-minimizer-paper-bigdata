[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537523","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537523","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537523,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzUyMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-11-08T23:49:03Z","updated_at":"2017-10-18T10:10:34Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nGoal forall y : sumbool True True, exists x, x = sumbool_rect (fun _ => bool) (fun _ => true) (fun _ => true) y.\n  eexists.\n  match goal with\n    | [ |- _ = sumbool_rect ?T (fun b => _) (fun c => _) ?v ]\n      => refine (_ : sumbool_rect T (fun b => _) (fun c => _) v = _)\n  end;\n    match goal with\n      | [ |- _ = sumbool_rect ?T (fun b => _) (fun c => _) ?v ]\n        => refine (sumbool_rect\n                     (fun sb => sumbool_rect T _ _ sb = sumbool_rect T _ _ sb)\n                     _\n                     _\n                     v)\n      | [ |- bool ] => idtac\n      | [ |- ?G ] => idtac G\n    end. (* Error: Incorrect number of goals (expected 4 tactics). *)\n\n\nThis works in 8.4, but is broken in 8.5 (95a4fcf8cd36e29034e886682ed3a6e2914ce04f).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537526","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537526","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537526,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzUyNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-11-26T10:34:30Z","updated_at":"2017-10-18T10:10:34Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nHere is a smaller testcase:\n\nGoal exists x, x.\nrefine (ex_intro _ _ _).\nall: match goal with _ => refine (_ _) end.\n(* Error: Incorrect number of goals (expected 8 tactics). *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537527","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537527","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537527,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzUyNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-01-20T00:20:33Z","updated_at":"2017-10-18T10:10:35Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\n\nA version of Guillaume's example, adapted to new \"shelving\" refine, and not using all:\n\nGoal exists x, x.\nunshelve refine (ex_intro _ _ _); match goal with _ => refine (_ _) end.\n(* Error: Incorrect number of goals (expected 2 tactics). *)\n\nJason's example is somehow not significant in 8.4 in the sense that the first refine generates only 1 goal, while the problem is apparently with refine generating more than 1 goal. In particular, it works equally in 8.5 with the new shelving default of refine.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537533","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537533","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537533,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzUzMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-08-19T05:17:40Z","updated_at":"2017-10-18T10:10:35Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\n*** Bug [BZ#5027](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%235027%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537536","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537536","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537536,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzUzNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-19T23:56:02Z","updated_at":"2017-10-18T10:10:35Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nIt looks not so easy to fix, and seems to be due to the way Ftactic is implemented.\nI can fix it by forcing a focusing ftactic to run its continuation on only a part of the \"Depends\" results. This seem to be due to the fact that in the refine (_ _) case, the call on the second subgoal produces 3 goals but also shelves the 2 goals produced by the first refine (_ _) which were recorded as Depends. Ftactic should maybe keep the goal -> return value associations.\n\nlet run m k = m >>= function\n| Uniform v -> k v\n| Depends l ->\n  Proofview.numgoals >>= fun ngls ->\n  let tacs = List.map k (CList.firstn ngls l) in\n  Proofview.tclDISPATCH tacs\n\nI'm a bit surprised because I don't see how Ftactic.run gets called here. Arnaud can certainly explain all this. My fix only works for the all:refine (_ _) variants, not the two above with [match goal with ...].\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537538","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537538","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537538,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzUzOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-20T06:55:18Z","updated_at":"2017-10-18T10:10:35Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nEven simpler example\n\n    Goal exists x, x.\n      unshelve refine (ex_intro _ _ _).\n      all:simple refine (_ _) end.\n\nIt doesn't look like it's related to shelving (since there is no shelving in `simple refine`), rather it is due to the fact that refining the first goal gives a partial solution to the second one. The semantic of dispatch, in that case, is to drop the tactic application on the goals which received a partial solution.\n\nI haven't been able to figure out where this exception comes from yet. Maybe it's Ftactic as Mathieu proposes. Which would probably mean digging in the code of TACTIC EXTEND, because I don't see it called in the code path above. It's interesting that this behaviour is preserved by `match goal`, though, but that the following doesn't fail:\n\n    Goal exists x, x.\n      unshelve refine (ex_intro _ _ _).\n      all:[> simple refine (_ _) end ..].\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537539","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537539","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537539,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzUzOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-25T17:46:46Z","updated_at":"2017-10-18T10:10:36Z","author_association":"CONTRIBUTOR","body":"Comment author: @jonleivent\n\nThis variation on Arnaud's example:\n\nGoal exists x, x.\n      simple refine (ex_intro _ _ _); [..|simple refine (_ _)].\n      simple refine (_ _).\n\nin 8.6, produces the error:\nAnomaly: cannot define an evar twice. Please report.\n\nI hope that's a clue...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537540","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537540","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537540,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzU0MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T06:53:30Z","updated_at":"2017-10-18T10:10:36Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nI think I understand the bug now. Though I have no way yet to prove that it's what happens in the case at hand (it's probably not the cause of Jonathan's above example, however, so we may have to file another issue about that).\n\nSo the issue is with `tclDISPATCHL`: `tclDISPATCHL` collects return value per goal, which are aggregated into a list, _then_ it removes goals which have been solved by side-effect with `advance`. So at this point, the size of the return list and the number of goals have desynced.\n\nThere is also a minor issue in `Ftactics.bind` in the case Depends/Uniform where a `tclUNIT (List.map (fun _ -> a) l)` should be replaced by `tclDISPATCHL (List.map (fun _ -> tclUNIT a))` when `tclDISPATCHL` is fixed.\n\nI will need to sleep on it to come up with a not-too-hacky solution. But if I'm right, it shouldn't be too hard to fix (though `tclDISPATCHL` may end up being more verbose).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537542","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537542","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537542,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzU0Mg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T15:44:00Z","updated_at":"2017-10-18T10:10:36Z","author_association":"CONTRIBUTOR","body":"Comment author: @jonleivent\n\nI have another case of strange behavior following unshelve (but not Unshelve).  In this case, typeclass resolution is running when it shouldn't following unshelve, but not following Unshelve all else being equal.  I will work to find a simple test case - but the question is, should I file it here or start another bug report?  I'm still hoping all of these strange behaviors following unshelve or simple refine are related, despite what Arnaud said.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537546","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537546","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537546,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzU0Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-27T20:09:47Z","updated_at":"2017-10-18T10:10:36Z","author_association":"CONTRIBUTOR","body":"Comment author: @jonleivent\n\nHere's that case where unshelve causes typeclass resolution when it shouldn't happen, but Unshelve doesn't - just in case it is a clue to this bug.  The problem occurs in both 8.5pl2 and 8.6:\n\n(*Pose an open constr to prevent immediate typeclass resolution in holes:*)\nTactic Notation \"opose\" open_constr(x) \"as\" ident(H) := pose x as H.\n\nInductive vect A : nat -> Type :=\n| vnil : vect A 0\n| vcons : forall (h:A) (n:nat), vect A n -> vect A (S n).\n\nClass Eqdec A := eqdec : forall a b : A, {a=b}+{a<>b}.\n\nRequire Bool.\n\nInstance Bool_eqdec : Eqdec bool := Bool.bool_dec.\n\nContext `{vect_sigT_eqdec : forall A : Type, Eqdec A -> Eqdec {a : nat & vect A a}}.\n\nTypeclasses eauto := debug.\n\nGoal True.\n  unshelve opose (@ vect_sigT_eqdec _ _ _ _) as H.\n  all:cycle 2.\n  eapply existT. (*BUG: Why does this do typeclass resolution in the evar?*)\nAbort.\n\nGoal True.\n  opose (@ vect_sigT_eqdec _ _ _ _) as H.\n  Unshelve.\n  all:cycle 3.\n  eapply existT. (*This does no typeclass resultion, which is correct.*)\nAbort.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537548","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537548","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537548,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzU0OA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-10-05T20:39:34Z","updated_at":"2017-10-18T10:10:36Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nI was wrong: the code is in `Ftactic` after all (`tclDISPATCH` has the correct behaviour: it returns one result per _original_ goal (except those which were skipped)).\n\nI had to add some filtering in `Ftactic.bind` in order to preserve the invariant (number of results = number of goals). The last two example from Jonathan are not solved by this. They should probably be moved in separate issues.\n\nFixed as https://github.com/coq/coq/pull/308 .\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537549","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537549","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537549,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzU0OQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-10-06T03:05:43Z","updated_at":"2017-10-18T10:10:37Z","author_association":"CONTRIBUTOR","body":"Comment author: @jonleivent\n\nSolving part of this is good news.  But, I was hoping that \"things go bonkers after unshelve\" would be one bug.\n\nI will move my examples, and wait for Arnaud's fix before filing any others I hit.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537550","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537550","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537550,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzU1MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-10-06T03:15:01Z","updated_at":"2017-10-18T10:10:37Z","author_association":"CONTRIBUTOR","body":"Comment author: @jonleivent\n\nother examples moved to:\nhttps://coq.inria.fr/bugs/show_bug.cgi?id=5122\nhttps://coq.inria.fr/bugs/show_bug.cgi?id=5123\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537556","html_url":"https://github.com/coq/coq/issues/4416#issuecomment-337537556","issue_url":"https://api.github.com/repos/coq/coq/issues/4416","id":337537556,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNzU1Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-10-10T09:13:34Z","updated_at":"2017-10-18T10:10:37Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nFixed by Arnaud's PR#308 in 8.5, will be merged to 8.6.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337537556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]