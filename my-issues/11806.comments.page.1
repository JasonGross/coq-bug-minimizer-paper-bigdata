[{"url":"https://api.github.com/repos/coq/coq/issues/comments/597874495","html_url":"https://github.com/coq/coq/issues/11806#issuecomment-597874495","issue_url":"https://api.github.com/repos/coq/coq/issues/11806","id":597874495,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Nzg3NDQ5NQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T20:56:22Z","updated_at":"2020-03-11T20:56:22Z","author_association":"MEMBER","body":"Note that it also fails when the plugin is literally empty, see [here](https://github.com/JasonGross/test-coq-plugin-macos/runs/501644736?check_suite_focus=true)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/597874495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/597878619","html_url":"https://github.com/coq/coq/issues/11806#issuecomment-597878619","issue_url":"https://api.github.com/repos/coq/coq/issues/11806","id":597878619,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Nzg3ODYxOQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T21:06:25Z","updated_at":"2020-03-11T21:06:25Z","author_association":"MEMBER","body":"cc @Blaisorblade  ?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/597878619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/597892248","html_url":"https://github.com/coq/coq/issues/11806#issuecomment-597892248","issue_url":"https://api.github.com/repos/coq/coq/issues/11806","id":597892248,"node_id":"MDEyOklzc3VlQ29tbWVudDU5Nzg5MjI0OA==","user":{"login":"Blaisorblade","id":289960,"node_id":"MDQ6VXNlcjI4OTk2MA==","avatar_url":"https://avatars.githubusercontent.com/u/289960?v=4","gravatar_id":"","url":"https://api.github.com/users/Blaisorblade","html_url":"https://github.com/Blaisorblade","followers_url":"https://api.github.com/users/Blaisorblade/followers","following_url":"https://api.github.com/users/Blaisorblade/following{/other_user}","gists_url":"https://api.github.com/users/Blaisorblade/gists{/gist_id}","starred_url":"https://api.github.com/users/Blaisorblade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Blaisorblade/subscriptions","organizations_url":"https://api.github.com/users/Blaisorblade/orgs","repos_url":"https://api.github.com/users/Blaisorblade/repos","events_url":"https://api.github.com/users/Blaisorblade/events{/privacy}","received_events_url":"https://api.github.com/users/Blaisorblade/received_events","type":"User","site_admin":false},"created_at":"2020-03-11T21:41:32Z","updated_at":"2020-03-11T21:41:32Z","author_association":"CONTRIBUTOR","body":"Seems to build here. My build log:\r\n```\r\n$ make\r\ncoq_makefile -f _CoqProject -o Makefile.coq\r\n/Library/Developer/CommandLineTools/usr/bin/make -f Makefile.coq all\r\nCOQDEP VFILES\r\nCOQPP src/strategy_tactic_plugin.mlg\r\nCOQDEP src/strategy_tactic_plugin.mllib\r\nCAMLDEP src/strategy_tactic_plugin.ml\r\nCAMLOPT -c  src/strategy_tactic_plugin.ml\r\nCAMLOPT -a -o src/strategy_tactic_plugin.cmxa\r\nCAMLOPT -shared -o src/strategy_tactic_plugin.cmxs\r\nld: warning: directory not found for option '-L/Users/pgiarrusso/.opam/coq-8.10-flambda/lib/coq//plugins/fourier'\r\nCOQC src/Strategy.v\r\nsrc/Strategy (real: 0.35, user: 0.18, sys: 0.08, mem: 76504 ko)\r\n```\r\n\r\n127 is apparently \"command not found\", so is OCaml misconfigured on that CI machine?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/597892248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/598005083","html_url":"https://github.com/coq/coq/issues/11806#issuecomment-598005083","issue_url":"https://api.github.com/repos/coq/coq/issues/11806","id":598005083,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODAwNTA4Mw==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T04:50:12Z","updated_at":"2020-03-12T04:50:12Z","author_association":"MEMBER","body":"Hmm, can you take a look at the script I'm using (it's the same as Coq CI's script except that I don't `make byte` in Coq) :\r\n```\r\n    env:\r\n      NJOBS: \"2\"\r\n      COQ_VERSION: \"master\"\r\n\r\n    # initial steps copied from https://github.com/coq/coq/blob/cfc41cb79e2364f19d97e7e5c94262132972b0b2/azure-pipelines.yml#L41-L110\r\n    steps:\r\n    - name: Install system dependencies\r\n      run: |\r\n        set -e\r\n        brew update\r\n        (cd $(brew --repository)/Library/Taps/homebrew/homebrew-core/ && git fetch --shallow-since=${HBCORE_DATE} && git checkout ${HBCORE_REF})\r\n        brew install gnu-time opam pkg-config gtksourceview3 adwaita-icon-theme\r\n        pip3 install macpack\r\n      env:\r\n        HOMEBREW_NO_AUTO_UPDATE: \"1\"\r\n        HBCORE_DATE: \"2019-09-03\"\r\n        HBCORE_REF: \"44ee64cf4b9f2d2bf000758d356db0c77425e42e\"\r\n\r\n    - name: Install OCaml dependencies\r\n      run: |\r\n        set -e\r\n        export PKG_CONFIG_PATH=/usr/local/opt/libffi/lib/pkgconfig\r\n        opam init -a -j \"$NJOBS\" --compiler=ocaml-base-compiler.$COMPILER\r\n        opam switch set ocaml-base-compiler.$COMPILER\r\n        eval $(opam env)\r\n        opam update\r\n        opam install -j \"$NJOBS\" num ocamlfind${FINDLIB_VER} ounit lablgtk3-sourceview3\r\n        opam list\r\n      env:\r\n        COMPILER: \"4.09.0\"\r\n        FINDLIB_VER: \".1.8.1\"\r\n        OPAMYES: \"true\"\r\n\r\n    - name: Build Coq\r\n      run: |\r\n        set -e\r\n        git clone https://github.com/coq/coq.git --branch=${COQ_VERSION}\r\n        eval $(opam env)\r\n        (cd coq && ./configure -prefix /usr/local/ -warn-error yes -native-compiler no -coqide no)\r\n        (cd coq && make -j \"$NJOBS\")\r\n\r\n    - name: Install Coq\r\n      run: |\r\n        (cd coq && make install)\r\n\r\n    - name: echo build params\r\n      run: |\r\n        sysctl -n machdep.cpu.brand_string\r\n        sysctl -a | grep machdep.cpu\r\n        uname -a\r\n        sw_vers -productVersion\r\n        system_profiler SPSoftwareDataType\r\n        coqc --version\r\n        echo | coqtop\r\n    - uses: actions/checkout@v2\r\n    - name: submodules-init\r\n      uses: snickerbockers/submodules-init@v4\r\n    - name: all\r\n      run: make all VERBOSE=1\r\n```","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/598005083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/598141639","html_url":"https://github.com/coq/coq/issues/11806#issuecomment-598141639","issue_url":"https://api.github.com/repos/coq/coq/issues/11806","id":598141639,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODE0MTYzOQ==","user":{"login":"Blaisorblade","id":289960,"node_id":"MDQ6VXNlcjI4OTk2MA==","avatar_url":"https://avatars.githubusercontent.com/u/289960?v=4","gravatar_id":"","url":"https://api.github.com/users/Blaisorblade","html_url":"https://github.com/Blaisorblade","followers_url":"https://api.github.com/users/Blaisorblade/followers","following_url":"https://api.github.com/users/Blaisorblade/following{/other_user}","gists_url":"https://api.github.com/users/Blaisorblade/gists{/gist_id}","starred_url":"https://api.github.com/users/Blaisorblade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Blaisorblade/subscriptions","organizations_url":"https://api.github.com/users/Blaisorblade/orgs","repos_url":"https://api.github.com/users/Blaisorblade/repos","events_url":"https://api.github.com/users/Blaisorblade/events{/privacy}","received_events_url":"https://api.github.com/users/Blaisorblade/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T11:41:02Z","updated_at":"2020-03-12T11:41:02Z","author_association":"CONTRIBUTOR","body":"To consolidate discussion here from [Gitter](https://gitter.im/coq/coq?at=5e695c2af046a30bbe5a2c4d):\r\n> I wonder about export PKG_CONFIG_PATH=/usr/local/opt/libffi/lib/pkgconfig in the github workflow: any chance that's needed also when using the compiler, for whatever reason?\r\n\r\nThat's the only obvious question â€” also because the error is at link time. And FWIW my test was with Coq 8.10.2 (and I don't have macpack).\r\n\r\nBut I'm not the best expert, and @MSoegtropIMC gave example working code on Gitter...","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/598141639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/598255279","html_url":"https://github.com/coq/coq/issues/11806#issuecomment-598255279","issue_url":"https://api.github.com/repos/coq/coq/issues/11806","id":598255279,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODI1NTI3OQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T15:35:31Z","updated_at":"2020-03-12T15:35:31Z","author_association":"MEMBER","body":"Apparently the issue was that I need to run `eval $(opam config env)` before building my project.  I assume this is expected, so will close this issue.  If there is still an issue, others should feel free to reopen","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/598255279/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/598357027","html_url":"https://github.com/coq/coq/issues/11806#issuecomment-598357027","issue_url":"https://api.github.com/repos/coq/coq/issues/11806","id":598357027,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODM1NzAyNw==","user":{"login":"MSoegtropIMC","id":7895506,"node_id":"MDQ6VXNlcjc4OTU1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/7895506?v=4","gravatar_id":"","url":"https://api.github.com/users/MSoegtropIMC","html_url":"https://github.com/MSoegtropIMC","followers_url":"https://api.github.com/users/MSoegtropIMC/followers","following_url":"https://api.github.com/users/MSoegtropIMC/following{/other_user}","gists_url":"https://api.github.com/users/MSoegtropIMC/gists{/gist_id}","starred_url":"https://api.github.com/users/MSoegtropIMC/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MSoegtropIMC/subscriptions","organizations_url":"https://api.github.com/users/MSoegtropIMC/orgs","repos_url":"https://api.github.com/users/MSoegtropIMC/repos","events_url":"https://api.github.com/users/MSoegtropIMC/events{/privacy}","received_events_url":"https://api.github.com/users/MSoegtropIMC/received_events","type":"User","site_admin":false},"created_at":"2020-03-12T18:43:56Z","updated_at":"2020-03-12T18:43:56Z","author_association":"CONTRIBUTOR","body":"This explains the 127 error (missing executable). Good that this is solved.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/598357027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]