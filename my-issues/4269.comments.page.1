[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535321","html_url":"https://github.com/coq/coq/issues/4269#issuecomment-337535321","issue_url":"https://api.github.com/repos/coq/coq/issues/4269","id":337535321,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNTMyMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-06-30T16:34:29Z","updated_at":"2017-10-18T10:03:51Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nCreated attachment 595\nA \"proof\" of False that prints as closed under the global context\n\nDefinition lob : False := Lob'.lob.\nDefinition lob' : False := Eval hnf in lob.\nPrint Assumptions lob.\n(* Closed under the global context *)\nPrint Assumptions lob'.\n(* Axioms:\nPreL'.oops : False *)\n\n\nSee the attached file.  Sorry, it's a bit long.\n\nI suspect the issue has something to do with module includes, or module type includes.\n\n> Attached file: [bug_print_assumptions_bad_03.v](https://coq.inria.fr/bugfiles/attachment.cgi?id=595) (application/octet-stream, 42164 bytes)\n> Description:   A \"proof\" of False that prints as closed under the global context\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535323","html_url":"https://github.com/coq/coq/issues/4269#issuecomment-337535323","issue_url":"https://api.github.com/repos/coq/coq/issues/4269","id":337535323,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNTMyMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-06-30T20:38:25Z","updated_at":"2017-10-18T10:03:52Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nInterestingly, coqchk complains:\n\nAnomaly: Module bug_print_assumptions_bad_03.Lob_DOT_bug_print_assumptions_bad_02.Lob.bug_print_assumptions_bad_02.LobsTheoremPreProof.Lob1H.Lob1'.PretermPrimitives' is already defined.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535324","html_url":"https://github.com/coq/coq/issues/4269#issuecomment-337535324","issue_url":"https://api.github.com/repos/coq/coq/issues/4269","id":337535324,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNTMyNA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-06-30T22:41:58Z","updated_at":"2017-10-18T10:03:52Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nThere seems to be at least two bugs related to modules here. The more serious one is that Print Assumptions doesn't follow Includes. Here is a (much) smaller example:\n\nModule M.\nAxiom foo : False.\nEnd M.\n\nModule N.\nInclude M.\nEnd N.\n\nPrint Assumptions N.foo.\n(* Closed under the global context *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535326","html_url":"https://github.com/coq/coq/issues/4269#issuecomment-337535326","issue_url":"https://api.github.com/repos/coq/coq/issues/4269","id":337535326,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNTMyNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-06-30T22:53:02Z","updated_at":"2017-10-18T10:03:53Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nThe second bug is illustrated by the following example:\n\nModule Type T.\nEnd T.\n\nModule F (X : T).\nEnd F.\n\nModule G (X : T).\nPrint F.\n(* Anomaly: X already exists. Please report. *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535327","html_url":"https://github.com/coq/coq/issues/4269#issuecomment-337535327","issue_url":"https://api.github.com/repos/coq/coq/issues/4269","id":337535327,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNTMyNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-06-30T22:59:33Z","updated_at":"2017-10-18T10:03:53Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nThe checker is not affected by the first bug, but probably by the second (or a variant of it).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535331","html_url":"https://github.com/coq/coq/issues/4269#issuecomment-337535331","issue_url":"https://api.github.com/repos/coq/coq/issues/4269","id":337535331,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNTMzMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-06-30T23:04:33Z","updated_at":"2017-10-18T10:03:53Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThanks!, Maxime, for minimizing my example.\n\nThe second bug is [BZ#3975](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%233975%22).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535333","html_url":"https://github.com/coq/coq/issues/4269#issuecomment-337535333","issue_url":"https://api.github.com/repos/coq/coq/issues/4269","id":337535333,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzNTMzMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-06-30T23:26:28Z","updated_at":"2017-10-18T10:03:54Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nAnd the winner is:\n\ncommit ef2c3cc02409949f19c70903a86a8181f4ed03e7\nAuthor: letouzey <letouzey@ 85f007b7-540e-0410-9357-904b9bb8a0f7>\nDate:   Tue Oct 25 17:27:34 2011 +0000\n\n    First attempt at making Print Assumption compatible with opaque modules (fix [BZ#2168](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%232168%22))\n    \n     We replace Global.lookup_constant by our own code that looks for a module\n     and enters its implementation. This is still preliminary work, I would prefer\n     to understand more completely the part about module substitutions when\n     entering an applied functor. But this code already appears to work quite well.\n     Anyway, since we only search for constants, we don't need to reconstitute a\n     100% accurate environment, as long as the same objects are in it.\n    \n     Note:\n    \n      - Digging inside module structures is slower than just using\n        Global.lookup_constant. Hence we try to avoid it as long as we could.\n        Only in front of axioms (or in front of constant unknown to Global)\n        do we check whether we have an inner-module implementation for this\n        constant. There is some memoization of the search for internal\n        structure_body out of a module_path.\n    \n      - In case of inner-module axioms, we might not be able to print\n        its type, but only its long name.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337535333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]