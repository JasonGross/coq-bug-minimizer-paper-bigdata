[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540806","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540806","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540806,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgwNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-08T17:19:08Z","updated_at":"2017-10-18T10:20:20Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nCreated attachment 677\nScreen cast of poor behavior\n\nOnce I click \"fully check the document\", it's impossible to interrupt the computation, and impossible to step forward or back, except by unevaluating the entire document.  This is counter-intuitive, even if expected; at the very least, editing should display a warning (once),and interrupting should pop up a dialog box, saying that the document cannot be edited when it's being fully checked, and the only option is to fully revert the document and start again.\n\n> Attached file: [vokoscreen-2016-03-08_12-17-21.avi](https://coq.inria.fr/bugfiles/attachment.cgi?id=677) (video/x-msvideo, 591324 bytes)\n> Description:   Screen cast of poor behavior\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540808","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540808","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540808,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgwOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-09T16:29:30Z","updated_at":"2017-10-18T10:20:20Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nThe current implementation makes the main Coq process \"wait on a lock\" so there is no way to have it process a \"please stop\" message.  Rewinding the entire document simply sends a kill -9 to Coq, this is why it works.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540809","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540809","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540809,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgwOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T14:57:39Z","updated_at":"2017-10-18T10:20:20Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nCan't we just stuff a check_for_interrupt somewhere in Stm.join?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540811","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540811","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540811,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgxMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T15:08:45Z","updated_at":"2017-10-18T10:20:20Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nThere is no \"thread\" reading on the channel for a message saying \"please flip the interrupt bit\".  It is the main thread that does the Mutex.lock.\n\nThis is why I tagged this as major redesign: one needs to add an extra thread\nas PIDE based UI do.  Such thread would always be responsive, and could \"unlock\" the mutex (so that the other guy can check for interrupt and bail out).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540814","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540814","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540814,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgxNA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T15:29:13Z","updated_at":"2017-10-18T10:20:21Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThat's true if we want to have a proper message for interruption, but currently we're using signals. So if I'm not mistaken, as soon as we send a SIGINT signal to the coqtop worker, the join operation is going to be interrupted and the handler for that signal is going to be fired. We need no threads.\n\nIf we want to have interruption as a protocol message, that's going to be different indeed.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540816","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540816","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540816,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgxNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T15:41:31Z","updated_at":"2017-10-18T10:20:21Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nOh, so you think the only thing preventing the [X] to work is the \"grab_coqtop\" thingy?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540817","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540817","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540817,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgxNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T15:42:51Z","updated_at":"2017-10-18T10:20:21Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nI'm doing some experiments (Linux here) and it seems that the Sys.break exception is indeed raised in Coqtop, but it only results in killing some thread and leaving the STM in a bad state.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540818","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540818","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540818,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgxOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T15:45:33Z","updated_at":"2017-10-18T10:20:21Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nBTW here is the backtrace of the Sys.Break exception:\n\nRaised by primitive operation at file \"ide/ide_slave.ml\", line 29, characters 13-43\nCalled from file \"stm/asyncTaskQueue.ml\", line 182, characters 17-29\nCalled from file \"thread.ml\", line 37, characters 8-14\nThread 9 killed on uncaught exception Sys.Break\n\nNot really informative, but who knows...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540819","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540819","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540819,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgxOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T15:50:25Z","updated_at":"2017-10-18T10:20:21Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\neach worker is \"managed\" by a thread.  Its code is in asyncTaskQueue.\nThere, you have a panel of functions to call (from the Task module) but I'm afraid you can't know if you are the (only) worker that has to stop.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540821","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540821","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540821,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgyMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T15:55:18Z","updated_at":"2017-10-18T10:20:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nI mean, you could call\n\n  Task.on_task_cancellation_or_expiration_or_slave_death\n\nor better catch one more exception here:\n \n  https://github.com/coq/coq/blob/trunk/stm/asyncTaskQueue.ml#L223\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540823","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540823","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540823,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgyMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T15:56:33Z","updated_at":"2017-10-18T10:20:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nand here:\n\n  https://github.com/coq/coq/blob/trunk/stm/asyncTaskQueue.ml#L213\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540824","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540824","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540824,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgyNA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T15:57:31Z","updated_at":"2017-10-18T10:20:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThe fact is that currently, the function that receives the signal is the kill_if watch. The SIGINT unexpectedly kills this thread, which is at least a bug.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540825","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540825","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540825,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgyNQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T16:04:12Z","updated_at":"2017-10-18T10:20:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nYou are right, the watch dog should catch the exception and execute the code in the else_if branch.\n\nThe other patch I was suggesting seems relevant too.\n\nBest,\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540826","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540826","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540826,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgyNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T16:09:49Z","updated_at":"2017-10-18T10:20:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nJoy of spaghetti code, fixing that part shows that there are other places where the exception escapes:\n\nRaised by primitive operation at file \"ide/ide_slave.ml\", line 29, characters 13-43\nCalled from file \"unix.ml\", line 249, characters 7-33\nCalled from file \"lib/cThread.ml\", line 15, characters 8-30\nCalled from file \"lib/cThread.ml\", line 31, characters 12-50\nCalled from file \"lib/cThread.ml\", line 71, characters 4-50\nCalled from file \"stm/workerPool.ml\", line 50, characters 13-51\nCalled from file \"stm/workerPool.ml\", line 83, characters 2-29\nCalled from file \"list.ml\", line 55, characters 20-23\nCalled from file \"stm/workerPool.ml\", line 91, characters 13-160\nCalled from file \"stm/workerPool.ml\", line 75, characters 12-15\nCalled from file \"stm/workerPool.ml\", line 84, characters 32-44\nCalled from file \"thread.ml\", line 37, characters 8-14\nThread 3 killed on uncaught exception Sys.Break\n\nI'll see if I can patch them one by one.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540827","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540827","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540827,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgyNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T16:17:17Z","updated_at":"2017-10-18T10:20:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nIn addition, CoqIDE is badly behaving if I fiddle too much with it. When receiving the error \"Worker dies of task expired\", most often the document in not in sync with the cancelled part. Any idea where it could come from?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540828","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540828","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540828,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgyOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T17:16:40Z","updated_at":"2017-10-18T10:20:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThis particular issue should be fixed by 45e4391, although I know that stray Sys.Break exceptions can be raised in unexpected parts of the code, leading to strange and uncommon behaviours. Yet, this is a real mess to track statically and typically falls in the eisenbug category, so that I think we can close this bug for now and open a new one when we face the issue. (Or when we get rid of threads.)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540829","html_url":"https://github.com/coq/coq/issues/4614#issuecomment-337540829","issue_url":"https://api.github.com/repos/coq/coq/issues/4614","id":337540829,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0MDgyOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-15T17:18:42Z","updated_at":"2017-10-18T10:20:23Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThanks!\n\nAre there any plans to get rid of signals entirely (or at least get rid of them for everything except communicating to threads/processes at the top level)?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337540829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]