[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522678","html_url":"https://github.com/coq/coq/issues/3529#issuecomment-337522678","issue_url":"https://api.github.com/repos/coq/coq/issues/3529","id":337522678,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjY3OA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-19T18:13:32Z","updated_at":"2018-04-27T18:05:32Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n\r\nHere is some code that succeeds in Coq 8.4, but fails in Coq trunk:\r\n```coq\r\n(* File reduced by coq-bug-finder from original input, then from 5752 lines to 3828 lines, then from 2707 lines to 558 lines, then from 472 lines to 168 lines, then from 110 lines to 101 lines, then from 96 lines to 13 lines *)\r\nRequire Coq.Setoids.Setoid.\r\nImport Coq.Setoids.Setoid.\r\nClass ILogicOps Frm := { lentails: relation Frm }.\r\nInstance ILogicOps_Prop : ILogicOps Prop | 2 := {| lentails P Q := P -> Q |}.\r\n(* Toplevel input, characters 82-88:\r\nError:\r\nIn environment\r\nP : Type\r\nQ : Type\r\nThe term \"P -> Q\" has type \"Type\" while it is expected to have type \"Prop\". *)\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522679","html_url":"https://github.com/coq/coq/issues/3529#issuecomment-337522679","issue_url":"https://api.github.com/repos/coq/coq/issues/3529","id":337522679,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjY3OQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-12T08:02:30Z","updated_at":"2018-04-27T18:20:34Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\r\n\r\nAn ever smaller testcase:\r\n```coq\r\nClass R T := { f: T -> Prop }.\r\nInstance r : R Prop := {| f P := P -> P |}.\r\n```\r\nIf you replace Instance by Definition, it fails even for 8.4. If you replace it by Program Instance or Program Definition, it works for both 8.4 and 8.5. So it seems to be just the usual deficiency of the non-Program vernacular commands rather than a specific regression.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522680","html_url":"https://github.com/coq/coq/issues/3529#issuecomment-337522680","issue_url":"https://api.github.com/repos/coq/coq/issues/3529","id":337522680,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjY4MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-12T16:00:45Z","updated_at":"2017-10-18T09:27:40Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nAnd the winner is\n\ncommit 99cdbc25a3a92545544a087ed55240c488b42fc9\nAuthor: Matthieu Sozeau <mattam@ mattam.org>\nDate:   Wed Jun 11 16:55:29 2014 +0200\n\n    Fix bug [BZ#3289](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%233289%22)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522682","html_url":"https://github.com/coq/coq/issues/3529#issuecomment-337522682","issue_url":"https://api.github.com/repos/coq/coq/issues/3529","id":337522682,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjY4Mg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-12T20:20:38Z","updated_at":"2018-04-27T18:20:42Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\r\n\r\nYes, this is a proper regression due to the lack of bidirectionality of typechecking for the non-Program variant. Fixing this would trigger more incompatibilities. Removing the fix for 3289 would be worse. It used to work in 8.4 because it was interpreting the definition as { f P := P -> P } (note the lack of enclosing \"|\") which is treated differently for Instance declarations, properly propagating the type information (here the parameter Prop) when typechecking each method (here f). In 8.4, this comes up just the same if you try:\r\n```\r\n Definition foo : R Prop := Build_R _ (fun P => P -> P). \r\n```\r\nProgram does bidirectional type-checking and works in all cases (in 8.4 or 8.5).\r\n\r\nSo that's a wontfix.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522683","html_url":"https://github.com/coq/coq/issues/3529#issuecomment-337522683","issue_url":"https://api.github.com/repos/coq/coq/issues/3529","id":337522683,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjY4Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-12T21:53:52Z","updated_at":"2017-10-18T09:27:40Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\n*** Bug [BZ#3965](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%233965%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522684","html_url":"https://github.com/coq/coq/issues/3529#issuecomment-337522684","issue_url":"https://api.github.com/repos/coq/coq/issues/3529","id":337522684,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjY4NA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-15T12:16:56Z","updated_at":"2017-10-18T09:27:40Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\n*** Bug [BZ#3749](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%233749%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522686","html_url":"https://github.com/coq/coq/issues/3529#issuecomment-337522686","issue_url":"https://api.github.com/repos/coq/coq/issues/3529","id":337522686,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjY4Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-20T14:54:40Z","updated_at":"2017-10-18T09:27:40Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\n*** Bug [BZ#3741](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%233741%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]