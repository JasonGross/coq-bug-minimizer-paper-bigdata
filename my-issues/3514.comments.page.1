[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522459","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522459","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522459,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ1OQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-12T22:07:46Z","updated_at":"2017-10-18T09:26:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nHere is some code that works in 8.4, but not trunk:\nGoal True /\\ True.\n  split.\n  2:constructor.\n  1:idtac.\n  Undo.\n  Undo.\n  2:idtac. (* Toplevel input, characters 0-8:\nError: No such goals. *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522461","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522461","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522461,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ2MQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T06:38:29Z","updated_at":"2017-10-18T09:26:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nIf you put \"Undo\" in the document, then it is part of it.  And the second Undo undoes the first one. Either you Back 2, or you use Stm Command Undo (so that Undo is not part of the document, it is like the back button in CoqIDE).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522462","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522462","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522462,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ2Mg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-13T10:50:52Z","updated_at":"2017-10-18T09:26:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThis should probably be documented in CHANGES as a change in behavior of [Undo], then?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522463","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522463","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522463,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ2Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-15T15:16:22Z","updated_at":"2017-10-18T09:26:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nIt works for me on v8.5. Enrico, could you clarify what is the intended behavior of \"Undo. Undo.\"? If the second one is supposed to cancel the first one now, then there is a new bug.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522465","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522465","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522465,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ2NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-15T15:31:27Z","updated_at":"2017-10-18T09:26:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nIIRC I made it work in coqtop as in 8.4, but only in coqtop.\n\nDid you test it in coqtop?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522466","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522466","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522466,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ2Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-15T15:43:04Z","updated_at":"2017-10-18T09:27:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nYes, and indeed the behavior is different in CoqIDE.\n\nI think it is a really bad idea to have a different behavior of the commands depending on the toplevel. I know this is not the first instance, but it would be great if we could stop adding new ones. I don't really care whether we preserve or not the behavior of Undo from 8.4, but the behavior should be uniform across all the toplevels. (And it is especially important for Undo seeing how prevalent it is in tutorials about Coq.)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522467","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522467","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522467,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ2Nw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-15T15:57:11Z","updated_at":"2017-10-18T09:27:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nTwo remarks:\n- Undo was behaving the same, then Hugo complained at a GT and I added the\n  quirk.  In coqtop you can't easily know how many steps you have to go\n  backward, so \"repeating Undo enough times\" seems reasonable to me.\n  Another way to put it: CoqIDE gives you a notion of document, and Undo\n  can be done via a side channel; coqtop does not.\n- Undo in tutorials is clearly useful, but there you can easily write\n  \"Undo n\", ant it works as expected.  What does not work as before\n  is \"Undo. Undo. .. Undo.\".\n\nThere is an entry about Undo in CHANGES, but does not mention this behavior.\nI'm fixing it, then I think we should really close the bug.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522469","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522469","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522469,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ2OQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-15T16:12:30Z","updated_at":"2017-10-18T09:27:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nWhat makes you think than Undo n works any better? It obviously suffers from the same issue as Undo. Consider the following tutorial; it works in coqtop, but not in coqide.\n\nGoal True /\\ True.\nProof.\n(* a conjunction can be separated into two subgoals using the following tactic *)\nsplit.\n(* now we have to prove the first True, which has a canonical proof named I *)\nexact I.\n(* but True is just an inductive type with a single constructor, so we can ask Coq to apply it *)\nUndo.\nconstructor.\n(* but a conjunction is also an inductive type with a single constructor, so we could have done the same earlier *)\nUndo 2.\nconstructor.\nconstructor.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522471","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522471","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522471,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ3MQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-15T16:24:53Z","updated_at":"2017-10-18T09:27:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nIt works if you count the right number of sentences to \"remove\" from the document (you also have to count Undo).  I have not tried, but Undo 4 should do what you want. Before the 2 was referring to 2 tactics (so no +1 Undo and no +1 for the already undo-ed tactic).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522473","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522473","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522473,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ3Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-15T16:32:51Z","updated_at":"2017-10-18T09:27:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nSure, but you missed the point. What I am saying is that it is no longer possible to write a script that uses overlapping Undo, even when using Undo n. As you point out, depending on the toplevel, the user will have to use either Undo 2 or Undo 4 for the tutorial to go through.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522475","html_url":"https://github.com/coq/coq/issues/3514#issuecomment-337522475","issue_url":"https://api.github.com/repos/coq/coq/issues/3514","id":337522475,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMjQ3NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-15T17:10:03Z","updated_at":"2017-10-18T09:27:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nThat's a good point.  I'll see tomorrow if I can reproduce the old semantics and close this bug once and for all.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337522475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]