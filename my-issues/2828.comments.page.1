[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511050","html_url":"https://github.com/coq/coq/issues/2828#issuecomment-337511050","issue_url":"https://api.github.com/repos/coq/coq/issues/2828","id":337511050,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMTA1MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2012-06-24T16:37:41Z","updated_at":"2021-04-02T20:44:56Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n\r\nThe code\r\n```\r\nParameter A B : Type.\r\nCoercion POL (p : prod A B) := fst p.\r\nGoal forall x : prod A B, A.\r\n  intro x. exact x.\r\n```\r\ngives `Anomaly: apply_coercion. Please report.` on `exact x`.\r\n\r\nI'm not sure if this is actually because, or even related to the fact that, the `Coercion` line gives the warning \" Warning: POL does not respect the uniform inheritance condition \", but it seems like a good first guess.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511052","html_url":"https://github.com/coq/coq/issues/2828#issuecomment-337511052","issue_url":"https://api.github.com/repos/coq/coq/issues/2828","id":337511052,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMTA1Mg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2012-06-25T08:29:05Z","updated_at":"2017-10-18T08:54:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nThis sort of coercions used to trigger a full-blown error. The code was (unfortunately) never meant to handle this sort of cases. It's not very surprising that it fails awfully.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511053","html_url":"https://github.com/coq/coq/issues/2828#issuecomment-337511053","issue_url":"https://api.github.com/repos/coq/coq/issues/2828","id":337511053,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMTA1Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-21T19:40:33Z","updated_at":"2017-10-18T08:54:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\n*** Bug [BZ#4635](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%234635%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511055","html_url":"https://github.com/coq/coq/issues/2828#issuecomment-337511055","issue_url":"https://api.github.com/repos/coq/coq/issues/2828","id":337511055,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMTA1NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-21T20:07:14Z","updated_at":"2017-10-18T08:54:22Z","author_association":"CONTRIBUTOR","body":"Comment author: Qinxiang Cao &lt;<caoqinxiang@gmail.com>&gt;\n\n(In reply to Jason Gross from comment [BZ#2](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%232%22))\n> *** Bug [BZ#4635](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%234635%22) has been marked as a duplicate of this bug. ***\n\nIn fact, I read this before submitting my bug report. But I still do not get why this is an error, i.e. I don't see what is the boundary of legal coercion and illegal coercion.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511056","html_url":"https://github.com/coq/coq/issues/2828#issuecomment-337511056","issue_url":"https://api.github.com/repos/coq/coq/issues/2828","id":337511056,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMTA1Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-03-21T20:17:07Z","updated_at":"2017-10-18T08:54:22Z","author_association":"CONTRIBUTOR","body":"Comment author: Qinxiang Cao &lt;<caoqinxiang@gmail.com>&gt;\n\n(In reply to Jason Gross from comment [BZ#2](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%232%22))\n> *** Bug [BZ#4635](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%234635%22) has been marked as a duplicate of this bug. ***\n\nHmmm, I did some more experiment. It seems like: Coercion are for general cases not for specific cases. Is this correct?\n\nI changed my code into the following, and it works (see Bug [BZ#4635](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%234635%22) for original error code). If my understanding is correct, I hope people with similar problem in the future can see this post.\n\n\nSection Failure.\n\nContext {addr: Type}.\nContext {data: Type}.\n\nParameter pAC: A addr data -> C addr data.\nCoercion pAC: A >-> C.\n\nEnd Failure.\n\nModule Success.\nSection Success.\n\nContext {addr: Type}.\nContext {data: Type}.\n\nGoal forall (b: B addr data (fun a => True)) (x: addr),\n  gamma _ _ (pAC b) x = gamma _ _ (pAC b) x.\nAbort.\n\n(* Now it works. *)\nGoal forall (b: B addr data (fun g => True)) (x: addr),\n  gamma _ _ b x = gamma _ _ b x.\nAbort.\n\nEnd Success.\nEnd Success.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511057","html_url":"https://github.com/coq/coq/issues/2828#issuecomment-337511057","issue_url":"https://api.github.com/repos/coq/coq/issues/2828","id":337511057,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMTA1Nw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-10-24T18:12:13Z","updated_at":"2017-10-18T08:54:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\n\n*** Bug [BZ#4507](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%234507%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511058","html_url":"https://github.com/coq/coq/issues/2828#issuecomment-337511058","issue_url":"https://api.github.com/repos/coq/coq/issues/2828","id":337511058,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMTA1OA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-10-24T18:24:17Z","updated_at":"2017-10-18T08:54:22Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\n\n*** Bug [BZ#4114](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%234114%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337511058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]