[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533490","html_url":"https://github.com/coq/coq/issues/4154#issuecomment-337533490","issue_url":"https://api.github.com/repos/coq/coq/issues/4154","id":337533490,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzMzQ5MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T03:27:19Z","updated_at":"2021-08-21T10:15:49Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n\r\nCreated attachment 567\r\nbuggy file\r\n\r\nI get the error message `The term \"pf\" has type \"?T@ {x:={| string_val := str; state_val := None |}}\"\r\nwhile it is expected to have type \"tts str ≤s ?s\" (cannot instantiate\r\n\"?T\" because \"str\" is not in its scope: available arguments are\r\n\"CharType\" \"String\" \"G\" \"leaf_predata\" \"leaf_methods'\"\r\n\"leaf_stypes'\" \"leaf_ftypes'\" \"leaf_extra_failure_data\"\r\n\"top_split_stateT\" \"top_methods'\" \"str0\" \"valid\" \"it\"\r\n\"its\" \"{| string_val := str; state_val := None |}\").` in the attached file.\r\n\r\n> Attached file: [bug_parses_dependently_typed_sum_instance_weaker_07.v](https://coq.inria.fr/bugfiles/attachment.cgi?id=567) (application/octet-stream, 12028 bytes)\r\n> Description:   buggy file\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533493","html_url":"https://github.com/coq/coq/issues/4154#issuecomment-337533493","issue_url":"https://api.github.com/repos/coq/coq/issues/4154","id":337533493,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzMzQ5Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T03:44:25Z","updated_at":"2017-10-18T09:58:41Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nI would welcome advice on how to convince Coq 8.5 to accept this definition without having to give everything explicitly; I was very glad when I managed to make 8.4 accept a slew of definitions like these without having to spell everything out verbosely.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533495","html_url":"https://github.com/coq/coq/issues/4154#issuecomment-337533495","issue_url":"https://api.github.com/repos/coq/coq/issues/4154","id":337533495,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzMzQ5NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-03-23T03:47:11Z","updated_at":"2021-08-21T10:15:23Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n\r\nNote that this works, but is much more verbose than I'd like:\r\n```coq\r\n  Global Program Instance sum_extra_failure_data\r\n  : @ parser_dependent_types_extra_failure_dataT' _ String sum_types\r\n    := { H_prod_split str0 valid it its := _ }.\r\n  Next Obligation.\r\n    revert str.\r\n    refine (option_rect_str\r\n              (fun str pf => _)\r\n              (fun str pf => _)).\r\n    2:refine ((@ H_prod_split _ _ _ leaf_extra_failure_data _ _ _ _ (tts str) pf)\r\n                ∘ (fun H => eq_rect _ _ H _ _)).\r\n```\r\nWhy is it that if I separate the `refine`s, Coq can infer the types correctly, but if I combine them, Coq can't?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/941024432","html_url":"https://github.com/coq/coq/issues/4154#issuecomment-941024432","issue_url":"https://api.github.com/repos/coq/coq/issues/4154","id":941024432,"node_id":"IC_kwDOABUDh844FuSw","user":{"login":"SkySkimmer","id":2461932,"node_id":"MDQ6VXNlcjI0NjE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2461932?v=4","gravatar_id":"","url":"https://api.github.com/users/SkySkimmer","html_url":"https://github.com/SkySkimmer","followers_url":"https://api.github.com/users/SkySkimmer/followers","following_url":"https://api.github.com/users/SkySkimmer/following{/other_user}","gists_url":"https://api.github.com/users/SkySkimmer/gists{/gist_id}","starred_url":"https://api.github.com/users/SkySkimmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SkySkimmer/subscriptions","organizations_url":"https://api.github.com/users/SkySkimmer/orgs","repos_url":"https://api.github.com/users/SkySkimmer/repos","events_url":"https://api.github.com/users/SkySkimmer/events{/privacy}","received_events_url":"https://api.github.com/users/SkySkimmer/received_events","type":"User","site_admin":false},"created_at":"2021-10-12T13:41:00Z","updated_at":"2021-10-12T13:41:00Z","author_association":"CONTRIBUTOR","body":"Reproduction code is outdated, please reopen with it repaired if still relevant.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/941024432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]