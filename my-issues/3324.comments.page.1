[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337519381","html_url":"https://github.com/coq/coq/issues/3324#issuecomment-337519381","issue_url":"https://api.github.com/repos/coq/coq/issues/3324","id":337519381,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxOTM4MQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-05-14T23:41:23Z","updated_at":"2017-10-18T09:17:51Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThis code works in 8.4, but not trunk:\n\n(* File reduced by coq-bug-finder from original input, then from 6462 lines to 5760 lines, then from 5761 lines to 181 lines, then from 191 lines to 181 lines, then from 181 lines to 83 lines, then from 87 lines to 27 lines *)\nAxiom admit : forall {T}, T.\nClass IsHProp (A : Type) : Type := {}.\nClass IsHSet (A : Type) : Type := {}.\nInductive Unit : Set := tt.\nRecord hProp := hp { hproptype :> Type ; isp : IsHProp hproptype}.\nDefinition Unit_hp:hProp:=(hp Unit admit).\nRecord hSet := BuildhSet {setT:> Type; iss :> IsHSet setT}.\nCanonical Structure default_HSet:= fun T P => (@ BuildhSet T P).\nGlobal Instance isset_hProp : IsHSet hProp | 0.\nDefinition isepi {X Y} `(f:X->Y) := forall Z: hSet,\n                                    forall g h: Y -> Z, (fun x => g (f x)) = (fun x => h (f x)) -> g = h.\nLemma isepi_issurj {X Y} (f:X->Y): isepi f -> True.\nProof.\n  intros epif.\n  set (g :=fun _:Y => Unit_hp).\n  pose proof (epif (default_HSet hProp isset_hProp) g).\n  specialize (epif _ g).\n(* Toplevel input, characters 34-35:\nError:\nIn environment\nX : Type\nY : Type\nf : X -> Y\nepif : isepi f\ng := fun _ : Y => Unit_hp : Y -> hProp\nH : forall h : Y -> default_HSet hProp isset_hProp,\n    (fun x : X => g (f x)) = (fun x : X => h (f x)) -> g = h\nThe term \"g\" has type \"Y -> hProp\" while it is expected to have type\n \"Y -> ?30\".\n *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337519381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337519386","html_url":"https://github.com/coq/coq/issues/3324#issuecomment-337519386","issue_url":"https://api.github.com/repos/coq/coq/issues/3324","id":337519386,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxOTM4Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-05-15T07:43:56Z","updated_at":"2017-10-18T09:17:51Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nHere a less homotopic script.  It is clearly a bug.\n\nAxiom admit : forall {T}, T.\nClass IsHProp (A : Type) : Type := {}.\nClass IsHSet (A : Type) : Type := {}.\nRecord hProp := hp { hproptype :> Type ; isp : IsHProp hproptype}.\nRecord hSet := BuildhSet {setT:> Type; iss :> IsHSet setT}.\nCanonical Structure default_HSet:= fun T P => (@ BuildhSet T P).\nGlobal Instance isset_hProp : IsHSet hProp | 0.\n  \nCheck (eq_refl _ : setT (default_HSet _ _) = hProp).\nCheck (eq_refl _ : setT _ = hProp).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337519386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337519387","html_url":"https://github.com/coq/coq/issues/3324#issuecomment-337519387","issue_url":"https://api.github.com/repos/coq/coq/issues/3324","id":337519387,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxOTM4Nw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-10T21:29:37Z","updated_at":"2017-10-18T09:17:52Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThis bug has been fixed; I'll submit a file for the test-suite soon.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337519387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]