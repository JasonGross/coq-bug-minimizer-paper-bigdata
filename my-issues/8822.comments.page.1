[{"url":"https://api.github.com/repos/coq/coq/issues/comments/433265161","html_url":"https://github.com/coq/coq/issues/8822#issuecomment-433265161","issue_url":"https://api.github.com/repos/coq/coq/issues/8822","id":433265161,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzI2NTE2MQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T02:24:20Z","updated_at":"2018-10-26T02:24:20Z","author_association":"MEMBER","body":"Note that only about half the time of `setoid_rewrite` is spent looking for `Proper` lemmas; if I do\r\n```coq\r\n  pose proof (fun A B f => @app_Let_In_nd A (list B) _ (cons f)) as H; cbv beta in H.\r\n  pose proof (_ : forall x, Proper (pointwise_relation nat eq ==> _) (@Let_In nat (fun _ : nat => list nat) x)).\r\n  pose proof (_ : forall A, Proper (eq ==> _ ==> Basics.flip Basics.impl) (@eq A)).\r\n  pose proof (_ : forall A v, ProperProxy (@eq A) v).\r\n  pose proof (_ : forall A n, Proper (eq ==> _) (@cons A n)).\r\n```\r\nbefore `repeat setoid_rewrite`, that brings the time down to 5.482 secs (5.476u,0.008s) (and having just the last `Proper` lemma for `cons`, without the earlier ones, already cuts the time to 6.42 secs (6.408u,0.011s)).","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/433265161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/433398327","html_url":"https://github.com/coq/coq/issues/8822#issuecomment-433398327","issue_url":"https://api.github.com/repos/coq/coq/issues/8822","id":433398327,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzM5ODMyNw==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-10-26T12:57:08Z","updated_at":"2018-10-26T12:57:08Z","author_association":"MEMBER","body":"This looks like some algorithmic issue in the creation of evar instances. I have a patch that makes the topdown and setoid_rewrite on par, and divides by two the bottomup one.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/433398327/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/434681556","html_url":"https://github.com/coq/coq/issues/8822#issuecomment-434681556","issue_url":"https://api.github.com/repos/coq/coq/issues/8822","id":434681556,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDY4MTU1Ng==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-10-31T13:13:56Z","updated_at":"2018-10-31T13:13:56Z","author_association":"MEMBER","body":"@JasonGross merging #8841 has solved part of the problem. Should we leave this bug open or reopen one?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/434681556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/434767934","html_url":"https://github.com/coq/coq/issues/8822#issuecomment-434767934","issue_url":"https://api.github.com/repos/coq/coq/issues/8822","id":434767934,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDc2NzkzNA==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2018-10-31T17:03:09Z","updated_at":"2018-10-31T17:03:09Z","author_association":"MEMBER","body":"I think we should have some bug open.  Feel free to either open a new one or leave this one open.  (It would also be nice to figure out why setoid_rewrite is so slow so maybe this bug should be renamed to be about setoid_rewrite and rewrite_strat being slow?)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/434767934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/434772740","html_url":"https://github.com/coq/coq/issues/8822#issuecomment-434772740","issue_url":"https://api.github.com/repos/coq/coq/issues/8822","id":434772740,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDc3Mjc0MA==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-10-31T17:16:22Z","updated_at":"2018-10-31T17:16:22Z","author_association":"MEMBER","body":"> It would also be nice to figure out why setoid_rewrite is so slow\r\n\r\nEvar creation is definitely responsible for an important (most?) part of the slowness of the rewriting algorithm. Generating a named context from a rel context is often superlinear in the size of this context, and we keep generating evars all over the place while pushing rels in rewrite, so...","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/434772740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/434778844","html_url":"https://github.com/coq/coq/issues/8822#issuecomment-434778844","issue_url":"https://api.github.com/repos/coq/coq/issues/8822","id":434778844,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNDc3ODg0NA==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2018-10-31T17:33:11Z","updated_at":"2018-10-31T17:33:11Z","author_association":"MEMBER","body":"It seems like evars are persistently one of the slowest parts of Coq?  EConstr was good for removing useless normalization.  Is there a similar systematic fix that can be done around this sort of problem?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/434778844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]