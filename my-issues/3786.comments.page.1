[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526985","html_url":"https://github.com/coq/coq/issues/3786#issuecomment-337526985","issue_url":"https://api.github.com/repos/coq/coq/issues/3786","id":337526985,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyNjk4NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-10-30T06:00:14Z","updated_at":"2017-10-18T09:39:52Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\n(* File reduced by coq-bug-finder from original input, then from 9432 lines to 1348 lines, then from 1208 lines to 805 lines, then from 784 lines to 404 lines, then from 403 lines to 213 lines, then from 226 lines to 59 lines, then from 62 lines to 36 lines *)\n(* coqc version 8.4pl4 (August 2014) compiled on Aug 19 2014 14:07:28 with OCaml 4.01.0\n   coqtop version 8.4pl4 (August 2014) *)\nRequire Coq.Lists.List.\nRequire Coq.Sets.Ensembles.\nImport Coq.Sets.Ensembles.\nGlobal Set Implicit Arguments.\nDelimit Scope comp_scope with comp.\nInductive Comp : Type -> Type :=\n| Return : forall A, A -> Comp A\n| Bind : forall A B, Comp A -> (A -> Comp B) -> Comp B\n| Pick : forall A, Ensemble A -> Comp A.\nNotation ret := Return.\nNotation \"x <- y ; z\" := (Bind y%comp (fun x => z%comp))\n                           (at level 81, right associativity,\n                            format \"'[v' x  <-  y ; '/' z ']'\") : comp_scope.\nAxiom refine : forall {A} (old : Comp A) (new : Comp A), Prop.\nOpen Scope comp.\nAxiom elements : forall {A} (ls : list A), Ensemble A.\nAxiom to_list : forall {A} (S : Ensemble A), Comp (list A).\nAxiom finite_set_handle_cardinal : refine (ret 0) (ret 0).\nDefinition sumUniqueSpec (ls : list nat) : Comp nat.\n  exact (ls' <- to_list (elements ls);\n         List.fold_right (fun a b' => Bind b' ((fun a b => ret (a + b)) a)) (ret 0) ls').\nDefined.\nAxiom admit : forall {T}, T.\nDefinition sumUniqueImpl (ls : list nat)\n: { c : _ | refine (sumUniqueSpec ls) (ret c) }%type.\nProof.\n  eexists.\n  match goal with\n    | [ |- refine ?a ?b ] => let a' := eval hnf in a in refine (_ : refine a' b)\n  end;\n  try setoid_rewrite (@ finite_set_handle_cardinal).\n  Undo.\n  match goal with\n    | [ |- refine ?a ?b ] => let a' := eval hnf in a in change (refine a' b)\n  end.\n  try setoid_rewrite (@ finite_set_handle_cardinal). (* Anomaly: Uncaught exception Invalid_argument(\"decomp_pointwise\").\nPlease report. *)\n  instantiate (1 := admit).\n  admit.\nDefined.\n\n\nSeems to be fixed in trunk (possibly by whatever commit revamped [change] to not lose evars or something?), so perhaps it's only worth putting in the test suite?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]