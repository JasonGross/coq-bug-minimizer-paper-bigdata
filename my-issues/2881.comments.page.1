[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512018","html_url":"https://github.com/coq/coq/issues/2881#issuecomment-337512018","issue_url":"https://api.github.com/repos/coq/coq/issues/2881","id":337512018,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMjAxOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2012-08-21T17:20:54Z","updated_at":"2017-10-24T17:39:19Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n\r\nThe code\r\n```coq\r\n  Goal forall T1 T2 (f : T1 -> T2), (fun x => f x) = f.\r\n    intros.\r\n    change (fun a => ?f0 a) with f0.\r\n```\r\nworks as expected, but the code\r\n```coq\r\n  Goal forall T1 T2 (f : T1 -> T2), (fun x => f x) = f.\r\n    intros.\r\n    Ltac eta_red :=\r\n      change (fun a => ?f0 a) with f0.\r\n```\r\nfails with\r\n```\r\n  Error: The reference f0 was not found in the current environment.\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512020","html_url":"https://github.com/coq/coq/issues/2881#issuecomment-337512020","issue_url":"https://api.github.com/repos/coq/coq/issues/2881","id":337512020,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMjAyMA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2012-08-22T09:39:54Z","updated_at":"2017-10-18T08:56:43Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nI'm afraid the implementation of [change] is somewhat hackish. It's not entirely surprising it goes bonkers occasionally. It's even documented in the code that [change] is incorrectâ€¦ It's a poor answer, but you shouldn't count on this one being solved quickly.\n\nNonetheless, thanks for the excellent test-case.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512021","html_url":"https://github.com/coq/coq/issues/2881#issuecomment-337512021","issue_url":"https://api.github.com/repos/coq/coq/issues/2881","id":337512021,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMjAyMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-08-01T16:06:25Z","updated_at":"2017-10-18T08:56:43Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nI think this is much more trivial, and related to the way Ltac definitions are interpreted: patterns in change do not provide new binders in the right hand side, hence the unboundedness of f0.\n\nWhy it works when writing it directly is a mistery, but I suspect that evaluation takes place at another time, which precludes the raising of the exception.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512022","html_url":"https://github.com/coq/coq/issues/2881#issuecomment-337512022","issue_url":"https://api.github.com/repos/coq/coq/issues/2881","id":337512022,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMjAyMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-08-01T16:31:45Z","updated_at":"2017-10-18T08:56:43Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nIndeed. The direct definition uses [Constrintern.for_grammar], which sets an [interning_grammar] flag in Constrintern allowing the unboundedness of variables at interning time. See [Constrintern.intern_applied_reference] for more details.\n\nWe can fix this by adding the variables of the change pattern into the interning environment, but I do not know if this is the expected behaviour. (For reminder: yet another intro-like half-static half-dynamic binder)...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512023","html_url":"https://github.com/coq/coq/issues/2881#issuecomment-337512023","issue_url":"https://api.github.com/repos/coq/coq/issues/2881","id":337512023,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMjAyMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-14T13:51:47Z","updated_at":"2017-10-18T08:56:43Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nI think it is the intended behavior, change takes a pattern that should match a subterm, and that subterm should be convertible with the substituted right hand side.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337512023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/339072243","html_url":"https://github.com/coq/coq/issues/2881#issuecomment-339072243","issue_url":"https://api.github.com/repos/coq/coq/issues/2881","id":339072243,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTA3MjI0Mw==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2017-10-24T17:39:58Z","updated_at":"2017-10-24T17:39:58Z","author_association":"MEMBER","body":"@ppedrot https://github.com/coq/coq/issues/2881#issuecomment-337512022 suggests this has a simple fix.  Is this accurate?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/339072243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/341666104","html_url":"https://github.com/coq/coq/issues/2881#issuecomment-341666104","issue_url":"https://api.github.com/repos/coq/coq/issues/2881","id":341666104,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MTY2NjEwNA==","user":{"login":"Zimmi48","id":1108325,"node_id":"MDQ6VXNlcjExMDgzMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1108325?v=4","gravatar_id":"","url":"https://api.github.com/users/Zimmi48","html_url":"https://github.com/Zimmi48","followers_url":"https://api.github.com/users/Zimmi48/followers","following_url":"https://api.github.com/users/Zimmi48/following{/other_user}","gists_url":"https://api.github.com/users/Zimmi48/gists{/gist_id}","starred_url":"https://api.github.com/users/Zimmi48/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zimmi48/subscriptions","organizations_url":"https://api.github.com/users/Zimmi48/orgs","repos_url":"https://api.github.com/users/Zimmi48/repos","events_url":"https://api.github.com/users/Zimmi48/events{/privacy}","received_events_url":"https://api.github.com/users/Zimmi48/received_events","type":"User","site_admin":false},"created_at":"2017-11-03T10:23:59Z","updated_at":"2017-11-03T10:23:59Z","author_association":"MEMBER","body":"Fixed by the merge of #6021.\r\nBTW @herbelin please use \"Fix\" or \"Fixes\" or \"Closes\" in your commit messages instead of \"Fixing\". GitHub isn't smart enough to understand that these are synonymous and doesn't close issues automatically with the latter.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/341666104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]