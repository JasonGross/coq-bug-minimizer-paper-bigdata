[{"url":"https://api.github.com/repos/coq/coq/issues/comments/487195448","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487195448","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487195448,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzE5NTQ0OA==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-26T20:44:07Z","updated_at":"2019-04-26T20:44:07Z","author_association":"MEMBER","body":"Interestingly, wrapping the problem in `ltac:(exact (...))` gives us back a factor of 30x:\r\n```coq\r\n...\r\ntime pose (fun a : unit => let x := _ in eq_refl : x = P) as H'; clear H';\r\ntime pose (fun a : unit => let x := _ in ltac:(exact (eq_refl : x = P))) as H'; clear H'.\r\n(* Tactic call ran for 0.323 secs (0.28u,0.s) (success)\r\nTactic call ran for 0.012 secs (0.008u,0.s) (success) *)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487195448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487696145","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487696145","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487696145,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzY5NjE0NQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T18:41:43Z","updated_at":"2019-04-29T18:41:43Z","author_association":"MEMBER","body":"Note that the output of `pose (fun a : unit => let x := _ in eq_refl : x = P) as H'; clear H'` under `Set Debug RAKAM` is 16097 lines ([slow_set_debug_rakam.log](https://github.com/coq/coq/files/3128739/slow_set_debug_rakam.log)), whereas the output of `pose (fun a : unit => let x := _ in ltac:(exact (eq_refl : x = P))) as H'; clear H'` under `Set Debug RAKAM` is 135 lines ([fast_set_debug_rakam.log](https://github.com/coq/coq/files/3128737/fast_set_debug_rakam.log)).\r\n\r\nI don't know how to debug this, though.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487696145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487702913","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487702913","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487702913,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcwMjkxMw==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:01:23Z","updated_at":"2019-04-29T19:01:23Z","author_association":"MEMBER","body":"Here is a simpler example:\r\n```coq\r\nFixpoint fact (n : nat) :=\r\n  match n with\r\n  | O => 1\r\n  | S n' => fact n' * S n'\r\n  end.\r\n\r\nDefinition slow_true := Nat.eqb (fact 9) (fact 9).\r\n\r\nDefinition a (T : Type) (x : T) := True.\r\n\r\nGoal True.\r\n  let c := constr:(a (true = slow_true) (eq_refl true <: true = slow_true)) in\r\n  pose c as C.\r\n  let C := (eval cbv [C] in C) in\r\n  time pose (eq_refl : _ = C);\r\n    time pose (fun x : unit => eq_refl : _ = C).\r\n  (* Tactic call ran for 0. secs (0.u,0.s) (success)\r\nTactic call ran for 3.354 secs (2.876u,0.s) (success) *)\r\n```","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487702913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487704038","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487704038","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487704038,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcwNDAzOA==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:04:27Z","updated_at":"2019-04-29T19:04:27Z","author_association":"MEMBER","body":"Note that `pose (fun x : unit => ltac:(exact (eq_refl : _ = C))).` is fast.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487704038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487705979","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487705979","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487705979,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcwNTk3OQ==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:10:19Z","updated_at":"2019-04-29T19:10:19Z","author_association":"CONTRIBUTOR","body":"Thanks for the simpler example (by chance I was just looking at this right now). It is definitively unification: if I use Unicoq (and Ssreflect's pose), it works fast in the two cases. I will now try to elucidate what heuristic is causing harm here and why.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487705979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487706467","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487706467","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487706467,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcwNjQ2Nw==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:11:58Z","updated_at":"2019-04-29T19:11:58Z","author_association":"CONTRIBUTOR","body":"(update: no need for Ssreflect. apparently Coq's pose calls the right unification algorithm)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487706467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487710808","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487710808","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487710808,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxMDgwOA==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:25:49Z","updated_at":"2019-04-29T19:25:49Z","author_association":"MEMBER","body":"[Flame graph](https://gist.github.com/JasonGross/bbf6515b7162ccb315ef9b5aaaf657dc)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487710808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487712650","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487712650","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487712650,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxMjY1MA==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:31:18Z","updated_at":"2019-04-29T19:31:47Z","author_association":"CONTRIBUTOR","body":"With\r\n```\r\nSet Debug Unification.\r\nSet Printing All.\r\nSet Printing Existential Instances.\r\n```\r\n\r\nI get (note that I reversed the order of the two calls):\r\n```\r\n time pose (E := (fun x : unit => eq_refl : _ = C));   time pose (D := (eq_refl : _ = C)).\r\n@eq|ZApp(?A@{C:=C; x:=x}, ?x0@{C:=C; x:=x}, ?x0@{C:=C; x:=x})\r\n@eq|ZApp(Prop, ?x@{C:=C; x:=x},\r\n         a (@eq bool true slow_true) (@eq_refl bool true))\r\n\r\n<infomsg>Tactic call ran for 0.963 secs (0.963u,0.s) (success)</infomsg>\r\n\r\n@eq|ZApp(?A@{C:=C; E:=E}, ?x0@{C:=C; E:=E}, ?x0@{C:=C; E:=E})\r\n@eq|ZApp(Prop, ?x@{C:=C; E:=E},\r\n         a (@eq bool true slow_true) (@eq_refl bool true))\r\n\r\n<infomsg>Tactic call ran for 0. secs (0.u,0.s) (success)</infomsg>\r\n```\r\n\r\nThat is, there is a `x:=x` as argument of the meta-variable, at least that's the only observable difference.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487712650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487713355","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487713355","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487713355,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxMzM1NQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:33:26Z","updated_at":"2019-04-29T19:33:26Z","author_association":"MEMBER","body":"Interestingly, it seems that some of this is order-sensitive:\r\n```coq\r\nFixpoint fact (n : nat) :=\r\n  match n with\r\n  | O => 1\r\n  | S n' => fact n' * S n'\r\n  end.\r\n\r\nDefinition slow_true := Nat.eqb (fact 9) (fact 9).\r\n\r\nDefinition a (T : Type) (x : T) := True.\r\n\r\nGoal True.\r\n  let c := constr:(a (true = slow_true) (eq_refl true <: true = slow_true)) in\r\n  pose c as C.\r\n  cbv beta in C.\r\n  let C := (eval cbv [C] in C) in\r\n  time pose (fun x : unit => let x := _ in eq_refl x : x = C);\r\n    time pose (fun x : unit => let x := _ in eq_refl x : C = x);\r\n    time pose (fun x : unit => let x := _ in eq_refl C : x = C);\r\n    time pose (fun x : unit => let x := _ in eq_refl C : C = x).\r\n  (* Tactic call ran for 0. secs (0.003u,0.s) (success)\r\nTactic call ran for 0. secs (0.u,0.s) (success)\r\nTactic call ran for 2.937 secs (2.712u,0.072s) (success)\r\nTactic call ran for 3.164 secs (2.835u,0.083s) (success) *)\r\nAbort.\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487713355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487714755","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487714755","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487714755,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxNDc1NQ==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:37:43Z","updated_at":"2019-04-29T19:37:43Z","author_association":"CONTRIBUTOR","body":"And interestingly the two versions with binders (with and without `ltac:(exact ...)` has the exact same output, but clearly different behaviors.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487714755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487714875","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487714875","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487714875,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxNDg3NQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:38:08Z","updated_at":"2019-04-29T19:38:08Z","author_association":"MEMBER","body":"@beta-ziliani Does Unicoq do refolding?  The only function that checks the RAKAM flag is `whd_state_gen`, and the slow examples spend most of their time in `CClosure.whd_stack`.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487714875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487715201","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487715201","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487715201,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxNTIwMQ==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:39:06Z","updated_at":"2019-04-29T19:39:06Z","author_association":"CONTRIBUTOR","body":"it doesn't","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487715201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487716161","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487716161","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487716161,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxNjE2MQ==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:42:14Z","updated_at":"2019-04-29T19:42:14Z","author_association":"CONTRIBUTOR","body":"but why would it be do refolding?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487716161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487716899","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487716899","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487716899,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxNjg5OQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:44:36Z","updated_at":"2019-04-29T19:44:36Z","author_association":"MEMBER","body":"Possibly a red herring.  The documentation for `Debug RAKAM` says \"This option makes `cbn` print various debugging information. `RAKAM` is the Refolding Algebraic Krivine Abstract Machine.\"  The output under `Set Debug RAKAM` is 100x longer on the slow examples than on the fast examples, so I'm assuming that the slowness comes from some invocation of the RAKAM.  I don't know much about it, though, and I was a bit confused why it would be invoked at all in this problem.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487716899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487717891","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487717891","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487717891,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxNzg5MQ==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:47:57Z","updated_at":"2019-04-29T19:47:57Z","author_association":"CONTRIBUTOR","body":"I guess I can only say here \"good luck!\"... or \"use Unicoq\" :-D\r\nMore seriously, I started Unicoq because I couldn't wrap my head around Coq's unification algorithm, and here we see a nice example of why.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487717891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487718175","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487718175","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487718175,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxODE3NQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:48:46Z","updated_at":"2019-04-29T19:48:46Z","author_association":"MEMBER","body":"Interestingly, if I replace\r\n```coq\r\nDefinition a (T : Type) (x : T) := True.\r\n```\r\nwith\r\n```coq\r\nAxiom a : forall (T : Type) (x : T), Prop.\r\n```\r\nthen all four examples in https://github.com/coq/coq/issues/10005#issuecomment-487713355 (the ones with `let`s under binders) become slow....","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487718175/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487718283","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487718283","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487718283,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxODI4Mw==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:49:08Z","updated_at":"2019-04-29T19:49:08Z","author_association":"MEMBER","body":"> I guess I can only say here \"good luck!\"... or \"use Unicoq\" :-D\r\n\r\nIs there a `Set Constr Checking With Unicoq` flag yet?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487718283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487719539","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487719539","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487719539,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcxOTUzOQ==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:53:12Z","updated_at":"2019-04-29T19:53:12Z","author_association":"CONTRIBUTOR","body":"What would that be?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487719539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487720345","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487720345","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487720345,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcyMDM0NQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:55:40Z","updated_at":"2019-04-29T19:55:40Z","author_association":"MEMBER","body":"It would be the flag that makes `Check` and `constr` and `open_constr` and `Definition`, etc, use Unicoq rather than Coq's unification.  (Note that there's nothing special about `pose` in any of these examples; the same thing shows up with `constr:(...)`.)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487720345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487720478","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487720478","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487720478,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcyMDQ3OA==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:56:04Z","updated_at":"2019-04-29T19:56:04Z","author_association":"CONTRIBUTOR","body":"`Set Use Unicoq`","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487720478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487720747","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487720747","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487720747,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcyMDc0Nw==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:56:50Z","updated_at":"2019-04-29T19:56:50Z","author_association":"CONTRIBUTOR","body":"It repalces evarconv by Unicoq (in tactics, definitions, etc)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487720747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487720769","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487720769","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487720769,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcyMDc2OQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:56:53Z","updated_at":"2019-04-29T19:56:53Z","author_association":"MEMBER","body":"`Warning: There is no option Use Unicoq.`\r\n\r\n(Do I need a package, or a certain version of Coq?)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487720769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487721027","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487721027","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487721027,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcyMTAyNw==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T19:57:45Z","updated_at":"2019-04-29T19:57:45Z","author_association":"MEMBER","body":"On the topic of the actual issue here, @herbelin, do you have any insight about what's going on?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487721027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487727491","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487727491","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487727491,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzcyNzQ5MQ==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T20:17:20Z","updated_at":"2019-04-29T20:17:20Z","author_association":"MEMBER","body":"The slowdown is ultimately due to a closed conversion problem\r\n```\r\n(eq bool CSTR.bool._0._1 CSTR.bool._0._1) ≡ (eq bool CSTR.bool._0._1 slow_true)\r\n```\r\nthat is sent to the kernel by the unification algorithm. So, in particular, this has nothing to do with refolding. Now why unification produces such a problem is another question.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487727491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487730834","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487730834","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487730834,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzczMDgzNA==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T20:26:50Z","updated_at":"2019-04-29T20:26:50Z","author_association":"MEMBER","body":"I may be wrong, but I am under the impression that the source of the difference between the two is that in the first case, the VM cast is present in the term, which makes the kernel use the VM (fast), while in the second, the cast disappears due to some reduction performed by the unification, and the kernel uses the lazy conversion (slow).","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487730834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487732053","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487732053","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487732053,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzczMjA1Mw==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T20:30:36Z","updated_at":"2019-04-29T20:30:36Z","author_association":"MEMBER","body":"@ppedrot In https://github.com/coq/coq/issues/10005#issuecomment-487713355 (the example with the `let`s), the vm_cast is stripped via `cbv beta` before any of the terms are typechecked, and so there is no cast in any case.  But I believe in all the examples, the `eval cbv [C] in C` removes the vm_cast.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487732053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/487739081","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-487739081","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":487739081,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4NzczOTA4MQ==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-04-29T20:50:47Z","updated_at":"2019-04-29T20:50:47Z","author_association":"CONTRIBUTOR","body":"BTW, Unicoq also calls conversion when there are no evars. For a second I thought that the order might matter, but all of the examples above work smoothly.\r\n\r\n@JasonGross , you need to install Unicoq (opam install coq-unicoq).\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/487739081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/489094801","html_url":"https://github.com/coq/coq/issues/10005#issuecomment-489094801","issue_url":"https://api.github.com/repos/coq/coq/issues/10005","id":489094801,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4OTA5NDgwMQ==","user":{"login":"beta-ziliani","id":5183634,"node_id":"MDQ6VXNlcjUxODM2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5183634?v=4","gravatar_id":"","url":"https://api.github.com/users/beta-ziliani","html_url":"https://github.com/beta-ziliani","followers_url":"https://api.github.com/users/beta-ziliani/followers","following_url":"https://api.github.com/users/beta-ziliani/following{/other_user}","gists_url":"https://api.github.com/users/beta-ziliani/gists{/gist_id}","starred_url":"https://api.github.com/users/beta-ziliani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beta-ziliani/subscriptions","organizations_url":"https://api.github.com/users/beta-ziliani/orgs","repos_url":"https://api.github.com/users/beta-ziliani/repos","events_url":"https://api.github.com/users/beta-ziliani/events{/privacy}","received_events_url":"https://api.github.com/users/beta-ziliani/received_events","type":"User","site_admin":false},"created_at":"2019-05-03T13:27:30Z","updated_at":"2019-05-03T13:27:56Z","author_association":"CONTRIBUTOR","body":"One more thing: according to the trace, the problem comes from the function that takes the \"inversion\" substitution (`invert_definition`). For instance, in its simpler form, this function takes an evar like `?X[x:=y]` and a term, say `S y`, and returns the term `S x`, which is valid in `?X`'s context. In evarconv, this function does way too much stuff.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/489094801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]