[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517253","html_url":"https://github.com/coq/coq/issues/3203#issuecomment-337517253","issue_url":"https://api.github.com/repos/coq/coq/issues/3203","id":337517253,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNzI1Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-01-02T20:08:35Z","updated_at":"2017-10-18T09:11:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\njgross@ cagnode17:/tmp$ cat mk-uu.sh\n#!/bin/bash\ncoqc --version\ncoqc -where\nCONTRIB=\"$(coqc -where)/user-contrib\"\necho \"$CONTRIB\"\nrm -rf user-contrib\nmkdir user-contrib\ncd user-contrib\nmkdir -p tmp1/tmp2 tmp3\nrm -rf \"$CONTRIB/tmp1\"\nmkdir -p \"$CONTRIB/tmp1/tmp2\"\necho 'Definition UU := Type.' > tmp1/tmp2/uuutest.v\necho 'Require Export \"uuutest\".' > tmp1/tmp2/uu0test.v\necho 'Require Export \"uu0test\".' > tmp3/pathtest.v\necho 'Require Export \"uuutest\".' > tmp3/pathtest2.v\necho 'Require Export \"uu0test\".' >> tmp3/pathtest2.v\nPS4='$ '\nset -x\n#coqc -R tmp1 tmp1 tmp1/tmp2/uuutest\n#coqc -R tmp1 tmp1 tmp1/tmp2/uu0test\ncd tmp1/tmp2\ncoqc uuutest\ncoqc uu0test\nmv uuutest.vo uu0test.vo \"$CONTRIB/tmp1/tmp2/\"\nrm *\ncd ../../tmp3\ncat pathtest.v\ncoqc pathtest\ncat pathtest2.v\ncoqc pathtest2\njgross@ cagnode17:/tmp$ ./mk-uu.sh\njgross@ cagnode17:/tmp$ ./mk-uu.sh\nThe Coq Proof Assistant, version trunk (December 2013)\ncompiled on Dec 28 2013 12:22:55 with OCaml 4.01.0\n/afs/csail.mit.edu/u/j/jgross/.local64/coq/coq-polyproj/lib/coq\n/afs/csail.mit.edu/u/j/jgross/.local64/coq/coq-polyproj/lib/coq/user-contrib\n$ cd tmp1/tmp2\n$ coqc uuutest\n$ coqc uu0test\n$ mv uuutest.vo uu0test.vo /afs/csail.mit.edu/u/j/jgross/.local64/coq/coq-polyproj/lib/coq/user-contrib/tmp1/tmp2/\n$ rm uu0test.glob uu0test.v uuutest.glob uuutest.v\n$ cd ../../tmp3\n$ cat pathtest.v\nRequire Export \"uu0test\".\n$ coqc pathtest\nFile \"./pathtest.v\", line 1, characters 0-25:\nError: Cannot find library uuutest in loadpath\n$ cat pathtest2.v\nRequire Export \"uuutest\".\nRequire Export \"uu0test\".\n$ coqc pathtest2\n\nNote that coq fails to find uuutest when it's imported transitively, but succeeds when it's imported directly.\n\nThis was reported on coq-club by Vladimir Voevodsky.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517257","html_url":"https://github.com/coq/coq/issues/3203#issuecomment-337517257","issue_url":"https://api.github.com/repos/coq/coq/issues/3203","id":337517257,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNzI1Nw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-01-02T20:59:11Z","updated_at":"2017-10-18T09:11:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nMy take on this bug is that all the \"Require\" should have failed (rather than succeeded), since the loaded files do not have the correct qualified names. They contain modules \"uuutest\" and \"uu0test\" while they are located as if they were called \"tmp1.tmp2.uuutest\" and \"tmp1.tmp2.uu0test\". Coq should have complained loudly about this mismatch, as it already does when using option \"-R\". Not sure yet why it went through silently.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517259","html_url":"https://github.com/coq/coq/issues/3203#issuecomment-337517259","issue_url":"https://api.github.com/repos/coq/coq/issues/3203","id":337517259,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNzI1OQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-01-02T21:10:59Z","updated_at":"2017-10-18T09:11:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nWhen you require with quotes, does it simply look for the .vo file (and not check the name of the library)?  But perhaps the [Require \"foo\".] gets written to a .vo file as a [Require foo.], so if it's not already loaded, Coq uses the other code and fails to find foo.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517260","html_url":"https://github.com/coq/coq/issues/3203#issuecomment-337517260","issue_url":"https://api.github.com/repos/coq/coq/issues/3203","id":337517260,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNzI2MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-01-02T21:48:51Z","updated_at":"2017-10-18T09:12:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nThanks for the hint. You got it (almost) right. When you do 'Require \"foo\"', Coq searches for file \"foo.vo\". Then it outputs to the resulting .vo file, not 'Require foo', but 'Require bar' (with bar the name of the module contained in \"foo.vo\"). Moreover, Coq does not check that the location of the file matches the logical path of its library.\n\nMy opinion is now that the bug is not worth fixing (i.e. outputting to .vo file the equivalent of the vernacular requiring a quoted filename). Instead, the quoted form should be frowned upon and users discouraged to use it, as it is a can of worms.\n\nFor the record, the corresponding functions are in library/library.ml:\n- rec_intern_by_filename_only and require_library_from_file for quoted filenames,\n- intern_library and require_library_from_dirpath for regular libraries.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517261","html_url":"https://github.com/coq/coq/issues/3203#issuecomment-337517261","issue_url":"https://api.github.com/repos/coq/coq/issues/3203","id":337517261,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNzI2MQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-01-02T22:11:54Z","updated_at":"2017-10-18T09:12:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nAnd now that I understand what happens, I might just as well write a simpler script for reproducing the issue:\n\n#!/bin/sh\nmkdir -p dir\ntouch dir/a.v ; coqc dir/a.v\necho 'Require \"a\".' > dir/b.v ; coqc -R dir Dir dir/b.v\necho 'Require b.' > dir/c.v ; coqc -R dir Dir dir/c.v\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517263","html_url":"https://github.com/coq/coq/issues/3203#issuecomment-337517263","issue_url":"https://api.github.com/repos/coq/coq/issues/3203","id":337517263,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNzI2Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-02-25T12:57:53Z","updated_at":"2017-10-18T09:12:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nRequire with quote has been forbidden in Coq. I thus consider this bug to be fixed.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337517263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]