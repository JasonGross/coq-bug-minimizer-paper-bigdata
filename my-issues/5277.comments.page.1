[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337550206","html_url":"https://github.com/coq/coq/issues/5277#issuecomment-337550206","issue_url":"https://api.github.com/repos/coq/coq/issues/5277","id":337550206,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU1MDIwNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-12-21T21:56:02Z","updated_at":"2017-10-18T10:50:45Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nModule A1.\n  Inductive A (T : Type) := C (a : T).\n  Scheme Equality for A. (* success *)\nEnd A1.\n\nModule A2.\n  Inductive A (x : Type) := C (a : x).\n  Scheme Equality for A. (* Error:\nUnexpected error during scheme creation: Anomaly:\n                                         Uncaught exception \nPretype_errors.PretypeError(_, _, _).\n                                         Please report at \nhttp://coq.inria.fr/bugs/. *)\nEnd A2.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337550206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337550210","html_url":"https://github.com/coq/coq/issues/5277#issuecomment-337550210","issue_url":"https://api.github.com/repos/coq/coq/issues/5277","id":337550210,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU1MDIxMA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-12-21T21:58:19Z","updated_at":"2017-10-18T10:50:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nWow! How is that even possible?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337550210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337550213","html_url":"https://github.com/coq/coq/issues/5277#issuecomment-337550213","issue_url":"https://api.github.com/repos/coq/coq/issues/5277","id":337550213,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU1MDIxMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-12-21T22:32:54Z","updated_at":"2017-10-18T10:50:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nI bet it's one of these lines:\nhttps://github.com/coq/coq/blob/93a03345830047310d975d5de3742fa58a0a224b/toplevel/auto_ind_decl.ml#L521 or https://github.com/coq/coq/blob/93a03345830047310d975d5de3742fa58a0a224b/toplevel/auto_ind_decl.ml#L544\n\n> let compute_bl_goal ind lnamesparrec nparrec =\n>   let eqI, eff = eqI ind lnamesparrec in\n>   let list_id = list_id lnamesparrec in\n>   let create_input c =\n>     let x = Id.of_string \"x\" and\n>         y = Id.of_string \"y\" in\n>       let bl_typ = List.map (fun (s,seq,_,_) ->\n>         mkNamedProd x (mkVar s) (\n>             mkNamedProd y (mkVar s) (\n>               mkArrow\n>                ( mkApp(Lazy.force eq,[|(Lazy.force bb);mkApp(mkVar seq,[|mkVar x;mkVar y|]);(Lazy.force tt)|]))\n>                ( mkApp(Lazy.force eq,[|mkVar s;mkVar x;mkVar y|]))\n>           ))\n>         ) list_id in\n>       let bl_input = List.fold_left2 ( fun a (s,_,sbl,_) b ->\n>         mkNamedProd sbl b a\n>       ) c (List.rev list_id) (List.rev bl_typ) in\n>       let eqs_typ = List.map (fun (s,_,_,_) ->\n>           mkProd(Anonymous,mkVar s,mkProd(Anonymous,mkVar s,(Lazy.force bb)))\n>           ) list_id in\n>       let eq_input = List.fold_left2 ( fun a (s,seq,_,_) b ->\n>         mkNamedProd seq b a\n>       ) bl_input (List.rev list_id) (List.rev eqs_typ) in\n>       List.fold_left (fun a decl -> mkNamedProd\n>                 (match RelDecl.get_name decl with Name s -> s | Anonymous ->  Id.of_string \"A\")\n>                 (RelDecl.get_type decl) a) eq_input lnamesparrec\n>     in\n>       let n = Id.of_string \"x\" and\n>           m = Id.of_string \"y\" in\n>       let u = Univ.Instance.empty in\n>      create_input (\n>         mkNamedProd n (mkFullInd (ind,u) nparrec) (\n>           mkNamedProd m (mkFullInd (ind,u) (nparrec+1)) (\n>             mkArrow\n>               (mkApp(Lazy.force eq,[|(Lazy.force bb);mkApp(eqI,[|mkVar n;mkVar m|]);(Lazy.force tt)|]))\n>               (mkApp(Lazy.force eq,[|mkFullInd (ind,u) (nparrec+3);mkVar n;mkVar m|]))\n>         ))), eff\n\nNote that the following also fails:\n\nInductive A (y : Type) := C (a : y).\n\n\nThere's probably some way to break it with the string \"A\", but I haven't found it.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337550213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337550216","html_url":"https://github.com/coq/coq/issues/5277#issuecomment-337550216","issue_url":"https://api.github.com/repos/coq/coq/issues/5277","id":337550216,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU1MDIxNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-12-22T21:36:21Z","updated_at":"2017-10-18T10:50:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\n\nThanks Jason for the hint. I cannot not fix it (trunk 50c7e47da5).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337550216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]