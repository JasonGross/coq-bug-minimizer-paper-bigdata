[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520899","html_url":"https://github.com/coq/coq/issues/3422#issuecomment-337520899","issue_url":"https://api.github.com/repos/coq/coq/issues/3422","id":337520899,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDg5OQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-07-15T10:06:10Z","updated_at":"2017-10-18T09:22:21Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nIt doesn't seem to be a universe inconsistency nor a difference in implicit arguments, and, unlike https://coq.inria.fr/bugs/show_bug.cgi?id=3393, is still open in trunk.\n\n(* File reduced by coq-bug-finder from original input, then from 8731 lines to 7930 lines, then from 7305 lines to 766 lines, then from 642 lines to 352 lines, then from 294 lines to 234 lines, then from 245 lines to 218 lines *)\nGeneralizable All Variables.\nSet Implicit Arguments.\nSet Universe Polymorphism.\nAxiom admit : forall {T}, T.\nReserved Infix \"o\" (at level 40, left associativity).\nClass IsEquiv {A B : Type} (f : A -> B) := { equiv_inv : B -> A }.\nRecord Equiv A B := { equiv_fun :> A -> B ; equiv_isequiv :> IsEquiv equiv_fun }.\nExisting Instance equiv_isequiv.\nDelimit Scope equiv_scope with equiv.\nLocal Open Scope equiv_scope.\nNotation \"A <~> B\" := (Equiv A B) (at level 85) : equiv_scope.\nNotation \"f ^-1\" := (@ equiv_inv _ _ f _) (at level 3) : equiv_scope.\nAxiom IsHSet : Type -> Type.\nExisting Class IsHSet.\nDefinition trunc_equiv' `(f : A <~> B) `{IsHSet A} : IsHSet B := admit.\nDelimit Scope morphism_scope with morphism.\nDelimit Scope category_scope with category.\nDelimit Scope object_scope with object.\nRecord PreCategory :=\n  { object :> Type;\n    morphism : object -> object -> Type;\n\n    compose : forall s d d',\n                morphism d d'\n                -> morphism s d\n                -> morphism s d'\n                            where \"f 'o' g\" := (compose f g);\n\n    trunc_morphism : forall s d, IsHSet (morphism s d) }.\n\nBind Scope category_scope with PreCategory.\nInfix \"o\" := (@ compose _ _ _ _) : morphism_scope.\n\nDelimit Scope functor_scope with functor.\n\nRecord Functor (C D : PreCategory) :=\n  {\n    object_of :> C -> D;\n    morphism_of : forall s d, morphism C s d\n                              -> morphism D (object_of s) (object_of d)\n  }.\n\nBind Scope functor_scope with Functor.\nArguments morphism_of [C%category] [D%category] F%functor [s%object d%object] m%morphism : rename, simpl nomatch.\nNotation \"F '_1' m\" := (morphism_of F m) (at level 10, no associativity) : morphism_scope.\nLocal Open Scope morphism_scope.\n\nClass IsIsomorphism {C : PreCategory} {s d} (m : morphism C s d) := { morphism_inverse : morphism C d s }.\n\nLocal Notation \"m ^-1\" := (morphism_inverse (m := m)) : morphism_scope.\n\nClass Isomorphic {C : PreCategory} s d :=\n  {\n    morphism_isomorphic :> morphism C s d;\n    isisomorphism_isomorphic :> IsIsomorphism morphism_isomorphic\n  }.\n\nCoercion morphism_isomorphic : Isomorphic >-> morphism.\n\nLocal Infix \"<~=~>\" := Isomorphic (at level 70, no associativity) : category_scope.\n\nDefinition isisomorphism_inverse `(@ IsIsomorphism C x y m) : IsIsomorphism m^-1 := {| morphism_inverse := m |}.\n\nGlobal Instance isisomorphism_compose `(@ IsIsomorphism C y z m0) `(@ IsIsomorphism C x y m1)\n: IsIsomorphism (m0 o m1).\nadmit.\nDefined.\n\nSection composition.\n  Variable C : PreCategory.\n  Variable D : PreCategory.\n  Variable E : PreCategory.\n  Variable G : Functor D E.\n  Variable F : Functor C D.\n\n  Definition composeF : Functor C E\n    := Build_Functor\n         C E\n         (fun c => G (F c))\n         (fun _ _ m => morphism_of G (morphism_of F m)).\nEnd composition.\nInfix \"o\" := composeF : functor_scope.\n\nDelimit Scope natural_transformation_scope with natural_transformation.\nRecord NaturalTransformation C D (F G : Functor C D) := { components_of :> forall c, morphism D (F c) (G c) }.\n\nSection compose.\n  Variable C : PreCategory.\n  Variable D : PreCategory.\n  Variables F F' F'' : Functor C D.\n\n  Variable T' : NaturalTransformation F' F''.\n  Variable T : NaturalTransformation F F'.\n\n  Local Notation CO c := (T' c o T c).\n\n  Definition composeT\n  : NaturalTransformation F F'' := Build_NaturalTransformation F F'' (fun c => CO c).\n\nEnd compose.\n\nSection whisker.\n  Variable C : PreCategory.\n  Variable D : PreCategory.\n  Variable E : PreCategory.\n\n  Section L.\n    Variable F : Functor D E.\n    Variables G G' : Functor C D.\n    Variable T : NaturalTransformation G G'.\n\n    Local Notation CO c := (morphism_of F (T c)).\n\n    Definition whisker_l\n      := Build_NaturalTransformation\n           (F o G) (F o G')\n           (fun c => CO c).\n\n  End L.\n\n  Section R.\n    Variables F F' : Functor D E.\n    Variable T : NaturalTransformation F F'.\n    Variable G : Functor C D.\n\n    Local Notation CO c := (T (G c)).\n\n    Definition whisker_r\n      := Build_NaturalTransformation\n           (F o G) (F' o G)\n           (fun c => CO c).\n  End R.\nEnd whisker.\nInfix \"o\" := composeT : natural_transformation_scope.\nInfix \"oL\" := whisker_l (at level 40, left associativity) : natural_transformation_scope.\nInfix \"oR\" := whisker_r (at level 40, left associativity) : natural_transformation_scope.\n\nSection path_natural_transformation.\n\n  Variable C : PreCategory.\n  Variable D : PreCategory.\n  Variables F G : Functor C D.\n\n  Lemma equiv_sig_natural_transformation\n  : { CO : forall x, morphism D (F x) (G x)\n    | forall s d (m : morphism C s d),\n        CO d o F _1 m = G _1 m o CO s }\n      <~> NaturalTransformation F G.\n    admit.\n  Defined.\n\n  Global Instance trunc_natural_transformation\n  : IsHSet (NaturalTransformation F G).\n  Proof.\n    eapply trunc_equiv'; [ exact equiv_sig_natural_transformation | ].\n    admit.\n  Qed.\n\nEnd path_natural_transformation.\nDefinition functor_category (C D : PreCategory) : PreCategory\n  := @ Build_PreCategory (Functor C D) (@ NaturalTransformation C D) (@ composeT C D) _.\n\nNotation \"C -> D\" := (functor_category C D) : category_scope.\n\nDefinition NaturalIsomorphism (C D : PreCategory) F G := @ Isomorphic (C -> D) F G.\n\nCoercion natural_transformation_of_natural_isomorphism C D F G (T : @ NaturalIsomorphism C D F G) : NaturalTransformation F G\n  := T : morphism _ _ _.\nLocal Infix \"<~=~>\" := NaturalIsomorphism : natural_transformation_scope.\nGlobal Instance isisomorphism_compose'\n       `(T' : @ NaturalTransformation C D F' F'')\n       `(T : @ NaturalTransformation C D F F')\n       `{@ IsIsomorphism (C -> D) F' F'' T'}\n       `{@ IsIsomorphism (C -> D) F F' T}\n: @ IsIsomorphism (C -> D) F F'' (T' o T)%natural_transformation\n  := @ isisomorphism_compose (C -> D) _ _ T' _ _ T _.\n\nSection lemmas.\n  Local Open Scope natural_transformation_scope.\n\n  Variable C : PreCategory.\n  Variable F : C -> PreCategory.\n  Context\n    {w x y z}\n    {f : Functor (F w) (F z)} {f0 : Functor (F w) (F y)}\n    {f1 : Functor (F x) (F y)} {f2 : Functor (F y) (F z)}\n    {f3 : Functor (F w) (F x)} {f4 : Functor (F x) (F z)}\n    {f5 : Functor (F w) (F z)} {n : f5 <~=~> (f4 o f3)%functor}\n    {n0 : f4 <~=~> (f2 o f1)%functor} {n1 : f0 <~=~> (f1 o f3)%functor}\n    {n2 : f <~=~> (f2 o f0)%functor}.\n\n  Lemma p_composition_of_coherent_iso_for_rewrite__isisomorphism_helper'\n  : @ IsIsomorphism\n      (_ -> _) _ _\n      (n2 ^-1 o (f2 oL n1 ^-1 o (admit o (n0 oR f3 o n))))%natural_transformation.\n  Proof.\n    eapply isisomorphism_compose';\n    [ eapply isisomorphism_inverse\n    | eapply isisomorphism_compose';\n      [ admit\n      | eapply isisomorphism_compose';\n        [ admit |\n          eapply isisomorphism_compose'; [ admit | ]]]].\n    Set Printing All. Set Printing Universes.\n    apply @ isisomorphism_isomorphic.\n    (* Toplevel input, characters 21-46:\nError:\nIn environment\nC : PreCategory\nF : C -> PreCategory\nw : C\nx : C\ny : C\nz : C\nf : Functor (F w) (F z)\nf0 : Functor (F w) (F y)\nf1 : Functor (F x) (F y)\nf2 : Functor (F y) (F z)\nf3 : Functor (F w) (F x)\nf4 : Functor (F x) (F z)\nf5 : Functor (F w) (F z)\nn : f5 <~=~> (f4 o f3)%functor\nn0 : f4 <~=~> (f2 o f1)%functor\nn1 : f0 <~=~> (f1 o f3)%functor\nn2 : f <~=~> (f2 o f0)%functor\nUnable to unify\n \"{|\n  object := Functor (F w) (F z);\n  morphism := NaturalTransformation (D:=F z);\n  compose := composeT (D:=F z);\n  trunc_morphism := fun s d : Functor (F w) (F z) =>\n                    trunc_natural_transformation s d |}\" with\n \"{|\n  object := Functor (F w) (F z);\n  morphism := NaturalTransformation (D:=F z);\n  compose := composeT (D:=F z);\n  trunc_morphism := fun s d : Functor (F w) (F z) =>\n                    trunc_natural_transformation s d |}\".\n *)\n(*  Toplevel input, characters 6-31:\nError:\nIn environment\nC : PreCategory@ {Top.764 Top.765 Top.766}\nF : forall _ : object@ {Top.764 Top.765 Top.766} C, PreCategory@ {Top.770\n    Top.771 Top.772}\nw : object@ {Top.764 Top.765 Top.766} C\nx : object@ {Top.764 Top.765 Top.766} C\ny : object@ {Top.764 Top.765 Top.766} C\nz : object@ {Top.764 Top.765 Top.766} C\nf : Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F w) (F z)\nf0 : Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F w) (F y)\nf1 : Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F x) (F y)\nf2 : Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F y) (F z)\nf3 : Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F w) (F x)\nf4 : Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F x) (F z)\nf5 : Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F w) (F z)\nn : @ NaturalIsomorphism@ {Top.819 Top.819 Top.821 Top.770 Top.771 Top.772\n      Top.770 Top.771 Top.772 Top.828} (F w) (F z) f5\n      (@ composeF@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772 Top.770\n         Top.771 Top.772} (F w) (F x) (F z) f4 f3)\nn0 : @ NaturalIsomorphism@ {Top.819 Top.819 Top.840 Top.770 Top.771 Top.772\n       Top.770 Top.771 Top.772 Top.847} (F x) (F z) f4\n       (@ composeF@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772 Top.770\n          Top.771 Top.772} (F x) (F y) (F z) f2 f1)\nn1 : @ NaturalIsomorphism@ {Top.819 Top.819 Top.859 Top.770 Top.771 Top.772\n       Top.770 Top.771 Top.772 Top.866} (F w) (F y) f0\n       (@ composeF@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772 Top.770\n          Top.771 Top.772} (F w) (F x) (F y) f1 f3)\nn2 : @ NaturalIsomorphism@ {Top.819 Top.819 Top.878 Top.770 Top.771 Top.772\n       Top.770 Top.771 Top.772 Top.885} (F w) (F z) f\n       (@ composeF@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772 Top.770\n          Top.771 Top.772} (F w) (F y) (F z) f2 f0)\nUnable to unify\n \"@ Build_PreCategory@ {Top.819 Top.819 Top.821}\n    (Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F w) (F z))\n    (@ NaturalTransformation@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772}\n       (F w) (F z))\n    (@ composeT@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F w) (F z))\n    (fun\n       s\n        d : Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772}\n              (F w) (F z) =>\n     @ trunc_natural_transformation@ {Top.770 Top.771 Top.772 Top.770 Top.771\n       Top.772 Top.821 Top.819 Top.828} (F w) (F z) s d)\" with\n \"@ Build_PreCategory@ {Top.819 Top.819 Top.878}\n    (Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F w) (F z))\n    (@ NaturalTransformation@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772}\n       (F w) (F z))\n    (@ composeT@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772} (F w) (F z))\n    (fun\n       s\n        d : Functor@ {Top.770 Top.771 Top.772 Top.770 Top.771 Top.772}\n              (F w) (F z) =>\n     @ trunc_natural_transformation@ {Top.770 Top.771 Top.772 Top.770 Top.771\n       Top.772 Top.878 Top.819 Top.885} (F w) (F z) s d)\". *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520902","html_url":"https://github.com/coq/coq/issues/3422#issuecomment-337520902","issue_url":"https://api.github.com/repos/coq/coq/issues/3422","id":337520902,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDkwMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-07-21T11:56:23Z","updated_at":"2017-10-18T09:22:21Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nSeems to be fixed in trunk...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520903","html_url":"https://github.com/coq/coq/issues/3422#issuecomment-337520903","issue_url":"https://api.github.com/repos/coq/coq/issues/3422","id":337520903,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDkwMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-07-21T12:03:29Z","updated_at":"2017-10-18T09:22:21Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nAdded a test-suite file.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]