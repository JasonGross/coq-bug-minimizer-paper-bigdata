[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337524843","html_url":"https://github.com/coq/coq/issues/3661#issuecomment-337524843","issue_url":"https://api.github.com/repos/coq/coq/issues/3661","id":337524843,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyNDg0Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-25T07:43:47Z","updated_at":"2017-10-18T09:33:38Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\n(* File reduced by coq-bug-finder from original input, then from 11218 lines to 438 lines, then from 434 lines to 202 lines, then from 140 lines to 94 lines *)\n(* coqc version trunk (September 2014) compiled on Sep 25 2014 2:53:46 with OCaml 4.01.0\n   coqtop version cagnode16:/afs/csail.mit.edu/u/j/jgross/coq-trunk,trunk (bec7e0914f4a7144cd4efa8ffaccc9f72dbdb790) *)\nInductive paths {A : Type} (a : A) : A -> Type := idpath : paths a a.\nSet Implicit Arguments.\nDelimit Scope morphism_scope with morphism.\nRecord PreCategory := { object :> Type ; morphism : object -> object -> Type }.\nBind Scope category_scope with PreCategory.\nLocal Open Scope morphism_scope.\nRecord Functor (C D : PreCategory) :=\n  { object_of :> C -> D;\n    morphism_of : forall s d, morphism C s d -> morphism D (object_of s) (object_of d) }.\nSet Primitive Projections.\nClass IsIsomorphism {C : PreCategory} {s d} (m : morphism C s d) := { morphism_inverse : morphism C d s }.\nRecord NaturalTransformation C D (F G : Functor C D) := { components_of :> forall c, morphism D (F c) (G c) }.\nUnset Primitive Projections.\nClass Isomorphic {C : PreCategory} s d :=\n  { morphism_isomorphic :> morphism C s d;\n    isisomorphism_isomorphic :> IsIsomorphism morphism_isomorphic }.\nArguments morphism_inverse {C s d} m {_} / .\nLocal Notation \"m ^-1\" := (morphism_inverse m) (at level 3, format \"m '^-1'\") : morphism_scope.\nDefinition functor_category (C D : PreCategory) : PreCategory.\n  exact (@ Build_PreCategory (Functor C D)\n                            (@ NaturalTransformation C D)).\nDefined.\nLocal Notation \"C -> D\" := (functor_category C D) : category_scope.\nGeneralizable All Variables.\nDefinition isisomorphism_components_of `{@ IsIsomorphism (C -> D) F G T} x : IsIsomorphism (T x).\nProof.\n  constructor.\n  exact (T^-1 x).\nDefined.\nHint Immediate isisomorphism_components_of : typeclass_instances.\nGoal forall (x3 x9 : PreCategory) (x12 f0 : Functor x9 x3)\n            (x35 : @ Isomorphic (@ functor_category x9 x3) f0 x12)\n            (x37 : object x9)\n            (H3 : morphism x3 (@ object_of x9 x3 f0 x37)\n                           (@ object_of x9 x3 f0 x37))\n            (x34 : @ Isomorphic (@ functor_category x9 x3) x12 f0)\n            (m : morphism x3 (x12 x37) (f0 x37) ->\n                 morphism x3 (f0 x37) (x12 x37) ->\n                 morphism x3 (f0 x37) (f0 x37)),\n       @ paths\n         (morphism x3 (@ object_of x9 x3 f0 x37) (@ object_of x9 x3 f0 x37))\n         H3\n         (m\n            (@ components_of x9 x3 x12 f0\n                            (@ morphism_inverse (@ functor_category x9 x3) f0 x12\n                                               (@ morphism_isomorphic (@ functor_category x9 x3) f0 x12 x35)\n                                               (@ isisomorphism_isomorphic (@ functor_category x9 x3) f0 x12\n                                                                          x35)) x37)\n            (@ components_of x9 x3 f0 x12\n                            (@ morphism_inverse (@ functor_category x9 x3) x12 f0\n                                               (@ morphism_isomorphic (@ functor_category x9 x3) x12 f0 x34)\n                                               (@ isisomorphism_isomorphic (@ functor_category x9 x3) x12 f0\n                                                                          x34)) x37)).\n  Unset Printing All.\n  intros.\n  match goal with\n    | [ |- context[components_of ?T^-1 ?x] ]\n      => progress let T1 := constr:(T^-1 x) in\n                  let T2 := constr:((T x)^-1) in\n                  change T1 with T2 || fail 1 \"too early\"\n  end.\n  Undo.\n  match goal with\n    | [ |- context[components_of ?T^-1 ?x] ]\n      => progress let T1 := constr:(T^-1 x) in\n                  change T1 with ((T x)^-1) || fail 1 \"too early 2\"\n  end.\n  Undo.\n  match goal with\n    | [ |- context[components_of ?T^-1 ?x] ]\n      => progress let T2 := constr:((T x)^-1) in\n                  change (T^-1 x) with T2\n  end. (* not convertible *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337524843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337524845","html_url":"https://github.com/coq/coq/issues/3661#issuecomment-337524845","issue_url":"https://api.github.com/repos/coq/coq/issues/3661","id":337524845,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyNDg0NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-27T19:12:53Z","updated_at":"2017-10-18T09:33:39Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nThis was due to the fact that the pattern was computed out of the core term which contained primitive projections and hence the pattern made from it contained less discriminating information that made the two occurrences of ?T^-1 in the goal match, and change failed with not convertible as the two instances weren't (at 1 or at 2 worked though). Fixed in trunk by computing the pattern from primitive projections using typing.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337524845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]