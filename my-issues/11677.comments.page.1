[{"url":"https://api.github.com/repos/coq/coq/issues/comments/590730496","html_url":"https://github.com/coq/coq/issues/11677#issuecomment-590730496","issue_url":"https://api.github.com/repos/coq/coq/issues/11677","id":590730496,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDczMDQ5Ng==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2020-02-25T07:49:40Z","updated_at":"2020-02-25T07:49:40Z","author_association":"MEMBER","body":"You can do that in Ltac2 using the `Control` module, and export a wrapper to Ltac1 if you want.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/590730496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/591099095","html_url":"https://github.com/coq/coq/issues/11677#issuecomment-591099095","issue_url":"https://api.github.com/repos/coq/coq/issues/11677","id":591099095,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTA5OTA5NQ==","user":{"login":"mikeshulman","id":646600,"node_id":"MDQ6VXNlcjY0NjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/646600?v=4","gravatar_id":"","url":"https://api.github.com/users/mikeshulman","html_url":"https://github.com/mikeshulman","followers_url":"https://api.github.com/users/mikeshulman/followers","following_url":"https://api.github.com/users/mikeshulman/following{/other_user}","gists_url":"https://api.github.com/users/mikeshulman/gists{/gist_id}","starred_url":"https://api.github.com/users/mikeshulman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikeshulman/subscriptions","organizations_url":"https://api.github.com/users/mikeshulman/orgs","repos_url":"https://api.github.com/users/mikeshulman/repos","events_url":"https://api.github.com/users/mikeshulman/events{/privacy}","received_events_url":"https://api.github.com/users/mikeshulman/received_events","type":"User","site_admin":false},"created_at":"2020-02-25T22:17:03Z","updated_at":"2020-02-25T22:17:03Z","author_association":"NONE","body":"@ppedrot Any chance you could supply a code snippet that someone could use without learning all about Ltac2?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/591099095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/591186172","html_url":"https://github.com/coq/coq/issues/11677#issuecomment-591186172","issue_url":"https://api.github.com/repos/coq/coq/issues/11677","id":591186172,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTE4NjE3Mg==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2020-02-26T01:22:35Z","updated_at":"2020-02-26T01:22:35Z","author_association":"MEMBER","body":"@ppedrot I don't think this is possible in Ltac2.  Either that, or there's a bug in `Control.case`.  Here's what I have:\r\n```coq\r\nRequire Import Ltac2.Init.\r\nRequire Ltac2.Control.\r\nRequire Ltac2.Ltac1.\r\n\r\nLtac2 drop_first_success (tac : unit -> 'a) :=\r\n  match Control.case tac with\r\n  | Val v\r\n    => let (first_success, next) := v in\r\n       fun (v : unit) => next (Tactic_failure None)\r\n  | Err err => Control.zero err\r\n  end.\r\n\r\nLtac drop_first_success tac :=\r\n  let f := ltac2:(tac1 |- drop_first_success (fun () => Ltac1.run tac1) ()) in\r\n  f tac.\r\n\r\nLtac drop_n_success n tac :=\r\n  lazymatch n with\r\n  | O => tac\r\n  | S ?n => drop_n_success n ltac:(drop_first_success tac)\r\n  end.\r\n\r\nLtac only_nth_success n tac :=\r\n  once (drop_n_success n tac).\r\n\r\nSet Default Proof Mode \"Classic\".\r\n\r\nGoal True \\/ False.\r\n  drop_first_success ltac:(idtac \"a\"; constructor).\r\n(* Error: Uncaught Ltac2 exception: Tactic_failure (None) *)\r\n```","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/591186172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/591260469","html_url":"https://github.com/coq/coq/issues/11677#issuecomment-591260469","issue_url":"https://api.github.com/repos/coq/coq/issues/11677","id":591260469,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTI2MDQ2OQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2020-02-26T06:19:40Z","updated_at":"2020-02-26T06:19:40Z","author_association":"MEMBER","body":"Is the issue that Ltac2 exceptions have level infinity or something?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/591260469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/1027304268","html_url":"https://github.com/coq/coq/issues/11677#issuecomment-1027304268","issue_url":"https://api.github.com/repos/coq/coq/issues/11677","id":1027304268,"node_id":"IC_kwDOABUDh849O2tM","user":{"login":"SkySkimmer","id":2461932,"node_id":"MDQ6VXNlcjI0NjE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2461932?v=4","gravatar_id":"","url":"https://api.github.com/users/SkySkimmer","html_url":"https://github.com/SkySkimmer","followers_url":"https://api.github.com/users/SkySkimmer/followers","following_url":"https://api.github.com/users/SkySkimmer/following{/other_user}","gists_url":"https://api.github.com/users/SkySkimmer/gists{/gist_id}","starred_url":"https://api.github.com/users/SkySkimmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SkySkimmer/subscriptions","organizations_url":"https://api.github.com/users/SkySkimmer/orgs","repos_url":"https://api.github.com/users/SkySkimmer/repos","events_url":"https://api.github.com/users/SkySkimmer/events{/privacy}","received_events_url":"https://api.github.com/users/SkySkimmer/received_events","type":"User","site_admin":false},"created_at":"2022-02-01T21:27:03Z","updated_at":"2022-02-01T21:27:03Z","author_association":"CONTRIBUTOR","body":"I think there was some bug, in master I get success with goal `False` (ie @JasonGross's code works)\r\nIt succeeds since 89a5abb0b8b453bdda8c9ebf33734c42c3a826db","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/1027304268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]