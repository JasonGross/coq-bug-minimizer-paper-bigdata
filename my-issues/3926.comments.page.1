[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337529312","html_url":"https://github.com/coq/coq/issues/3926#issuecomment-337529312","issue_url":"https://api.github.com/repos/coq/coq/issues/3926","id":337529312,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyOTMxMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-01-17T05:20:39Z","updated_at":"2018-02-23T14:32:18Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n\r\n```coq\r\n(* File reduced by coq-bug-finder from original input, then from 2352 lines to 162 lines, then from 48 lines to 33 lines *)\r\n(* coqc version 8.5beta1 (January 2015) compiled on Jan 16 2015 7:25:14 with OCaml 4.01.0\r\n   coqtop version cagnode15:/afs/csail.mit.edu/u/j/jgross/coq-8.5,v8.5 (81489f299ef60c21ac3da1d2157b02c3b41886d1) *)\r\n\r\nNotation compose := (fun g f x => g (f x)).\r\nNotation \"g 'o' f\" := (compose g f) (at level 40, left associativity) : function_scope.\r\nOpen Scope function_scope.\r\nInductive paths {A : Type} (a : A) : A -> Type := idpath : paths a a where \"x = y\" := (@ paths _ x y) : type_scope.\r\nArguments idpath {A a} , [A] a.\r\nDefinition ap {A B:Type} (f:A -> B) {x y:A} (p:x = y) : f x = f y := match p with idpath => idpath end.\r\nClass IsEquiv {A B : Type} (f : A -> B) := { equiv_inv : B -> A }.\r\nNotation \"f ^-1\" := (@ equiv_inv _ _ f _) (at level 3, format \"f '^-1'\") : equiv_scope.\r\nLocal Open Scope equiv_scope.\r\nAxiom eisretr : forall {A B} (f : A -> B) `{IsEquiv A B f} x, f (f^-1 x) = x.\r\nGeneralizable Variables A B C f g.\r\nGlobal Instance isequiv_compose `{IsEquiv A B f} `{IsEquiv B C g} : IsEquiv (compose g f) | 1000\r\n  := Build_IsEquiv A C (compose g f) (compose f^-1 g^-1).\r\nDefinition isequiv_homotopic {A B} (f : A -> B) {g : A -> B} `{IsEquiv A B f} (h : forall x, f x = g x) : IsEquiv g\r\n  := Build_IsEquiv _ _ g (f ^-1).\r\nGlobal Instance isequiv_inverse {A B} (f : A -> B) `{IsEquiv A B f} : IsEquiv f^-1 | 10000\r\n  := Build_IsEquiv B A f^-1 f.\r\nDefinition cancelR_isequiv {A B C} (f : A -> B) {g : B -> C}\r\n  `{IsEquiv A B f} `{IsEquiv A C (g o f)}\r\n  : IsEquiv g.\r\nProof.\r\n  Unset Typeclasses Modulo Eta.\r\n  exact (isequiv_homotopic (compose (compose g f) f^-1)\r\n                           (fun b => ap g (eisretr f b))) || fail \"too early\".\r\n  Undo.\r\n  Set Typeclasses Modulo Eta.\r\n  Set Typeclasses Dependency Order.\r\n  Set Typeclasses Debug.\r\n  exact (isequiv_homotopic (compose (compose g f) f^-1)\r\n                           (fun b => ap g (eisretr f b))).\r\n  (* Toplevel input, characters 20-132:\r\nError: Unable to satisfy the following constraints:\r\nUNDEFINED EVARS:\r\n ?X124==[A B C f g H H0 |- IsEquiv (g o f o f^-1)] (parameter H of\r\n          @ isequiv_homotopic) {H}\r\n ?X132==[A B C f g H H0 {b} |- IsEquiv f] (parameter H of @ eisretr) {H0} *)\r\n  (* Debug: 1.1: exact H on (IsEquiv f)\r\nDebug: 2.1: apply @ isequiv_compose on (IsEquiv (g o f o f^-1))\r\nDebug: 2.1.1: no match for (IsEquiv (fun x : B => x)) , 4 possibilities\r\nDebug: Backtracking after apply @ isequiv_compose\r\nDebug: Backtracking after exact H\r\nDebug: 1.1: exact H on (IsEquiv f)\r\nDebug: 2.1: apply @ isequiv_compose on (IsEquiv (g o f o f^-1))\r\nDebug: 2.1.1: no match for (IsEquiv (fun x : B => x)) , 4 possibilities\r\nDebug: Backtracking after apply @ isequiv_compose\r\nDebug: Backtracking after exact H\r\n *)\r\n```\r\n\r\nDoes `Set Typeclasses Modulo Eta` backtrack after eta-expansion, or does it always eta-expand everything and not try the non-eta-expanded goal?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337529312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/368025095","html_url":"https://github.com/coq/coq/issues/3926#issuecomment-368025095","issue_url":"https://api.github.com/repos/coq/coq/issues/3926","id":368025095,"node_id":"MDEyOklzc3VlQ29tbWVudDM2ODAyNTA5NQ==","user":{"login":"Zimmi48","id":1108325,"node_id":"MDQ6VXNlcjExMDgzMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1108325?v=4","gravatar_id":"","url":"https://api.github.com/users/Zimmi48","html_url":"https://github.com/Zimmi48","followers_url":"https://api.github.com/users/Zimmi48/followers","following_url":"https://api.github.com/users/Zimmi48/following{/other_user}","gists_url":"https://api.github.com/users/Zimmi48/gists{/gist_id}","starred_url":"https://api.github.com/users/Zimmi48/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zimmi48/subscriptions","organizations_url":"https://api.github.com/users/Zimmi48/orgs","repos_url":"https://api.github.com/users/Zimmi48/repos","events_url":"https://api.github.com/users/Zimmi48/events{/privacy}","received_events_url":"https://api.github.com/users/Zimmi48/received_events","type":"User","site_admin":false},"created_at":"2018-02-23T14:33:22Z","updated_at":"2018-02-23T14:33:22Z","author_association":"MEMBER","body":"Given that this option is deprecated and is going to be removed, this is a \"won't fix\".","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/368025095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]