[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513027","html_url":"https://github.com/coq/coq/issues/2947#issuecomment-337513027","issue_url":"https://api.github.com/repos/coq/coq/issues/2947","id":337513027,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzAyNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2012-12-19T13:40:13Z","updated_at":"2017-10-18T08:59:31Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThe following code generates the error \"Error: Tactic failure: anomaly: Find_at (level 97).\" on \"ring.\"\n\nRequire Import ZArith.\n\nGoal exists x y, (x + y = 0)%Z.\nrepeat esplit.\nring.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513029","html_url":"https://github.com/coq/coq/issues/2947#issuecomment-337513029","issue_url":"https://api.github.com/repos/coq/coq/issues/2947","id":337513029,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzAyOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-18T13:27:37Z","updated_at":"2017-10-18T08:59:31Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nThis is not specific to the ring tactic. Any pattern matching on existential variables fail.\n\nGoal exists n : nat, n = n.\nProof.\neexists.\nmatch goal with |- ?x = ?y => match x with y => split end end.\nQed.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513031","html_url":"https://github.com/coq/coq/issues/2947#issuecomment-337513031","issue_url":"https://api.github.com/repos/coq/coq/issues/2947","id":337513031,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzAzMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-18T13:33:07Z","updated_at":"2017-10-18T08:59:32Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nWould you have expected pattern-matching to do some unification here?\n\nIt does not sound very reasonable, does it?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513033","html_url":"https://github.com/coq/coq/issues/2947#issuecomment-337513033","issue_url":"https://api.github.com/repos/coq/coq/issues/2947","id":337513033,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzAzMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-18T13:36:43Z","updated_at":"2017-10-18T08:59:32Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nI think it's poor to see [anomaly] in the error message of [ring].\n\nI expect that if [constr_eq x y] succeeds, then so should [match x with y => idtac end].  This is not the case with existentials, apparently.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513034","html_url":"https://github.com/coq/coq/issues/2947#issuecomment-337513034","issue_url":"https://api.github.com/repos/coq/coq/issues/2947","id":337513034,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzAzNA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-18T13:38:58Z","updated_at":"2017-10-18T08:59:32Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nUnification is not even involved here. We have an existential variable that is not equal to itself (hence the failure in ring). I don't think we want unification, but we should still acknowledge term equality.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513035","html_url":"https://github.com/coq/coq/issues/2947#issuecomment-337513035","issue_url":"https://api.github.com/repos/coq/coq/issues/2947","id":337513035,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzAzNQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-18T13:41:44Z","updated_at":"2017-10-18T08:59:32Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nYes, right, sorry, I can't read.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513037","html_url":"https://github.com/coq/coq/issues/2947#issuecomment-337513037","issue_url":"https://api.github.com/repos/coq/coq/issues/2947","id":337513037,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzAzNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-18T14:28:00Z","updated_at":"2017-10-18T08:59:32Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nSo, there is no PEvar case in the [matches_core] function of pretyping/constrMatching.ml\n\nIt may be a mistake or it may be deliberate (this function is used in other places). But in either case it is fairly easy to fix. Hugo, can you comment on what is the proper course of action?\n\nI'll conclude with a rant: the [matches_core] function is a fairly typical function of the form [match foo,bar with …] with only linearly many case interesting. In such cases it is mostly impossible to write all the cases explicitely, so the match always ends with catch-all case. Meaning we lose almost all benefit of the exhaustivity check of pattern matching (and things like that go unnoticed).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513039","html_url":"https://github.com/coq/coq/issues/2947#issuecomment-337513039","issue_url":"https://api.github.com/repos/coq/coq/issues/2947","id":337513039,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzAzOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T14:36:22Z","updated_at":"2017-10-18T08:59:32Z","author_association":"CONTRIBUTOR","body":"Comment author: @zeldovich\n\nOne unfortunate side-effect of this bug is that it makes it difficult to use [try ring] or [ring || othertactic] within proof automation tactics: the [fail 100 \"anomaly: Find_at\"] causes this anomaly error to bubble up all the way to the top, past other alternative tactics that I would have liked to execute if [ring] fails.\n\nPerhaps one (ugly) workaround is to wrap [ring] with 100 levels of match, so as to absorb the [fail 100]? :-)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513042","html_url":"https://github.com/coq/coq/issues/2947#issuecomment-337513042","issue_url":"https://api.github.com/repos/coq/coq/issues/2947","id":337513042,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzA0Mg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-18T08:18:16Z","updated_at":"2017-10-18T08:59:33Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nThere has been many modifications of the [constrMatching.ml] file during the summer. I don't know which one is responsible for this, but this bug is now fixed.\n\nJason's example with the ring tactic now fails with a proper error message (at level 0 as appropriate). And Guillaume's example with pattern-matching on an existential variable succeeds as expected.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]