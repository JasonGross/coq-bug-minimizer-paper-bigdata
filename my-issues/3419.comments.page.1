[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520860","html_url":"https://github.com/coq/coq/issues/3419#issuecomment-337520860","issue_url":"https://api.github.com/repos/coq/coq/issues/3419","id":337520860,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDg2MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-07-13T11:21:36Z","updated_at":"2020-03-26T20:44:26Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n```coq\r\n(* File reduced by coq-bug-finder from original input, then from 3442 lines to 40 lines *)\r\nNotation \"( x ; y )\" := (existT _ x y) : fibration_scope.\r\nOpen Scope fibration_scope.\r\nNotation \"x .1\" := (projT1 x) (at level 3) : fibration_scope.\r\nNotation \"x .2\" := (projT2 x) (at level 3) : fibration_scope.\r\nInductive paths {A : Type} (a : A) : A -> Type := idpath : paths a a where \"x = y :> A\" := (@ paths A x y) : type_scope.\r\nArguments idpath {A a} , [A] a.\r\nNotation \"x = y\" := (x = y :>_) : type_scope.\r\nDefinition transport {A : Type} (P : A -> Type) {x y : A} (p : x = y) (u : P x) : P y :=\r\n  match p with idpath => u end.\r\nNotation \"p # x\" := (transport _ p x) (right associativity, at level 65, only parsing) : path_scope.\r\nLocal Open Scope path_scope.\r\nDefinition path_sigma_uncurried {A : Type} (P : A -> Type) (u v : sigT P)\r\n           (pq : {p : u.1 = v.1 &  p # u.2 = v.2})\r\n: u = v\r\n  := match pq with\r\n       | existT p q =>\r\n         match u, v return (forall p0, (p0 # u.2 = v.2) -> (u=v)) with\r\n           | (x;y), (x';y') => fun p1 q1 =>\r\n                                 match p1 in (_ = x'') return (forall y'', (p1 # y = y'') -> (x;y)=(x'';y'')) with\r\n                                   | idpath => fun y' q2 =>\r\n                                                 match q2 with\r\n                                                   | idpath => idpath\r\n                                                 end\r\n                                 end y' q1\r\n         end p q\r\n     end.\r\n(* (* Toplevel input, characters 606-612:\r\nError:\r\nIn environment\r\nA : Type\r\nP : A -> Type\r\nu : {x : _ & P x}\r\nv : {x : _ & P x}\r\npq : {p : u .1 = v .1 & transport P p u .2 = v .2}\r\np : u .1 = v .1\r\nq : transport P p u .2 = v .2\r\nx : A\r\ny : P x\r\nx' : A\r\ny' : P x'\r\np1 : ?73 = ?74\r\nq1 : transport ?69 p1 (x; y) .2 = (x'; y') .2\r\ny'0 : ?96 ?73\r\nq2 : transport ?96 idpath y = y'0\r\nThe term \"idpath\" has type \"(x; y) = (x; y)\"\r\nwhile it is expected to have type \"(x; y) = (?73; ?103)\"\r\n(cannot instantiate \"?73\" because \"x\" is not in its scope: available\r\narguments are \"A\" \"P\" \"u\" \"v\" \"pq\" \"p\" \"q\" \"(x; y)\"\r\n\"(x'; y')\"). *)\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520862","html_url":"https://github.com/coq/coq/issues/3419#issuecomment-337520862","issue_url":"https://api.github.com/repos/coq/coq/issues/3419","id":337520862,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDg2Mg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-23T15:13:25Z","updated_at":"2017-10-18T09:22:13Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nIt does not feel like a bug in Coq. As far as I can tell, Coq inferred the wrong type for p0 and/or p1, and thus was unable to typecheck the expression. I don't think we can offer any guarantee with respect to the inference of return clauses. Asserting that p1 is of type \"x = x'\" (for 8.4) or that p0 is of type \"u.1 = v.1\" (for 8.5) is sufficient for the typechecking to complete.\n\nI agree that the error message is completely unhelpful though. And the behavior discrepancy between 8.4 and 8.5 is a bit worrying. So it is only reluctantly that I am closing this bug.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520865","html_url":"https://github.com/coq/coq/issues/3419#issuecomment-337520865","issue_url":"https://api.github.com/repos/coq/coq/issues/3419","id":337520865,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDg2NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-02-27T19:20:38Z","updated_at":"2020-03-26T20:47:04Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\r\n\r\nAs far as I could investigate, this is related to commit f16f8383f0af88deda99fa4c033ea04149b00f49 by Pierre Boutillier on Mar 10 18:38:13 2014:\r\n\r\nMaybeFlexible semantic changes\r\nFrom Maybe reducible to Maybe to reduce (but for sure reducible)\r\n\r\nwhose effect is to change the status of a rel which is not a let-in to MaybeFlexible to Rigid, thus shortcutting the use of a first-order heuristic.\r\nThis can be seen on the following simplified example with only 3 holes:\r\n\r\n```coq\r\nNotation \"( x ; y )\" := (existT _ x y).\r\nNotation \"x .1\" := (projT1 x) (at level 3).\r\nNotation \"x .2\" := (projT2 x) (at level 3).\r\nDefinition transport {A : Type} (P : A -> Type) {x y : A} (p : x = y) (u : P x) : P y :=\r\n  match p with eq_refl => u end.\r\n\r\nDefinition path_sigma_uncurried {A : Type} (P : A -> Type) (u : @sigT A P) (z:A) (t:P z)\r\n           (p : @projT1 A P u = z :> A) (q : @transport A P (@projT1 A P u) z p (@projT2 A P u) = t :> P z)\r\n: True\r\n  := match u return forall (p0 : @projT1 A P _ = z :> A), (@transport A _ (@projT1 A P _) z p0 (@projT2 A P u) = t :> P z) -> True with\r\n           | (x;y) => fun (p1 : x = z :> A) q1 => I\r\n         end p q.\r\n```\r\n\r\nSo, it is easy to make the example working by reverting flex_kind_of_term, or (presumably) to add first-order heuristic in the flex-rigid case. Don't know which is better. Don't know if there are examples which would break by reverting flex_kind_of_term.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/604677150","html_url":"https://github.com/coq/coq/issues/3419#issuecomment-604677150","issue_url":"https://api.github.com/repos/coq/coq/issues/3419","id":604677150,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDY3NzE1MA==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2020-03-26T20:47:45Z","updated_at":"2020-03-26T20:47:45Z","author_association":"MEMBER","body":"Note that the initial example now passes in 8.10, but @herbelin's example still fails with `Error: Found type \"x = z\" where \"?x@{u0:=u; u:=(x; y)} .1 = z\" was expected.`","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/604677150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/881973494","html_url":"https://github.com/coq/coq/issues/3419#issuecomment-881973494","issue_url":"https://api.github.com/repos/coq/coq/issues/3419","id":881973494,"node_id":"IC_kwDOABUDh840kdj2","user":{"login":"Alizter","id":8614547,"node_id":"MDQ6VXNlcjg2MTQ1NDc=","avatar_url":"https://avatars.githubusercontent.com/u/8614547?v=4","gravatar_id":"","url":"https://api.github.com/users/Alizter","html_url":"https://github.com/Alizter","followers_url":"https://api.github.com/users/Alizter/followers","following_url":"https://api.github.com/users/Alizter/following{/other_user}","gists_url":"https://api.github.com/users/Alizter/gists{/gist_id}","starred_url":"https://api.github.com/users/Alizter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alizter/subscriptions","organizations_url":"https://api.github.com/users/Alizter/orgs","repos_url":"https://api.github.com/users/Alizter/repos","events_url":"https://api.github.com/users/Alizter/events{/privacy}","received_events_url":"https://api.github.com/users/Alizter/received_events","type":"User","site_admin":false},"created_at":"2021-07-17T23:26:23Z","updated_at":"2021-07-17T23:26:23Z","author_association":"CONTRIBUTOR","body":"What should be done here?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/881973494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/882042821","html_url":"https://github.com/coq/coq/issues/3419#issuecomment-882042821","issue_url":"https://api.github.com/repos/coq/coq/issues/3419","id":882042821,"node_id":"IC_kwDOABUDh840kufF","user":{"login":"herbelin","id":460771,"node_id":"MDQ6VXNlcjQ2MDc3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/460771?v=4","gravatar_id":"","url":"https://api.github.com/users/herbelin","html_url":"https://github.com/herbelin","followers_url":"https://api.github.com/users/herbelin/followers","following_url":"https://api.github.com/users/herbelin/following{/other_user}","gists_url":"https://api.github.com/users/herbelin/gists{/gist_id}","starred_url":"https://api.github.com/users/herbelin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/herbelin/subscriptions","organizations_url":"https://api.github.com/users/herbelin/orgs","repos_url":"https://api.github.com/users/herbelin/repos","events_url":"https://api.github.com/users/herbelin/events{/privacy}","received_events_url":"https://api.github.com/users/herbelin/received_events","type":"User","site_admin":false},"created_at":"2021-07-18T11:34:47Z","updated_at":"2021-07-18T11:34:57Z","author_association":"MEMBER","body":"My example is the standard wish that unification is able to invert the instances in conjunctive types. This is of course something I'm interested to work on but it may be also relevant to have an official group of developers working on unification so as to share information and dispatch tasks.\r\n\r\nIn any case, the issue can probably be closed as the wish is already collected, e.g. [here](https://github.com/coq/coq/wiki/UnificationProblems#inverting-tuples-in-instances-of-existential-variables).","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/882042821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]