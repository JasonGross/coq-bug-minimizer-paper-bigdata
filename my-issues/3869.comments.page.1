[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528329","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528329","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528329,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODMyOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T04:29:14Z","updated_at":"2017-10-18T09:43:45Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nHere is a case where [Qed] takes 0.617s in e8726550e01e51ef3ccf8602f2ecbe2b3737cca3 (Sept 19), but 4.593 s with ab1e5d1f9180daa64924b0b398300cd311611045 (Dec 13), and [End <section>] takes 0.181 s in e8726550e01e51ef3ccf8602f2ecbe2b3737cca3, but 2.244 s in ab1e5d1f9180daa64924b0b398300cd311611045.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528330","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528330","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528330,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODMzMA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T04:29:27Z","updated_at":"2017-10-18T09:43:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nCreated attachment 527\nslow file\n\n> Attached file: [bug_factorization_slow_end_07_admitted.v](https://coq.inria.fr/bugfiles/attachment.cgi?id=527) (text/plain, 13275 bytes)\n> Description:   slow file\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528331","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528331","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528331,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODMzMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T13:49:50Z","updated_at":"2017-10-18T09:43:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nTracing the program shows that it passes most of its time in term hashconsing. I do not know what changed since then...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528332","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528332","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528332,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODMzMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T20:05:45Z","updated_at":"2017-10-18T09:43:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nHashconsing is the majority of the time in both the [End] section and the [Qed]?\n\nIs there a good reason for hashconsing inside of opaque terms?  (It's assumed to speed up the type-checking part of [Qed]?)\n\nDoes hashconsing somehow explain bug [BZ#3870](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%233870%22), too?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528333","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528333","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528333,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODMzMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T20:06:25Z","updated_at":"2017-10-18T09:43:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nAlso, why does the time it takes to hashcons things differ depending on whether or not primitive projections is turned on?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528334","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528334","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528334,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODMzNA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T20:43:24Z","updated_at":"2017-10-18T09:43:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nNo, unfortunately type checking takes no advantage of hashconsing,\nproof terms are maximally shared only to lower their memory consumption.\n\nThe commit changes the way some terms are manipulated, maybe they grow in size of get unshared.  I guess Matthieu knows better.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528336","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528336","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528336,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODMzNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T20:45:57Z","updated_at":"2017-10-18T09:43:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nI should note that I haven't bisected this, and there are a few months of commits between the tests.  Shall I go try to bisect this?  (I worry that the fact that the conversion algorithm has changed will get in the way...  I suppose that shouldn't impact the time it takes to end a section?)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528337","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528337","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528337,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODMzNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-16T21:03:12Z","updated_at":"2017-10-18T09:43:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nIf you report a bug saying \"after commit X\" I suppose X is the culprit... if it is not then yes, please bisect.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528339","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528339","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528339,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODMzOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-17T07:56:13Z","updated_at":"2017-10-18T09:43:46Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nSorry about that.\n\nBisecting says the first bad commit is between 84544396cbbf34848be2240acf181b4d5f1f42d2 and 92a183f4ada641c0ab73dd0479e98df36eeeb365.  In particular, it says:\n\nThere are only 'skip'ped commits left to test.\nThe first bad commit could be any of:\n8c32ecc205aebaf9a4da95e24463286aee1a571d\n02b66da78e766a0eb8a1ec82a03ec9ce5418a0f0\n2dfeec2d73b1fce0d3a461d2215b1a3f65881c9b\n0f17c70288662bf8abd1bae59d32a94054481f26\nb6e39ade125862ba41ca17b06b8e35726b9b0d7d\n3ca949d4069308cf71c8f22b8dfc89e95a3834c1\n84544396cbbf34848be2240acf181b4d5f1f42d2\n92a183f4ada641c0ab73dd0479e98df36eeeb365\nWe cannot bisect more!\nbisect run cannot continue any more\n\nThis is the series of commits that distinguished between folding and unfolded projections so that [cbv delta; cbv beta; cbv iota] works as expected, and you don't need to do [cbv delta beta iota].\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528342","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528342","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528342,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODM0Mg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-17T08:50:33Z","updated_at":"2017-10-18T09:43:47Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nCreated attachment 529\nslow file that works with 8454439 and 0efba04\n\nThe first bad commit is 84544396cbbf34848be2240acf181b4d5f1f42d2.  With the attached file, I get \n\njgross@ cagnode13:~/coq-bisect$ ~/.local64/coq/coq-0efba04/bin/coqc -nois example.v\nIdentifier 'o' now a keyword\nFinished transaction in 0.443 secs (0.444u,0.s) (successful)\nFinished transaction in 0.146 secs (0.148u,0.s) (successful)\njgross@ cagnode13:~/coq-bisect$ ~/.local64/coq/coq-8454439/bin/coqc -nois example.v\nIdentifier 'o' now a keyword\nFinished transaction in 4.05 secs (4.036u,0.012s) (successful)\nFinished transaction in 1.818 secs (1.812u,0.004s) (successful)\n\n> Attached file: [example.v](https://coq.inria.fr/bugfiles/attachment.cgi?id=529) (text/plain, 13403 bytes)\n> Description:   slow file that works with 8454439 and 0efba04\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528343","html_url":"https://github.com/coq/coq/issues/3869#issuecomment-337528343","issue_url":"https://api.github.com/repos/coq/coq/issues/3869","id":337528343,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyODM0Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-12-17T17:40:57Z","updated_at":"2017-10-18T09:43:47Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nThank you very much for tracking this down, it was all due to failure of hashconsing projections properly when I added the boolean for the folding status. Timings are now much, much better.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337528343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]