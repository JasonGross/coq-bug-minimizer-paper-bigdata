[{"url":"https://api.github.com/repos/coq/coq/issues/comments/961158163","html_url":"https://github.com/coq/coq/issues/15120#issuecomment-961158163","issue_url":"https://api.github.com/repos/coq/coq/issues/15120","id":961158163,"node_id":"IC_kwDOABUDh845ShwT","user":{"login":"SkySkimmer","id":2461932,"node_id":"MDQ6VXNlcjI0NjE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2461932?v=4","gravatar_id":"","url":"https://api.github.com/users/SkySkimmer","html_url":"https://github.com/SkySkimmer","followers_url":"https://api.github.com/users/SkySkimmer/followers","following_url":"https://api.github.com/users/SkySkimmer/following{/other_user}","gists_url":"https://api.github.com/users/SkySkimmer/gists{/gist_id}","starred_url":"https://api.github.com/users/SkySkimmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SkySkimmer/subscriptions","organizations_url":"https://api.github.com/users/SkySkimmer/orgs","repos_url":"https://api.github.com/users/SkySkimmer/repos","events_url":"https://api.github.com/users/SkySkimmer/events{/privacy}","received_events_url":"https://api.github.com/users/SkySkimmer/received_events","type":"User","site_admin":false},"created_at":"2021-11-04T15:31:28Z","updated_at":"2021-11-04T15:31:28Z","author_association":"CONTRIBUTOR","body":"The real bug is that coqc ignores -top, it should either respect it or error.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/961158163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/961281370","html_url":"https://github.com/coq/coq/issues/15120#issuecomment-961281370","issue_url":"https://api.github.com/repos/coq/coq/issues/15120","id":961281370,"node_id":"IC_kwDOABUDh845S_1a","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2021-11-04T17:51:34Z","updated_at":"2021-11-04T17:51:34Z","author_association":"MEMBER","body":"Is there a case where -top is useful in coqc? It ignores it since some time as we set the topname based on the output file [and as far as I know that's the only valid choice, isn't it?]","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/961281370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/965683383","html_url":"https://github.com/coq/coq/issues/15120#issuecomment-965683383","issue_url":"https://api.github.com/repos/coq/coq/issues/15120","id":965683383,"node_id":"IC_kwDOABUDh845jyi3","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2021-11-10T19:44:02Z","updated_at":"2021-11-10T19:44:02Z","author_association":"MEMBER","body":"If coqc ignores top, then auto-minimized files will sometimes not be able to be automatically ported to the test-suite, because the minimizer has no way of adjusting references that are based on the top name.  Consider, for example:\r\n```coq\r\n(* -*- coq-prog-args: (\"-top\" \"Bar\") -*- *)\r\nDefinition foo := Set.\r\nCheck Bar.foo.\r\n```\r\nThis passes in coqtop, but fails in `coqc -q -top Bar` unless the file is named `Bar.v`.  I suppose I can try doing some extra wrapping to eliminate the need for `-top`, but it might be nicer if coqc permitted `-top` (perhaps with a warning message to the effect of \"Using -top with a name (topname) that does not match the filename (fname) will result in an unusable .vo file unless the .vo file is renamed to match.\" But this would break coqchk on the test-suite, so, idk.  Maybe I should bite the bullet and get the minimizer to do the wrapping needed to eliminate `-top`.  It would still be nice to be able to get coqc to respect `-top` so I can do this pass at the end of minimization rather than the beginning.)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/965683383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/965684672","html_url":"https://github.com/coq/coq/issues/15120#issuecomment-965684672","issue_url":"https://api.github.com/repos/coq/coq/issues/15120","id":965684672,"node_id":"IC_kwDOABUDh845jy3A","user":{"login":"SkySkimmer","id":2461932,"node_id":"MDQ6VXNlcjI0NjE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2461932?v=4","gravatar_id":"","url":"https://api.github.com/users/SkySkimmer","html_url":"https://github.com/SkySkimmer","followers_url":"https://api.github.com/users/SkySkimmer/followers","following_url":"https://api.github.com/users/SkySkimmer/following{/other_user}","gists_url":"https://api.github.com/users/SkySkimmer/gists{/gist_id}","starred_url":"https://api.github.com/users/SkySkimmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SkySkimmer/subscriptions","organizations_url":"https://api.github.com/users/SkySkimmer/orgs","repos_url":"https://api.github.com/users/SkySkimmer/repos","events_url":"https://api.github.com/users/SkySkimmer/events{/privacy}","received_events_url":"https://api.github.com/users/SkySkimmer/received_events","type":"User","site_admin":false},"created_at":"2021-11-10T19:45:31Z","updated_at":"2021-11-10T19:45:31Z","author_association":"CONTRIBUTOR","body":"Putting such files in the test suite is a bad idea, they'll break in coqide.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/965684672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/965688443","html_url":"https://github.com/coq/coq/issues/15120#issuecomment-965688443","issue_url":"https://api.github.com/repos/coq/coq/issues/15120","id":965688443,"node_id":"IC_kwDOABUDh845jzx7","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2021-11-10T19:50:19Z","updated_at":"2021-11-10T19:50:19Z","author_association":"MEMBER","body":"I thought CoqIDE parsed the header and made use of it?  I seem to recall something like this being necessary for some of the files in Coq's Init directory?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/965688443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/965892638","html_url":"https://github.com/coq/coq/issues/15120#issuecomment-965892638","issue_url":"https://api.github.com/repos/coq/coq/issues/15120","id":965892638,"node_id":"IC_kwDOABUDh845kloe","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2021-11-11T00:47:32Z","updated_at":"2021-11-11T00:47:32Z","author_association":"MEMBER","body":"@JasonGross this is done with a _CoqProject file; indeed, the invariant that file names do correspond to module hierarchy is common among module-based languages.\r\n\r\nSeems that for the minimizer you want to have multi-project files; the way I see it is that it is much easier for us to support a minimizer format that allows something such as:\r\n```\r\n#file A.v:\r\nDefinition ....\r\nEOF\r\n#file B/C.v\r\nRequire Import A.\r\n....\r\nEOF\r\n....\r\n```\r\nThis can be read by a tool and create a virtual layout that runs OK, in jsCoq we already have something like that for workspaces.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/965892638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]