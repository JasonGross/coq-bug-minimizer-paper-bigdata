[{"url":"https://api.github.com/repos/coq/coq/issues/comments/890498523","html_url":"https://github.com/coq/coq/issues/13134#issuecomment-890498523","issue_url":"https://api.github.com/repos/coq/coq/issues/13134","id":890498523,"node_id":"IC_kwDOABUDh841E-3b","user":{"login":"herbelin","id":460771,"node_id":"MDQ6VXNlcjQ2MDc3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/460771?v=4","gravatar_id":"","url":"https://api.github.com/users/herbelin","html_url":"https://github.com/herbelin","followers_url":"https://api.github.com/users/herbelin/followers","following_url":"https://api.github.com/users/herbelin/following{/other_user}","gists_url":"https://api.github.com/users/herbelin/gists{/gist_id}","starred_url":"https://api.github.com/users/herbelin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/herbelin/subscriptions","organizations_url":"https://api.github.com/users/herbelin/orgs","repos_url":"https://api.github.com/users/herbelin/repos","events_url":"https://api.github.com/users/herbelin/events{/privacy}","received_events_url":"https://api.github.com/users/herbelin/received_events","type":"User","site_admin":false},"created_at":"2021-08-01T11:08:40Z","updated_at":"2021-08-01T22:17:14Z","author_association":"MEMBER","body":"Technically, the difference of behaviors between primitive and non-primitive projections is the ability to use eta-conversion in the former case.\r\n\r\nBeforehand, a first-order heuristics is tried to reduce `morphism D (object_of F s) (object_of F d) == ?P (?x,?y)` to (the ill-typed) `(object_of F d) == (?x,?y)`, itself leading to a failing `match`/`pair` unification in the non-primitive case, but leading instead after record-eta-expansion to an ill-typed instance of `?x` in the primitive case.\r\n\r\nThis is an opportunity to try the effect of restricting the first-order heuristics to well-typed problems. See experimental PR #14733.\r\n\r\nEdited: the experiment is not working as well as expected and debugging is not easy.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/890498523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]