[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337516535","html_url":"https://github.com/coq/coq/issues/3165#issuecomment-337516535","issue_url":"https://api.github.com/repos/coq/coq/issues/3165","id":337516535,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNjUzNQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-11-22T23:01:15Z","updated_at":"2017-10-18T09:09:52Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nInductive T : Type := t1.\n\nSection eq.\n  Variable A : Type.\n  Let T := (@ eq A).\n  Let t1 := (@ eq_refl A).\n\n  Theorem foo a' b' (t' : T a' b')\n  : match t' with\n      | @ t1 y => tt\n    end\n    =\n    match t' with\n      | @ t1 y => tt\n    end.\n\n\nIn HoTT/coq (based off a semi-recent trunk), this gives\n\nToplevel input, characters 15-146:\nAnomaly: unexpected global_reference in pattern. Please report.\nframe @  file \"toplevel/vernac.ml\", line 343, characters 6-16\nraise @  file \"toplevel/vernac.ml\", line 335, characters 18-25\nframe @  file \"toplevel/vernac.ml\", line 327, characters 14-104\nraise @  file \"library/states.ml\", line 40, characters 45-46\nframe @  file \"library/states.ml\", line 38, characters 4-7\nraise @  file \"toplevel/vernacentries.ml\", line 1829, characters 12-13\nframe @  file \"toplevel/vernacentries.ml\", line 1818, characters 4-12\nframe @  file \"toplevel/vernacentries.ml\", line 453, characters 2-26\nframe @  file \"toplevel/lemmas.ml\", line 353, characters 13-474\nframe @  file \"lib/cList.ml\", line 163, characters 19-22\nframe @  file \"toplevel/lemmas.ml\", line 355, characters 20-64\nframe @  file \"interp/constrintern.ml\", line 1715, characters 10-46\nraise @  unknown\nframe @  file \"interp/constrintern.ml\", line 1622, characters 4-16\nframe @  file \"interp/notation_ops.ml\", line 57, characters 38-57\nframe @  file \"lib/cList.ml\", line 164, characters 2-16\nframe @  file \"lib/cList.ml\", line 156, characters 19-22\nraise @  unknown\nframe @  file \"interp/constrintern.ml\", line 527, characters 3-79\nframe @  file \"interp/constrintern.ml\", line 1448, characters 20-68\nframe @  file \"lib/cList.ml\", line 163, characters 19-22\nframe @  file \"interp/constrintern.ml\", line 1504, characters 22-71\nframe @  file \"interp/constrintern.ml\", line 1496, characters 15-59\nframe @  file \"lib/cList.ml\", line 163, characters 19-22\nframe @  file \"interp/constrintern.ml\", line 1489, characters 6-86\nframe @  file \"lib/cList.ml\", line 163, characters 19-22\nframe @  file \"interp/constrintern.ml\", line 1157, characters 17-47\nframe @  file \"interp/constrintern.ml\", line 864, characters 10-67\nraise @  file \"lib/errors.ml\", line 27, characters 18-39\n\nApologies if this is not present in trunk or 8.4 (but it has nothing to do with universes, so I suspect it is).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337516535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337516537","html_url":"https://github.com/coq/coq/issues/3165#issuecomment-337516537","issue_url":"https://api.github.com/repos/coq/coq/issues/3165","id":337516537,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNjUzNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-11-23T10:43:45Z","updated_at":"2017-10-18T09:09:52Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThis anomaly is easily turnable into a user error. Do you expect your code to work though? Currently one has to put true constructors in pattern-matching branches, but I presume it could be extended to definitions similarly to what you wrote.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337516537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337516539","html_url":"https://github.com/coq/coq/issues/3165#issuecomment-337516539","issue_url":"https://api.github.com/repos/coq/coq/issues/3165","id":337516539,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNjUzOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-11-23T10:59:27Z","updated_at":"2017-10-18T09:09:53Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nFinally, I changed the anomaly for an error in trunk.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337516539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337516540","html_url":"https://github.com/coq/coq/issues/3165#issuecomment-337516540","issue_url":"https://api.github.com/repos/coq/coq/issues/3165","id":337516540,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNjU0MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-11-23T16:05:26Z","updated_at":"2017-10-18T09:09:53Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nI was not sure if it would work before I tried it, but I did not expect it to be an anomaly.  It might be nice for the error message to mention the name of the global reference that's supposed to be a constructor.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337516540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]