[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515358","html_url":"https://github.com/coq/coq/issues/3096#issuecomment-337515358","issue_url":"https://api.github.com/repos/coq/coq/issues/3096","id":337515358,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNTM1OA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-07-25T18:44:29Z","updated_at":"2017-10-18T09:06:27Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nIt would be nice if notation interpretation backtracked on level assignment when it couldn't find a notation in the given scope.  That is, in the following rather than saying \"Unknown interpretation for notation \"_ ^\".\", it would be nice if it figured out that I want the notation in bar_scope at level 30.\n\nNotation \"p ^\" := (prod p p) (at level 3) : foo_scope.\nNotation \"p ^ q\" := (sum p q) (at level 30, right associativity) : bar_scope.\n\nDelimit Scope foo_scope with foo.\nDelimit Scope bar_scope with bar.\n\nCheck (Type ^)%foo.\nCheck (Type ^ Type)%bar.\n\nIs this reasonable/easy, or will it hopelessly complicate parsing?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515360","html_url":"https://github.com/coq/coq/issues/3096#issuecomment-337515360","issue_url":"https://api.github.com/repos/coq/coq/issues/3096","id":337515360,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNTM2MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-08-03T16:00:12Z","updated_at":"2017-10-18T09:06:27Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nI am afraid that won't be possible without changing the whole CAMLP4/5 parsing mechanism...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515363","html_url":"https://github.com/coq/coq/issues/3096#issuecomment-337515363","issue_url":"https://api.github.com/repos/coq/coq/issues/3096","id":337515363,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNTM2Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-08-03T19:02:26Z","updated_at":"2017-10-18T09:06:27Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nWhat is the reason for disallowing\n\nNotation \"p ^ q\" := (prod p q) (at level 3) : foo_scope.\nNotation \"p ^ q\" := (sum p q) (at level 30, right associativity) : bar_scope.\n\nbut allowing\n\nNotation \"p ^\" := (prod p p) (at level 3) : foo_scope.\nNotation \"p ^ q\" := (sum p q) (at level 30, right associativity) : bar_scope.\n\n?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515364","html_url":"https://github.com/coq/coq/issues/3096#issuecomment-337515364","issue_url":"https://api.github.com/repos/coq/coq/issues/3096","id":337515364,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNTM2NA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-08-04T17:28:49Z","updated_at":"2017-10-18T09:06:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThe fact that it is allowed does not mean that it will be parsed as you intend. The parser technology used by Coq is the one of CAMLP4/5, which is quite simple (LL + Îµ if I'm not mistaken), and it won't generate all the possible results in case of ambiguity. On the other hand, scopes are merely an convenience to put notations into namespaces, and it won't actually change the way it is parsed.\n\nIf you wish, Coq parsing is done in two parts:\n\n1. Parse the string according to the current grammar rules, introducing notations like [\"_ = _\" x y] when it sees [x = y] for instance.\n\n2. Try to interpret those notations with the scope information at hand.\n\nThe part 1. is done with CAMLP4/5. If you want to change this behaviour, you need to change the whole parsing strate of Coq.\n\nWe do not actually check that the parsing rules you define are meaningful (not even sure that it is decidable). It is indeed quite easy to define notations that won't parse anything at all, resulting irrepressible murder urges in both beginner and well-seasoned Coq devs.\n\nTry to have a look at the [Print Grammar constr] command to see the current grammar state of Coq.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515366","html_url":"https://github.com/coq/coq/issues/3096#issuecomment-337515366","issue_url":"https://api.github.com/repos/coq/coq/issues/3096","id":337515366,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNTM2Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-08-04T17:35:21Z","updated_at":"2017-10-18T09:06:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nIndeed\n\nNotation \"p ^\" := (prod p p) (at level 3) : foo_scope.\nNotation \"p ^ q\" := (sum p q) (at level 30, right associativity) : bar_scope.\n\ndoes not do what I want.  Am I correct in interpreting your response to say that the reason this is permitted is because it is too complicated and perhaps undecidable to see that they will not behave well together?\n\nThe original problem I was running in to was that the following is not accepted:\n\nReserved Notation \"p ^ q\" (at level 30, right associativity).\nNotation \"p ^\" := (prod p p) (at level 3) : foo_scope.\nNotation \"p ^ q\" := (sum p q) (at level 3, right associativity) : bar_scope.\n\nwhere I wanted it to have the same effect as having not had the [Reserved Notation] line.  But I think this is a good sanity check, given that parsing does not backtrack, and am not asking for this limitation to be removed.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515367","html_url":"https://github.com/coq/coq/issues/3096#issuecomment-337515367","issue_url":"https://api.github.com/repos/coq/coq/issues/3096","id":337515367,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNTM2Nw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-08-04T17:47:05Z","updated_at":"2017-10-18T09:06:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nHaving an ambiguous grammar is not a problem per se, as there exists libraries that generate all the possible AST corresponding to a string (e.g. dypgen).\n\nSo ideally we could use such a tool to parse things. But we use CAMLP4/5, and we use it intensively.\n\nBottom line: anyone is free to develop such a branch, though it won't be a piece of cake.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337515367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]