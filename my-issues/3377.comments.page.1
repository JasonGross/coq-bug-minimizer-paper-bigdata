[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520268","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520268","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520268,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI2OA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-12T14:23:05Z","updated_at":"2017-10-18T09:20:27Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nSet Primitive Projections.\nRecord prod A B := pair { fst : A; snd : B}.\n\nGoal fst (@ pair Type Type Type Type).\nSet Printing All.\nmatch goal with |- ?f _ => idtac end.\n(* Toplevel input, characters 7-44:\nError: No matching clauses for match. *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520271","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520271","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520271,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI3MQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-26T11:40:47Z","updated_at":"2017-10-18T09:20:27Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nProjection names cannot be captured like this, except maybe by doing an eta-expansion on the fly.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520274","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520274","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520274,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI3NA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-06-26T11:53:44Z","updated_at":"2017-10-18T09:20:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\n*** Bug [BZ#3385](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%233385%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520275","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520275","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520275,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI3NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-01T21:05:28Z","updated_at":"2017-10-18T09:20:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nI think eta-expansion on the fly would work decently well, and help in many cases.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520276","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520276","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520276,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI3Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-15T14:58:55Z","updated_at":"2017-10-18T09:20:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\n*** Bug [BZ#3507](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%233507%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520278","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520278","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520278,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI3OA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-25T19:54:46Z","updated_at":"2017-10-18T09:20:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nOk, that was not so hard in the end, I just needed to pass the environment to matching functions. I did it using the eta expanded form (fun x : I params => x.(p)) when matching a [p c] with [?f _], so one could keep using primitive projections only, not their fully eta-expanded form. Do you think it would be better to use the full form instead? I don't have any example myself where I'd need this feature. There's no way to have the beta reduction done automatically in any case.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520280","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520280","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520280,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI4MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-25T21:30:09Z","updated_at":"2017-10-18T09:20:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\n> so one could keep using primitive projections only, not their fully eta-expanded form. Do you think it would be better to use the full form instead?\n\nWhat do you mean?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520282","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520282","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520282,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI4Mg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-28T07:10:44Z","updated_at":"2017-10-18T09:20:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nI mean using the [@ p params] form instead.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520283","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520283","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520283,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI4Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-08-29T17:59:26Z","updated_at":"2017-10-18T09:20:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nEr, sorry.   I meant, what's the context of usage.  Are you asking if I think it would be better to always eta-expand in all uses of a primitive projection (that gets rid of the benefit, though, right?)?  Or to always eta-expand in some class of cases?  (which classes?)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520286","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520286","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520286,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI4Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-01T12:49:12Z","updated_at":"2017-10-18T09:20:29Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nI'm asking whether for this particular usage of capturing through Ltac's match an applied primitive projection, I should rather use \"@ p params\" or \"(fun x => x.(p))\" (the latter is used right now).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520287","html_url":"https://github.com/coq/coq/issues/3377#issuecomment-337520287","issue_url":"https://api.github.com/repos/coq/coq/issues/3377","id":337520287,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMDI4Nw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-01T15:16:55Z","updated_at":"2017-10-18T09:20:29Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nOh, I see.\n\nI see the following applications of using [@ p params] rather than [(fun x => x.(p))]:\n\n- I have a [head] tactic that returns the head of a term.  I'd like it to return [@ fst].  If functions are used rather than the eta-expanded projection, then [head] is fragile with respect to doing beta reduction in the middle, and [head_under_binders] will loop forever.  These seem like poor properties to have, although, of course, there will always be some tactic that is fragile in this way.\n\n- I have an [atomic] tactic that asks if something is a fix, cofix, let-in, abstraction, application, match, forall, or (hopefully the only remaining one) atomic.  It would be nice if projections are considered [atomic] by this tactic.  (More generally, it's nice if the [head] of something--with no exposed abstractions, matches, fixes, cofixes, nor let-ins--is atomic.)\n\n\n\nI see the following applications of using [(fun x => x.(p))]:\n\n- [rewrite] only needs to be up to beta, rather than up to beta and delta of primitive projections.\n\n\n\nAssuming that eta-expanded projections are declared as [Arguments @ proj args record / proj_args.] (so they simpl always when the result is a primitive projection applied to something, rather than an eta-expanded function), then I already have a rewrite-up-to-simpl tactic (does rewrite_strat support this natively?), so I have a mild preference for getting [@ p params].  (I might change my mind when I have more cases that actually use this.)  (I also hope that [rewrite] will use indices/classes of constants, and then the bullet point of the [(fun x => x.(p))] will be irrelevant, I hope.)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337520287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]