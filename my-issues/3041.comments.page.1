[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514537","html_url":"https://github.com/coq/coq/issues/3041#issuecomment-337514537","issue_url":"https://api.github.com/repos/coq/coq/issues/3041","id":337514537,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNDUzNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-05-17T03:23:23Z","updated_at":"2017-10-18T09:03:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThe following code succeeds, but replacing [(@ eq_equivalence)] on the last line with a hole (underscore) causes type-class resolution to fail:\n\nRequire Import Classes.RelationClasses List Setoid.\n\nSet Universe Polymorphism.\n\nDefinition RowType := list Type.\n\n\nInductive Row : RowType -> Type :=\n| RNil : Row nil\n| RCons : forall T Ts, T -> Row Ts -> Row (T :: Ts).\n\nInductive RowTypeDecidable (P : forall T, relation T) `(H : forall T, Equivalence (P T))\n: RowType -> Type :=\n| RTDecNil : RowTypeDecidable P H nil\n| RTDecCons : forall T Ts, (forall t0 t1 : T,\n                              {P T t0 t1} + {~P T t0 t1})\n                           -> RowTypeDecidable P H Ts\n                           -> RowTypeDecidable P H (T :: Ts).\n\nSet Printing Universes.\n\nFixpoint Row_eq Ts\n: RowTypeDecidable (fun T => @ eq T) (@ eq_equivalence) Ts -> forall r1 r2 : Row Ts, {@ eq (Row Ts) r1 r2} + {r1 <> r2}.\n\nReplacing [(fun T => @ eq T)] makes it succeed in finding [@ eq_equivalence], but this causes universe inconsistencies in HoTT/coq (the universe polymorphic branch).  It would be nice if typeclass resolution, at some point, tried beta-iota-zeta normalizing the goal (and possibly hints).\n\nUnlike delta expansion, I think that beta-iota-zeta normalization usually makes terms smaller (though I guess [(fun x => f x x) y] gets bigger if [y] is big), and my guess is that this would not be a significant slow-down for typeclass resolution.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514539","html_url":"https://github.com/coq/coq/issues/3041#issuecomment-337514539","issue_url":"https://api.github.com/repos/coq/coq/issues/3041","id":337514539,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNDUzOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2017-06-13T21:44:30Z","updated_at":"2017-10-18T09:03:59Z","author_association":"CONTRIBUTOR","body":"Comment author: @Zimmi48\n\nThis seems to be working in 8.6.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]