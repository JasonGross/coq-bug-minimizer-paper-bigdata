[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521428","html_url":"https://github.com/coq/coq/issues/3454#issuecomment-337521428","issue_url":"https://api.github.com/repos/coq/coq/issues/3454","id":337521428,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMTQyOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-07-24T00:17:07Z","updated_at":"2017-10-18T09:23:56Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nIn all of the examples below, I expect the type inference engine to be able to pick up the unique assignment of arguments that makes things typecheck.  Furthermore, manually expanding a notation should not affect the error message.\n\n(* File reduced by coq-bug-finder from original input, then from 5135 lines to 4962 lines, then from 4444 lines to 100 lines, then from 106 lines to 97 lines, then from 105 lines to 28 lines *)\n\nSet Primitive Projections.\nRecord sigT {A} (P : A -> Type) := existT { projT1 : A ; projT2 : P projT1 }.\nNotation pr1 := (@ projT1 _ _).\nDefinition compose {A B C : Type} (g : B -> C) (f : A -> B) := fun x => g (f x).\nInductive paths {A : Type} (a : A) : A -> Type := idpath : paths a a where \"x = y\" := (@ paths _ x y) : type_scope.\nArguments idpath {A a} , [A] a.\nClass IsEquiv {A B : Type} (f : A -> B) := {}.\n\nLocal Instance isequiv_tgt_compose A B\n: @ IsEquiv (A -> {xy : B * B & fst xy = snd xy})\n           (A -> B)\n           (@ compose A {xy : B * B & fst xy = snd xy} B (@ compose {xy : B * B & fst xy = snd xy} _ B (@ snd B B) pr1)).\n(* Toplevel input, characters 220-223:\nError: Cannot infer this placeholder. *)\n\nLocal Instance isequiv_tgt_compose A B\n: @ IsEquiv (A -> {xy : B * B & fst xy = snd xy})\n           (A -> B)\n           (@ compose A {xy : B * B & fst xy = snd xy} B (@ compose {xy : B * B & fst xy = snd xy} _ B (@ snd _ _) (@ projT1 _ _))).\n(* Toplevel input, characters 221-232:\nError:\nIn environment\nA : Type\nB : Type\nThe term \"pr1\" has type \"sigT ?30 -> ?29\" while it is expected to have type\n \"{xy : B * B & fst xy = snd xy} -> ?27 * B\". *)\n\nLocal Instance isequiv_tgt_compose A B\n: @ IsEquiv (A -> {xy : B * B & fst xy = snd xy})\n           (A -> B)\n           (@ compose A {xy : B * B & fst xy = snd xy} B (@ compose {xy : B * B & fst xy = snd xy} _ B (@ snd _ _) pr1)).\n(* Toplevel input, characters 15-241:\nError:\nCannot infer an internal placeholder of type \"Type\" in environment:\n\nA : Type\nB : Type\nx : ?32\n. *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521431","html_url":"https://github.com/coq/coq/issues/3454#issuecomment-337521431","issue_url":"https://api.github.com/repos/coq/coq/issues/3454","id":337521431,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMTQzMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-07-29T13:50:09Z","updated_at":"2017-10-18T09:23:57Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nFixed in trunk. Note that this test-suite file is broken, as the notation { x : A & P} refers to the standard library's sigT, I added one with a fix.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]