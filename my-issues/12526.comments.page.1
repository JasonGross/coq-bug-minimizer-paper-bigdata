[{"url":"https://api.github.com/repos/coq/coq/issues/comments/645039835","html_url":"https://github.com/coq/coq/issues/12526#issuecomment-645039835","issue_url":"https://api.github.com/repos/coq/coq/issues/12526","id":645039835,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTAzOTgzNQ==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2020-06-16T22:16:29Z","updated_at":"2020-06-16T22:18:08Z","author_association":"MEMBER","body":"Let me refine my post. In Matita the type is a bit more sophisticated:\r\n\r\nhttps://github.com/LPCIC/matita/blob/794ed25e6e608b2136ce7fa2963bca4115c7e175/matita/components/ng_kernel/nCic.ml#L28-L35\r\n\r\n```ocaml\r\ntype lc_kind = Irl of int | Ctx of term list\r\n\r\nand local_context = int * lc_kind             (* shift (0 -> no shift), \r\n                                                 subst (Irl n means id of\r\n\t\t\t\t\t\t length n) *) \r\nand term =\r\n | Rel      of int                            (* DeBruijn index, 1 based    *)\r\n | Meta     of int * local_context\r\n...\r\n```\r\nYou have 2 integers, one for the length and one for the lift, so that compact metas stay compact when you lift them. For some reasons we were calling \"local context\" what is usually called \"local substitution\", and `Meta` means `Evar` in Coq's slang","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/645039835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/645239269","html_url":"https://github.com/coq/coq/issues/12526#issuecomment-645239269","issue_url":"https://api.github.com/repos/coq/coq/issues/12526","id":645239269,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTIzOTI2OQ==","user":{"login":"SkySkimmer","id":2461932,"node_id":"MDQ6VXNlcjI0NjE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2461932?v=4","gravatar_id":"","url":"https://api.github.com/users/SkySkimmer","html_url":"https://github.com/SkySkimmer","followers_url":"https://api.github.com/users/SkySkimmer/followers","following_url":"https://api.github.com/users/SkySkimmer/following{/other_user}","gists_url":"https://api.github.com/users/SkySkimmer/gists{/gist_id}","starred_url":"https://api.github.com/users/SkySkimmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SkySkimmer/subscriptions","organizations_url":"https://api.github.com/users/SkySkimmer/orgs","repos_url":"https://api.github.com/users/SkySkimmer/repos","events_url":"https://api.github.com/users/SkySkimmer/events{/privacy}","received_events_url":"https://api.github.com/users/SkySkimmer/received_events","type":"User","site_admin":false},"created_at":"2020-06-17T08:40:46Z","updated_at":"2020-06-17T08:40:46Z","author_association":"CONTRIBUTOR","body":"That sounds like the identity of length `n` is `Rel 1; ... Rel n`, but in Coq it's some arbitrary `Var` list depending on the evar.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/645239269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/645249335","html_url":"https://github.com/coq/coq/issues/12526#issuecomment-645249335","issue_url":"https://api.github.com/repos/coq/coq/issues/12526","id":645249335,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTI0OTMzNQ==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2020-06-17T09:00:26Z","updated_at":"2020-06-17T09:00:26Z","author_association":"MEMBER","body":"We can do a similar thing in Coq, I am envisioning a type of evar substitutions defined as\r\n```ocaml\r\ntype subst = constr list * int\r\n```\r\nwhere the integer signals the length of the prefix of the substitution that is canonically generated from the evar context.\r\n\r\nBut this doesn't change the fact this requires a lot of changes to the API and that you need to preserve a quotient.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/645249335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/645312202","html_url":"https://github.com/coq/coq/issues/12526#issuecomment-645312202","issue_url":"https://api.github.com/repos/coq/coq/issues/12526","id":645312202,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTMxMjIwMg==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2020-06-17T11:16:22Z","updated_at":"2020-06-17T11:16:22Z","author_association":"MEMBER","body":"@SkySkimmer if we *forbid* clearing of section hyps, then their names are fixed and an integer can represent a prefix of that list","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/645312202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]