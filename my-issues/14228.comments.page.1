[{"url":"https://api.github.com/repos/coq/coq/issues/comments/830631889","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830631889","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830631889,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDYzMTg4OQ==","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T13:20:19Z","updated_at":"2021-05-01T13:20:19Z","author_association":"MEMBER","body":"No idea what is going on, seems your OCaml env got botched somehow; note that in this case the error is at link time for the coqworkmgr which is a install dep but it doesnt get build on `world`\r\n\r\nCoq's CI is testing this target by the way.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830631889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/830632018","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830632018","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830632018,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDYzMjAxOA==","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T13:21:09Z","updated_at":"2021-05-01T13:21:09Z","author_association":"MEMBER","body":"You can try doing `dune build coq-core.install` in the build step to see if the error is due to different run phases.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830632018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/830633069","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830633069","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830633069,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDYzMzA2OQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T13:27:44Z","updated_at":"2021-05-01T13:27:44Z","author_association":"MEMBER","body":"Coq's CI is testing install to ` \"$(pwd)/_install_ci\"`.  I believe changing this to `/use/local` is enough to break the CI target, since I literally copy-pasted from Coq's CI otherwise.  Is there any reason that the CI tests an install to ` \"$(pwd)/_install_ci\"` rather than a global location?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830633069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/830633412","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830633412","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830633412,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDYzMzQxMg==","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T13:30:21Z","updated_at":"2021-05-01T13:30:21Z","author_association":"MEMBER","body":"I would be very surprised if the problem would be due to that, as it arises even before any use for prefix is done.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830633412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/830633509","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830633509","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830633509,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDYzMzUwOQ==","user":{"login":"SkySkimmer","id":2461932,"node_id":"MDQ6VXNlcjI0NjE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2461932?v=4","gravatar_id":"","url":"https://api.github.com/users/SkySkimmer","html_url":"https://github.com/SkySkimmer","followers_url":"https://api.github.com/users/SkySkimmer/followers","following_url":"https://api.github.com/users/SkySkimmer/following{/other_user}","gists_url":"https://api.github.com/users/SkySkimmer/gists{/gist_id}","starred_url":"https://api.github.com/users/SkySkimmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SkySkimmer/subscriptions","organizations_url":"https://api.github.com/users/SkySkimmer/orgs","repos_url":"https://api.github.com/users/SkySkimmer/repos","events_url":"https://api.github.com/users/SkySkimmer/events{/privacy}","received_events_url":"https://api.github.com/users/SkySkimmer/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T13:31:02Z","updated_at":"2021-05-01T13:31:18Z","author_association":"CONTRIBUTOR","body":"\r\n>This is very wonky, why does the install target try to open zarith?\r\n\r\nIt's called install but it really means build.\r\n\r\n>Coq's CI is testing install to \"$(pwd)/_install_ci\". I believe changing this to /use/local is enough to break the CI target, since I literally copy-pasted from Coq's CI otherwise. Is there any reason that the CI tests an install to \"$(pwd)/_install_ci\" rather than a global location?\r\n\r\nBecause artifacts must be subdirectories.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830633509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/830633893","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830633893","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830633893,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDYzMzg5Mw==","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T13:33:37Z","updated_at":"2021-05-01T13:33:37Z","author_association":"MEMBER","body":"> It's called install but it really means build.\r\n\r\nIndeed it builds the list of files to install, which depends on the files themselves, `world` misses this coqwrkmgr` file, we could add it of course to coqbinaries","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830633893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/830668846","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830668846","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830668846,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDY2ODg0Ng==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T17:50:32Z","updated_at":"2021-05-01T17:50:32Z","author_association":"MEMBER","body":"> I would be very surprised if the problem would be due to that, as it arises even before any use for prefix is done.\r\n\r\nIs it because I'm not setting `MACOSX_DEPLOYMENT_TARGET: \"10.11\"` when installing OCaml dependencies?  (That variable is set but not explicitly used, so I have no idea what it does, and did not copy it over.)  Moving on to more unlikely hypotheses, is it because I `set -e` when installing OCaml dependencies? Or because I neglect to `make byte` before `make`?  Or because I call `make install` rather than `make install install-byte`?  Or can you spot any relevant difference between\r\nhttps://github.com/mit-plv/fiat-crypto/blob/98864bbde575242334b97e5a9059e6224e82be76/.github/workflows/coq-macos.yml#L12-L57\r\nand\r\nhttps://github.com/coq/coq/blob/6bd39f29e675e125edfcb1dcb7a0fc5997049741/.github/workflows/ci.yml#L30-L70\r\n?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830668846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/830669622","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830669622","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830669622,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDY2OTYyMg==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T17:55:55Z","updated_at":"2021-05-01T17:55:55Z","author_association":"MEMBER","body":"Ah, I think this error results from running `make` under `sudo`.  But if `make install` fails both with and without `sudo` this is very bad.  Does `sudo` reset the opam environment or something?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830669622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/830670201","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830670201","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830670201,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDY3MDIwMQ==","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T17:59:54Z","updated_at":"2021-05-01T18:00:13Z","author_association":"MEMBER","body":"Oh, good point; we should strengthen the world target a bit indeed, it has to respect dune's install / build boundaries as `install` may be called with sudo and build not.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830670201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/830681388","html_url":"https://github.com/coq/coq/issues/14228#issuecomment-830681388","issue_url":"https://api.github.com/repos/coq/coq/issues/14228","id":830681388,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDY4MTM4OA==","user":{"login":"Zimmi48","id":1108325,"node_id":"MDQ6VXNlcjExMDgzMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1108325?v=4","gravatar_id":"","url":"https://api.github.com/users/Zimmi48","html_url":"https://github.com/Zimmi48","followers_url":"https://api.github.com/users/Zimmi48/followers","following_url":"https://api.github.com/users/Zimmi48/following{/other_user}","gists_url":"https://api.github.com/users/Zimmi48/gists{/gist_id}","starred_url":"https://api.github.com/users/Zimmi48/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zimmi48/subscriptions","organizations_url":"https://api.github.com/users/Zimmi48/orgs","repos_url":"https://api.github.com/users/Zimmi48/repos","events_url":"https://api.github.com/users/Zimmi48/events{/privacy}","received_events_url":"https://api.github.com/users/Zimmi48/received_events","type":"User","site_admin":false},"created_at":"2021-05-01T19:20:14Z","updated_at":"2021-05-01T19:20:14Z","author_association":"MEMBER","body":"> Is it because I'm not setting `MACOSX_DEPLOYMENT_TARGET: \"10.11\"` when installing OCaml dependencies?\r\n\r\nWe shoud clear this up. This was only useful for the dmg bundle.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/830681388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]