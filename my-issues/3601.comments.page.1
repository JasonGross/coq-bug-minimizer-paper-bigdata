[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523884","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523884","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523884,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzg4NA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T14:02:10Z","updated_at":"2017-10-18T09:30:49Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nSometimes, I want to build a term interactively by hand, and it just so happens that some of my holes are typeclasses, and because my term is so unconstrained, typeclass resolution picks up the wrong terms.  Then I have to go annotate the holes with `(_ : id _)` or something similarly silly to stop typeclass resolution.  It would be nice to have a variant of [refine] that doesn't trigger typeclass resolution at all.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523885","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523885","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523885,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzg4NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T15:32:45Z","updated_at":"2017-10-18T09:30:49Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nHum, unless things changed again the \"open_constr\" Ltac type should not trigger TC inference.  Maybe you can code this version of refine yourself.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523886","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523886","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523886,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzg4Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T15:34:28Z","updated_at":"2017-10-18T09:30:49Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nOh, right.  Should this be closed, then?\n\n(Does [refine] make any use of the type of the goal to typecheck the term being refined in ways that [open_constr] doesn't?)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523891","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523891","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523891,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzg5MQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T15:40:02Z","updated_at":"2017-10-18T09:30:50Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nFirst try, then if it works close the bug.\n\nI think you should make your refine actually refine the (term : goal) or something like that.  Yes, type inference is somewhat bidirectional.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523893","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523893","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523893,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzg5Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T16:38:11Z","updated_at":"2017-10-18T09:30:50Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nIt does not seem to work (example by Mike Shulman):\n\nTactic Notation \"refine_noTC\" open_constr(term) := refine term.\nClass foo.\nInstance f : foo.\nDefinition bar `{foo} : Type := Type.\nDefinition baz : Type.\nrefine_noTC (@ bar _).\nDefined.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523895","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523895","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523895,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzg5NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T16:40:09Z","updated_at":"2017-10-18T09:30:50Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nAlso, open_constr leaves evars, not dependent goals.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523897","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523897","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523897,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzg5Nw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T18:36:08Z","updated_at":"2017-10-18T09:30:50Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nMy memory is about 85f1d9ca4b10a80be6929c81e2e6ca4c7634f619\nthat also had a counterpart in 8.4 at about the time of the ssr\n1.5 release.\n\nThere should also be a discussion on codev.  IIRC there was an idea\nof exporting to LTac a data type for that, but I don't have time to dig.\nSomething like open_contr_noTC ... \n\nCiao,\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523899","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523899","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523899,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzg5OQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T19:43:52Z","updated_at":"2017-10-18T09:30:51Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\n`git grep` informs me that v8.4 has `open_constr_wTC`, and trunk does not.  This seems to suggest that 8.5 should not do typeclass resolution with just open_constr, but this doesn't seem to be the case, at least according to my one test.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523901","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523901","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523901,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzkwMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T22:11:21Z","updated_at":"2017-10-18T09:30:51Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nThen it means that the argument to refine is interpreted without forcing TC resolution.  Then it may be the tactic itself that triggers the resolution.\nIn this case you feature request makes sense.\nThe expert is Arnaud here.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523903","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523903","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523903,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzkwMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-09T22:32:05Z","updated_at":"2017-10-18T09:30:51Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nIt seems that it's being done at argument resolution time, in both [refine] and [open_constr]?\n\nClass foo := x : Set.\nDefinition bar `{foo} := (_ : foo).\nDefinition f' : foo := unit.\nInstance f : foo := nat.\nTactic Notation \"refine_noTC'\" open_constr(term) := idtac term; unify term (@ bar f).\nTactic Notation \"refine_noTC\" open_constr(term) := idtac term; unify term (@ bar f').\nDefinition baz : Type.\nSet Printing All.\nsolve [ refine (@ bar _) ]. (* success *)\nUndo.\nrefine_noTC' (@ bar _). (* success *)\nrefine_noTC (@ bar _).  (* failure *)\nDefined.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523906","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523906","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523906,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzkwNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-09-12T15:53:39Z","updated_at":"2017-10-18T09:30:51Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nI am not really in favour of a proliferation of special case tactics. I'm not convinced such a tactic would actually be worth the effort. In particular, my guess is that most of the time, one would have type-classes which they want solved and type-classes which they want left untouched.\n\nI suspect that more control in the way type-checking treats hole is rather the way to go. Until such a feature is available, I think your workaround is not so bad (you could use a notation ntc := (_:id _) maybe ?).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523909","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523909","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523909,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzkwOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-02T15:22:51Z","updated_at":"2017-10-18T09:30:52Z","author_association":"CONTRIBUTOR","body":"Comment author: @jonleivent\n\nVadim Zaliva recently asked on Coq-Club about a case similar to this that can't be satisfied by \"(_ : id _)\":\n\nClass A (n:nat) : Prop.\nDefinition f (n:nat) `{A n} := n.\nDefinition g (n:nat) := n.\nLemma Foo:  forall x, f (g x) = x.\n\nWhat is wanted is to turn the {A n} implicit arg into a subgoal instead of doing a typeclass search (which fails in this case).  Currently (even in 8.6) this can only be done by:\n\nClass A (n:nat) : Prop.\nDefinition f (n:nat) `{A n} := n.\nDefinition g (n:nat) := n.\nLemma Foo:  forall x, exists w, @ f (g x) w = x.\nintro x.\nunshelve eexists.\n\nIt doesn't work to do this:\n\nClass A (n:nat) : Prop.\nDefinition f (n:nat) `{A n} := n.\nDefinition g (n:nat) := n.\nLemma Foo:  forall x, @ f (g x) (_:id _) = x.\n\nor use open_constr.\n\nAs Vadim pointed out, for more complex cases, having to insert the necessary \"exists\" in the right places can be a hassle.\n\nHence, IMHO Jason's original request should be revived.  There should be a way to conveniently denote a hole that one does not want typeclass resolution to run in, and instead wants the hole as a subgoal.\n\nThere have been other cases where alternative hole-types were desired.  There was a discussion a while back on coqdev about holes in refine that shelve vs. holes that don't.  I recall Pierre Courtieu requesting the ability to leave certain holes generalized when applying a lemma instead of generating subgoals for them.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523911","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523911","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523911,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzkxMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-10-13T02:06:54Z","updated_at":"2017-10-18T09:30:52Z","author_association":"CONTRIBUTOR","body":"Comment author: @vzaliva\n\nAnother approach is to consider something like `Program` mechanism for typeclass resolution. Like obligations, typeclass instances then could be resolved either automatically or manually with something like \"next obligation\".\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523912","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-337523912","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":337523912,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMzkxMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-10-13T02:31:56Z","updated_at":"2017-10-18T09:30:53Z","author_association":"CONTRIBUTOR","body":"Comment author: @jonleivent\n\nHow about generalizing Vadim's latest obligation suggestion to have a way to cause any hole (evar), typeclass-typed or otherwise, to become a Program-style obligation.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337523912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/617264671","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-617264671","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":617264671,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzI2NDY3MQ==","user":{"login":"Blaisorblade","id":289960,"node_id":"MDQ6VXNlcjI4OTk2MA==","avatar_url":"https://avatars.githubusercontent.com/u/289960?v=4","gravatar_id":"","url":"https://api.github.com/users/Blaisorblade","html_url":"https://github.com/Blaisorblade","followers_url":"https://api.github.com/users/Blaisorblade/followers","following_url":"https://api.github.com/users/Blaisorblade/following{/other_user}","gists_url":"https://api.github.com/users/Blaisorblade/gists{/gist_id}","starred_url":"https://api.github.com/users/Blaisorblade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Blaisorblade/subscriptions","organizations_url":"https://api.github.com/users/Blaisorblade/orgs","repos_url":"https://api.github.com/users/Blaisorblade/repos","events_url":"https://api.github.com/users/Blaisorblade/events{/privacy}","received_events_url":"https://api.github.com/users/Blaisorblade/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T16:19:00Z","updated_at":"2020-04-21T16:19:00Z","author_association":"CONTRIBUTOR","body":"Nowadays we have `notypeclasses refine`; is this enough to close this issue?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/617264671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/617288988","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-617288988","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":617288988,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzI4ODk4OA==","user":{"login":"jonleivent","id":7363878,"node_id":"MDQ6VXNlcjczNjM4Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/7363878?v=4","gravatar_id":"","url":"https://api.github.com/users/jonleivent","html_url":"https://github.com/jonleivent","followers_url":"https://api.github.com/users/jonleivent/followers","following_url":"https://api.github.com/users/jonleivent/following{/other_user}","gists_url":"https://api.github.com/users/jonleivent/gists{/gist_id}","starred_url":"https://api.github.com/users/jonleivent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonleivent/subscriptions","organizations_url":"https://api.github.com/users/jonleivent/orgs","repos_url":"https://api.github.com/users/jonleivent/repos","events_url":"https://api.github.com/users/jonleivent/events{/privacy}","received_events_url":"https://api.github.com/users/jonleivent/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T17:03:57Z","updated_at":"2020-04-21T17:03:57Z","author_association":"NONE","body":"I'll let Jason comment on whether `notypeclasses refine` closes the part of the issue he raised.  I don't see how it helps Vadim's example, as that fails in the definition line of the Foo lemma, and so a tactic wouldn't be sufficient to fix it.  Maybe the two sub-issues need to be separated?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/617288988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/617307228","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-617307228","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":617307228,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzMwNzIyOA==","user":{"login":"Blaisorblade","id":289960,"node_id":"MDQ6VXNlcjI4OTk2MA==","avatar_url":"https://avatars.githubusercontent.com/u/289960?v=4","gravatar_id":"","url":"https://api.github.com/users/Blaisorblade","html_url":"https://github.com/Blaisorblade","followers_url":"https://api.github.com/users/Blaisorblade/followers","following_url":"https://api.github.com/users/Blaisorblade/following{/other_user}","gists_url":"https://api.github.com/users/Blaisorblade/gists{/gist_id}","starred_url":"https://api.github.com/users/Blaisorblade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Blaisorblade/subscriptions","organizations_url":"https://api.github.com/users/Blaisorblade/orgs","repos_url":"https://api.github.com/users/Blaisorblade/repos","events_url":"https://api.github.com/users/Blaisorblade/events{/privacy}","received_events_url":"https://api.github.com/users/Blaisorblade/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T17:34:15Z","updated_at":"2020-04-21T17:34:15Z","author_association":"CONTRIBUTOR","body":"@jonleivent Good point, and they should certainly be separated, but currently the only mechanism for holes in statements is to turn those into separate definitions (not even `Program` supports this feature). So currently the correct fix for\r\n```coq\r\nClass A (n:nat) : Prop.\r\nDefinition f (n:nat) `{A n} := n.\r\nDefinition g (n:nat) := n.\r\nLemma Foo: forall x, f (g x) = x.\r\n```\r\n\r\nis\r\n\r\n```coq\r\nClass A (n:nat) : Prop.\r\nDefinition f (n:nat) `{A n} := n.\r\nDefinition g (n:nat) := n.\r\nProgram Definition Foo_stmt := forall x, @f (g x) _ = x.\r\nNext Obligation. (* Proof. *) Defined.\r\nLemma Foo: Foo_stmt.\r\n```\r\nAnd that `_` should ideally be `_[notc]` from https://github.com/coq/coq/issues/12147, to avoid the search altogether. Alternatively, just give a separate definition for the typeclass instance as a `Local Instance`, or a `Lemma` to apply by hand; I'd struggle to imagine usecases where that's a significant problem.\r\n\r\nI also agree this fix is sometimes not ideal, but this is a much bigger feature request  (and I'm not sure it'd be taken under consideration).","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/617307228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/617331537","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-617331537","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":617331537,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzMzMTUzNw==","user":{"login":"jonleivent","id":7363878,"node_id":"MDQ6VXNlcjczNjM4Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/7363878?v=4","gravatar_id":"","url":"https://api.github.com/users/jonleivent","html_url":"https://github.com/jonleivent","followers_url":"https://api.github.com/users/jonleivent/followers","following_url":"https://api.github.com/users/jonleivent/following{/other_user}","gists_url":"https://api.github.com/users/jonleivent/gists{/gist_id}","starred_url":"https://api.github.com/users/jonleivent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonleivent/subscriptions","organizations_url":"https://api.github.com/users/jonleivent/orgs","repos_url":"https://api.github.com/users/jonleivent/repos","events_url":"https://api.github.com/users/jonleivent/events{/privacy}","received_events_url":"https://api.github.com/users/jonleivent/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T18:19:28Z","updated_at":"2020-04-21T18:19:28Z","author_association":"NONE","body":"I just tried your `Program Definition Foo_stmt` example above, and got:\r\n`Error: (in proof temporary_proof3): Attempt to save an incomplete proof`\r\nAm I missing something?  I'm using Coq 8.11.0.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/617331537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/617332117","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-617332117","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":617332117,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzMzMjExNw==","user":{"login":"jonleivent","id":7363878,"node_id":"MDQ6VXNlcjczNjM4Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/7363878?v=4","gravatar_id":"","url":"https://api.github.com/users/jonleivent","html_url":"https://github.com/jonleivent","followers_url":"https://api.github.com/users/jonleivent/followers","following_url":"https://api.github.com/users/jonleivent/following{/other_user}","gists_url":"https://api.github.com/users/jonleivent/gists{/gist_id}","starred_url":"https://api.github.com/users/jonleivent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonleivent/subscriptions","organizations_url":"https://api.github.com/users/jonleivent/orgs","repos_url":"https://api.github.com/users/jonleivent/repos","events_url":"https://api.github.com/users/jonleivent/events{/privacy}","received_events_url":"https://api.github.com/users/jonleivent/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T18:20:31Z","updated_at":"2020-04-21T18:20:31Z","author_association":"NONE","body":"Never mind, I had `Foo_stmt : forall...` instead of `Foo_stmt := forall`.\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/617332117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/617359136","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-617359136","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":617359136,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzM1OTEzNg==","user":{"login":"jonleivent","id":7363878,"node_id":"MDQ6VXNlcjczNjM4Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/7363878?v=4","gravatar_id":"","url":"https://api.github.com/users/jonleivent","html_url":"https://github.com/jonleivent","followers_url":"https://api.github.com/users/jonleivent/followers","following_url":"https://api.github.com/users/jonleivent/following{/other_user}","gists_url":"https://api.github.com/users/jonleivent/gists{/gist_id}","starred_url":"https://api.github.com/users/jonleivent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonleivent/subscriptions","organizations_url":"https://api.github.com/users/jonleivent/orgs","repos_url":"https://api.github.com/users/jonleivent/repos","events_url":"https://api.github.com/users/jonleivent/events{/privacy}","received_events_url":"https://api.github.com/users/jonleivent/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T19:13:02Z","updated_at":"2020-04-21T20:55:36Z","author_association":"NONE","body":"I am not able to find Vadim's original email request (it's been a few years).  However, if the problem was one of keeping the syntax simple by allowing implicit args without having to place '_' in all the holes, as well as preventing inappropriate instantiation, then one possibility is a section:\r\n```coq\r\nClass A (n:nat) : Prop.\r\nDefinition f (n:nat) `{A n} := n.\r\nDefinition g (n:nat) := n.\r\nSection Bar.\r\n  Context `{forall (n:nat), A n}.\r\n  Lemma Foo: forall x, f (g x) = x.\r\n  Proof. trivial. Qed.\r\nEnd Bar.\r\n```\r\nI suspect this isn't a sufficient fix, as someone would probably have thought of it back then.\r\n\r\nAlso this leaves Foo defined a bit differently from what one would like.  Of course, this still requires the user to provide a Context for each typeclass arg, and there may be many.  Fortunately, Coq will inform the user with an `Unable to satisfy the following constraints:` error for each one - so Contexts can be created by the process of elimination.\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/617359136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/617431735","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-617431735","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":617431735,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzQzMTczNQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2020-04-21T21:47:49Z","updated_at":"2020-04-21T21:47:49Z","author_association":"MEMBER","body":"I'm satisfied with `notypeclasses refine`.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/617431735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/654772655","html_url":"https://github.com/coq/coq/issues/3601#issuecomment-654772655","issue_url":"https://api.github.com/repos/coq/coq/issues/3601","id":654772655,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDc3MjY1NQ==","user":{"login":"SkySkimmer","id":2461932,"node_id":"MDQ6VXNlcjI0NjE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2461932?v=4","gravatar_id":"","url":"https://api.github.com/users/SkySkimmer","html_url":"https://github.com/SkySkimmer","followers_url":"https://api.github.com/users/SkySkimmer/followers","following_url":"https://api.github.com/users/SkySkimmer/following{/other_user}","gists_url":"https://api.github.com/users/SkySkimmer/gists{/gist_id}","starred_url":"https://api.github.com/users/SkySkimmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SkySkimmer/subscriptions","organizations_url":"https://api.github.com/users/SkySkimmer/orgs","repos_url":"https://api.github.com/users/SkySkimmer/repos","events_url":"https://api.github.com/users/SkySkimmer/events{/privacy}","received_events_url":"https://api.github.com/users/SkySkimmer/received_events","type":"User","site_admin":false},"created_at":"2020-07-07T10:56:01Z","updated_at":"2020-07-07T10:56:01Z","author_association":"CONTRIBUTOR","body":"This issue seems done, please open new issues if there are remaining unsatisfactions.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/654772655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]