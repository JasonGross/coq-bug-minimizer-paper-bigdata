[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513184","html_url":"https://github.com/coq/coq/issues/2956#issuecomment-337513184","issue_url":"https://api.github.com/repos/coq/coq/issues/2956","id":337513184,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzE4NA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-01-09T23:44:17Z","updated_at":"2017-10-18T09:00:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nCreated attachment 383\nfile for recreating warning in context of a large development\n\nI got the warning \"Warning: Invalid character '-' in identifier \"_UNBOUND_REL_-1\".\" on a [setoid_rewrite @ lem in H.].  I haven't bothered to try to turn this into a minimal test case; if someone else wants to try to reproduce this, the warning can be triggered on line 259 of the attached file, which is meant to be dropped on top of commit 5c079da61018 https://JasonGross@ bitbucket.org/JasonGross/catdb.  The simple fix for this particular warning is to use a version of string_of_int which, e.g., replaces '-' with '_' in the rendering of negative numbers, or alternatively to check in various places that you don't get a negative ... deBrujin index?\n\n> Attached file: [WarningInvalidIdentifier.v](https://coq.inria.fr/bugfiles/attachment.cgi?id=383) (application/octet-stream, 32977 bytes)\n> Description:   file for recreating warning in context of a large development\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513185","html_url":"https://github.com/coq/coq/issues/2956#issuecomment-337513185","issue_url":"https://api.github.com/repos/coq/coq/issues/2956","id":337513185,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzE4NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-01-09T23:57:58Z","updated_at":"2017-10-18T09:00:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nHere's a smaller block of code which triggers the warning:\n\n  Require Import Setoid.\n\n  Set Implicit Arguments.\n\n  Definition focus' (A : Type) (_ : A) := True.\n  Goal forall (T : Type -> Type)\n     (T0 : forall obj : Type, T obj -> obj -> obj -> Type)\n     (m : forall (obj : Type) (C : T obj) (s d d' : obj),\n          T0 obj C d d' -> T0 obj C s d -> T0 obj C s d')\n     (m0 : forall (obj : Type) (C : T obj) (o : obj), T0 obj C o o),\n   (forall (obj : Type) (C : T obj) (a b : obj) (f : T0 obj C a b),\n    m obj C a a b f (m0 obj C a) = f) ->\n   focus'\n     (fun (objC : Type) (C : T objC) (a a' : objC) \n        (m1 : T0 objC C a a') (x : {αβ : objC * unit & T0 objC C (fst αβ) a}) =>\n      existT (fun ab : objC * unit => T0 objC C (fst ab) a') \n        (projT1 x)\n        (m objC C (fst (projT1 x)) a a' m1\n           (m objC C (fst (projT1 x)) (fst (projT1 x)) a \n              (projT2 x) (m0 objC C (fst (projT1 x)))))) -> False.\n  intros ? ? ? ? H H0.\n  setoid_rewrite H in H0.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513186","html_url":"https://github.com/coq/coq/issues/2956#issuecomment-337513186","issue_url":"https://api.github.com/repos/coq/coq/issues/2956","id":337513186,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzE4Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-01-10T00:10:07Z","updated_at":"2017-10-18T09:00:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nHere's a slightly shorter version:\n\n  Require Import Setoid.\n\n  Set Implicit Arguments.\n\n  Definition focus' (A : Type) (_ : A) := True.\n  Goal forall (T : Type -> Type)\n              (T0 : forall obj : Type, T obj -> obj -> obj -> Type)\n              (m : forall (obj : Type) (C : T obj) (s d d' : obj),\n                     T0 obj C d d' -> T0 obj C s d -> T0 obj C s d')\n              (m0 : forall (obj : Type) (C : T obj) (o : obj), T0 obj C o o),\n         (forall (obj : Type) (C : T obj) (a b : obj) (f : T0 obj C a b),\n            m obj C a a b f (m0 obj C a) = f) ->\n         focus\n           (fun (objC : Type) (C : T objC) (a _ : objC)\n                (x : {ab : objC & T0 objC C ab a}) =>\n              existT (fun ab : objC => T0 objC C ab a) (projT1 x)\n                     (m objC C (projT1 x) (projT1 x) a (projT2 x) (m0 objC C (projT1 x)))) ->\n         False.\n  intros.\n  setoid_rewrite H in H0.\n\nIf you remove the [_] after [a] in [focus (fun (objC : Type) (C : T objC) (a _ : objC)], then instead you get a \"Tactic failure:setoid rewrite failed: Unable to satisfy the rewriting constraints.\"\n\n\nBy the way, the nicely named version of this example (what I use in my code) is:\n\n                  focus\n                    (fun (objC : Type) (C : SpecializedCategory objC) \n                         (a a' : objC)\n                         (x : {ab : objC & Morphism C ab a}) =>\n                       existT (fun ab : objC => Morphism C ab a) \n                              (projT1 x)\n                              (Compose (projT2 x) (Identity (projT1 x))))\n\nand [H] is then [RightIdentity].\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513188","html_url":"https://github.com/coq/coq/issues/2956#issuecomment-337513188","issue_url":"https://api.github.com/repos/coq/coq/issues/2956","id":337513188,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzE4OA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-01-29T20:55:55Z","updated_at":"2017-10-18T09:00:00Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\n\nComment on attachment 383\nfile for recreating warning in context of a large development\n\nHi Jason, your file depends on other files that are missing. Can you provide a full reproducible development, or, better, an as-short-as-possible example. Thanks in advance.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513190","html_url":"https://github.com/coq/coq/issues/2956#issuecomment-337513190","issue_url":"https://api.github.com/repos/coq/coq/issues/2956","id":337513190,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzE5MA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-01-29T20:56:28Z","updated_at":"2017-10-18T09:00:01Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\n\nOups, sorry, did not read comments...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513192","html_url":"https://github.com/coq/coq/issues/2956#issuecomment-337513192","issue_url":"https://api.github.com/repos/coq/coq/issues/2956","id":337513192,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzE5Mg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-01-29T21:13:31Z","updated_at":"2017-10-18T09:00:01Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\n\nIt seems like the message that contains _UNBOUND_REL_NN names is a debugging message from setoid rewrite that is not intended to be displayed. I don't know how to resolve this though,\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513193","html_url":"https://github.com/coq/coq/issues/2956#issuecomment-337513193","issue_url":"https://api.github.com/repos/coq/coq/issues/2956","id":337513193,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzE5Mw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-03-21T22:52:54Z","updated_at":"2017-10-18T09:00:01Z","author_association":"CONTRIBUTOR","body":"Comment author: @letouzey\n\n\nSo two separate questions:\n - should we leave these debug prints in standard setoid_rewrite ?\n - does the UNBOUND_REL_-1 indicates a underlying bug ?\n\nMatthieu ?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513194","html_url":"https://github.com/coq/coq/issues/2956#issuecomment-337513194","issue_url":"https://api.github.com/repos/coq/coq/issues/2956","id":337513194,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxMzE5NA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-06-19T10:58:41Z","updated_at":"2017-10-18T09:00:01Z","author_association":"CONTRIBUTOR","body":"Comment author: @mattam82\n\nThis particular bug has been fixed in trunk (no unbound rel should not produced).\nAdding the following constraints, the setoid_rewrite even succeeds now:\n\nRequire Import Logic.FunctionalExtensionality.\n  Set Implicit Arguments.\n(* Remove the less general instance defined in the standard library *)\n\nRemove Hints reflexive_eq_dom_reflexive : typeclass_instances.\n\nInstance reflexive_eq_dom_reflexive {A B} {R : relation A} {R' : relation B} :\n subrelation R eq -> Reflexive R' -> Reflexive (R ==> R')%signature.\nProof. simpl_relation. specialize (H x0 y H1). subst. reflexivity. Qed.\n\nInstance funext_eq_sub_rec (A B : Type) (R : relation B) :\n subrelation R eq ->\n subrelation (pointwise_relation A R) (@ eq (A -> B)).\nProof. intros sub f g H. extensionality x. apply (sub (f x) (g x)). now apply H. Qed.\n\nInstance funext_forall_eq_sub_rec A (B : A -> Type) (f : forall x : A, relation (B x)) :\n (forall x : A, subrelation (f x) eq) ->\n subrelation (forall_relation f) (@ eq (forall x : A, B x)).\nProof. intros sub x y H. extensionality t. apply (sub t (x t) (y t)). now apply H. Qed.\n\nThis assumes functional extensionality to go under binders.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337513194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]