[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538501","html_url":"https://github.com/coq/coq/issues/4471#issuecomment-337538501","issue_url":"https://api.github.com/repos/coq/coq/issues/4471","id":337538501,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzODUwMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-12-31T02:15:33Z","updated_at":"2017-10-18T10:13:27Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nAxiom proof_admitted : False.\nGoal forall (A B : Type) (P : forall _ : prod A B, Type) (a : A) (b : B) (p p0 : forall (x : A) (x' : B), P (@ pair A B x x')),\n    @ eq (P (@ pair A B a b)) (p (@ fst A B (@ pair A B a b)) (@ snd A B (@ pair A B a b)))\n        (p0 (@ fst A B (@ pair A B a b)) (@ snd A B (@ pair A B a b))).\nProof.\n  intros.\n  generalize dependent (a, b). (* succeed in trunk, fails in 8.5rc1 *)\n  abstract case proof_admitted.\n\n\nHere is a script that passes in 8.5rc1, but fails in trunk:\n\nAxiom proof_admitted : False.\nGoal forall (A B : Type) (P : forall _ : prod A B, Type) (a : A) (b : B) (p p0 : forall (x : A) (x' : B), P (@ pair A B x x')),\n    @ eq (P (@ pair A B a b)) (p (@ fst A B (@ pair A B a b)) (@ snd A B (@ pair A B a b)))\n        (p0 (@ fst A B (@ pair A B a b)) (@ snd A B (@ pair A B a b))).\nProof.\n  intros.\n  try generalize dependent (a, b);\n  abstract case proof_admitted. (* Error: Illegal application:\nThe term \"@ eq\" of type \"forall A : Type, A -> A -> Prop\"\ncannot be applied to the terms\n \"P p1\" : \"Type\"\n \"p (fst p1) (snd p1)\" : \"P (fst p1, snd p1)\"\n \"p0 (fst p1) (snd p1)\" : \"P (fst p1, snd p1)\"\nThe 2nd term has type \"P (fst p1, snd p1)\" which should be coercible to \"P p1\". *)\nQed.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538502","html_url":"https://github.com/coq/coq/issues/4471#issuecomment-337538502","issue_url":"https://api.github.com/repos/coq/coq/issues/4471","id":337538502,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzODUwMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T14:24:57Z","updated_at":"2017-10-18T10:13:27Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThis bug has been introduced by commit 37ab45726. I'm investigating it.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538504","html_url":"https://github.com/coq/coq/issues/4471#issuecomment-337538504","issue_url":"https://api.github.com/repos/coq/coq/issues/4471","id":337538504,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzODUwNA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T14:58:56Z","updated_at":"2017-10-18T10:13:27Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nFixed by 024cf5a.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538506","html_url":"https://github.com/coq/coq/issues/4471#issuecomment-337538506","issue_url":"https://api.github.com/repos/coq/coq/issues/4471","id":337538506,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzODUwNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T15:00:33Z","updated_at":"2017-10-18T10:13:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nAre you sure this is the right fix? I don't understand why we keep having these idioms of unsafe primitives (like apply_type, from what you say) and local safety checks in tactics. It is just calling for problems... Why not safe primitives instead?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538508","html_url":"https://github.com/coq/coq/issues/4471#issuecomment-337538508","issue_url":"https://api.github.com/repos/coq/coq/issues/4471","id":337538508,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzODUwOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T15:11:23Z","updated_at":"2017-10-18T10:13:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nIs there a trade off between efficiency and safety here?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538510","html_url":"https://github.com/coq/coq/issues/4471#issuecomment-337538510","issue_url":"https://api.github.com/repos/coq/coq/issues/4471","id":337538510,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzODUxMA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T15:14:32Z","updated_at":"2017-10-18T10:13:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nHaving some unsafe primitives for the cases when a check is not required, and efficiency is critical probably make sense. But using by default an unsafe primitive, including when it is just incorrect (like here) is certainly not the way we should recommend.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538512","html_url":"https://github.com/coq/coq/issues/4471#issuecomment-337538512","issue_url":"https://api.github.com/repos/coq/coq/issues/4471","id":337538512,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzODUxMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T16:25:17Z","updated_at":"2017-10-18T10:13:28Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\n\nMaxime: You're complaining but what are you proposing, concretely?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538515","html_url":"https://github.com/coq/coq/issues/4471#issuecomment-337538515","issue_url":"https://api.github.com/repos/coq/coq/issues/4471","id":337538515,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzODUxNQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T16:32:19Z","updated_at":"2017-10-18T10:13:29Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nA full-fledged safe refine is costly indeed. Here, we know that we only have to check the well-formedness of the generalized goal (just as in, say, a dependent pattern-matching) so that it is always better to just do that. Otherwise, Jason is going to legitimately pop up with examples that take 5 seconds to execute on goals with hypotheses larger than the garden of my uncle ('en français dans le texte').\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538517","html_url":"https://github.com/coq/coq/issues/4471#issuecomment-337538517","issue_url":"https://api.github.com/repos/coq/coq/issues/4471","id":337538517,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzODUxNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-30T16:41:07Z","updated_at":"2017-10-18T10:13:29Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThat said, I deeply agree that having the unsafe flag of refine turned on by default is pure madness. I tend to think we should fix that before the release of 8.6, but we're a bit in a rush...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337538517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]