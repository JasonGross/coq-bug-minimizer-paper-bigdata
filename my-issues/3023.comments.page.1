[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514223","html_url":"https://github.com/coq/coq/issues/3023#issuecomment-337514223","issue_url":"https://api.github.com/repos/coq/coq/issues/3023","id":337514223,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNDIyMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-04-07T20:02:58Z","updated_at":"2017-10-18T09:03:07Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThe second [revert] should not give a type error.   I suspect it has something to do with the type annotation on the [eq_refl] getting lost on [simpl].\n\nSet Implicit Arguments.\nGeneralizable All Variables.\n\nRecord Category {obj : Type} :=\n  {\n    Morphism : obj -> obj -> Type;\n\n    Identity : forall x, Morphism x x;\n    Compose : forall s d d', Morphism d d' -> Morphism s d -> Morphism s d';\n    LeftIdentity : forall a b (f : Morphism a b), Compose (Identity b) f = f\n  }.\n\n\nSection DiscreteAdjoints.\n  Let C := {|\n            Morphism := (fun X Y : Type => X -> Y);\n            Identity := (fun X : Type => (fun x : X => x));\n            Compose := (fun _ _ _ f g => (fun x => f (g x)));\n            LeftIdentity := (fun X Y p => @ eq_refl _ p : (fun x : X => p x) = p)\n          |}.\n  Variable ObjectFunctor : C = C.\n\n  Goal True.\n  Proof.\n    subst C.\n    revert ObjectFunctor.\n    intro ObjectFunctor.\n    simpl in ObjectFunctor.\n    revert ObjectFunctor. (* Toplevel input, characters 15-35:\nError: Illegal application (Type Error): \nThe term \"Build_Category\" of type\n \"forall (obj : Type) (Morphism : obj -> obj -> Type)\n    (Identity : forall x : obj, Morphism x x)\n    (Compose : forall s d d' : obj,\n               Morphism d d' -> Morphism s d -> Morphism s d'),\n  (forall (a b : obj) (f : Morphism a b), Compose a b b (Identity b) f = f) ->\n  Category\"\ncannot be applied to the terms\n \"Type\" : \"Type\"\n \"fun X Y : Type => X -> Y\" : \"Type -> Type -> Type\"\n \"fun (X : Type) (x : X) => x\" : \"forall X : Type, X -> X\"\n \"fun (s d d' : Type) (f : d -> d') (g : s -> d) (x : s) => f (g x)\"\n   : \"forall s d d' : Type, (d -> d') -> (s -> d) -> s -> d'\"\n \"fun (X Y : Type) (p : X -> Y) => eq_refl\"\n   : \"forall (X Y : Type) (p : X -> Y), p = p\"\nThe 5th term has type \"forall (X Y : Type) (p : X -> Y), p = p\"\nwhich should be coercible to\n \"forall (a b : Type) (f : (fun X Y : Type => X -> Y) a b),\n  (fun (s d d' : Type) (f0 : d -> d') (g : s -> d) (x : s) => f0 (g x)) a b b\n    ((fun (X : Type) (x : X) => x) b) f = f\". *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514224","html_url":"https://github.com/coq/coq/issues/3023#issuecomment-337514224","issue_url":"https://api.github.com/repos/coq/coq/issues/3023","id":337514224,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNDIyNA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-04-07T22:45:16Z","updated_at":"2017-10-18T09:03:07Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThis works in trunk, FWIW.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514225","html_url":"https://github.com/coq/coq/issues/3023#issuecomment-337514225","issue_url":"https://api.github.com/repos/coq/coq/issues/3023","id":337514225,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNDIyNQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-04-08T02:14:18Z","updated_at":"2017-10-18T09:03:07Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThat's good to know.  I'm running 8.4pl2 on Windows, and it doesn't work there.  Perhaps someone should bisect to figure out what broke it, and backport to the 8.4 branch (assuming there will be an 8.4pl3).  I might set up a script to do this over some time during the next week, if no one does this before me.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514228","html_url":"https://github.com/coq/coq/issues/3023#issuecomment-337514228","issue_url":"https://api.github.com/repos/coq/coq/issues/3023","id":337514228,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNDIyOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-04-08T20:03:42Z","updated_at":"2017-10-18T09:03:07Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\ngit bisect* tells me that it was the following commit which fixed things.  I haven't checked this manually (i.e., making sure that it was this particular error), because coq takes so long to compile.\n\ncommit e88df65bbc64b18da34a4233f680829025ca76d9\nAuthor: msozeau <msozeau@ 85f007b7-540e-0410-9357-904b9bb8a0f7>\nDate:   Tue Jan 22 13:13:34 2013 +0000\n\n    - Fix evarconv so that we have complete eta-conversion:\n      - In the maybeflex/rigid (lambda) case, try eta if the maybeflex doesn't\n    actually unfold (e.g. vars, or the transparent state says it's opaque).\n      - In the flexible/rigid(lambda) case, try eta if miller-pfenning fails\n    (as the stack might not be a purely applicative one). This will zip the\n    flexible term (a case construct most likely) and try eta expansion on it.\n\n\n    git-svn-id: svn+ssh://scm.gforge.inria.fr/svn/coq/trunk@ 16134 85f007b7-540e-0410-9357-904b9bb8a0f7\n\nI'll probably come back with a comment on a manual check soon.\n\n\n\n*the script I used was\n#!/bin/bash\ngit clean -xfd\n./configure -local -with-doc no -coqide no -nomacintegration -without-geoproof\nif [ $? -ne 0 ]; then\n    exit 125; # we failed to configure, so we can't test this commit\nfi\nmake -k \"$@ \"\nmake -k \"$@ \"\nmake -k\nmake\nmake install -k \"$@ \"\nmake install -k\n\ncat > bug.v <<'__EOF'\nSet Implicit Arguments.\nGeneralizable All Variables.\n\nRecord Category {obj : Type} :=\n  {\n    Morphism : obj -> obj -> Type;\n\n    Identity : forall x, Morphism x x;\n    Compose : forall s d d', Morphism d d' -> Morphism s d -> Morphism s d';\n    LeftIdentity : forall a b (f : Morphism a b), Compose (Identity b) f = f\n  }.\n\n\nSection DiscreteAdjoints.\n  Let C := {|\n            Morphism := (fun X Y : Type => X -> Y);\n            Identity := (fun X : Type => (fun x : X => x));\n            Compose := (fun _ _ _ f g => (fun x => f (g x)));\n            LeftIdentity := (fun X Y p => @ eq_refl _ p : (fun x : X => p x) = p)\n          |}.\n  Variable ObjectFunctor : C = C.\n\n  Goal True.\n  Proof.\n    subst C.\n    revert ObjectFunctor.\n    intro ObjectFunctor.\n    simpl in ObjectFunctor.\n    revert ObjectFunctor.\n\n__EOF\n\nif [ ! -e ./bin/coqtop ]; then\n    exit 125 # coqtop does not exist, despite our best efforts, so we can't test for the bug; 125 means \"git bisect skip\"\nfi\n\nERRSTRING=\"$(./bin/coqtop < bug.v 2>&1 | grep 'Error')\"\nif [ ! -z \"$ERRSTRING\" ]; then\n    exit 0; # this is a bad commit, but we must label it \"good\", because we're looking for the first commit where the bug went away\nfi\n\nexit 1; # no error, but we must label it \"bad\", because we are looking for a commit no later than this one\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514230","html_url":"https://github.com/coq/coq/issues/3023#issuecomment-337514230","issue_url":"https://api.github.com/repos/coq/coq/issues/3023","id":337514230,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNDIzMA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2013-04-08T22:31:12Z","updated_at":"2017-10-18T09:03:07Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nManual testing indicates that it does seem to be that commit which fixed the issue.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514232","html_url":"https://github.com/coq/coq/issues/3023#issuecomment-337514232","issue_url":"https://api.github.com/repos/coq/coq/issues/3023","id":337514232,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNDIzMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-01-14T14:56:08Z","updated_at":"2017-10-18T09:03:07Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nShould we consider it fixed then?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514233","html_url":"https://github.com/coq/coq/issues/3023#issuecomment-337514233","issue_url":"https://api.github.com/repos/coq/coq/issues/3023","id":337514233,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUxNDIzMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-01-15T05:14:20Z","updated_at":"2017-10-18T09:03:07Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nUnless you want to backport it to 8.4, yes, probably fixed.  I'd suggest adding it as a test-case that should succeed, though.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337514233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]