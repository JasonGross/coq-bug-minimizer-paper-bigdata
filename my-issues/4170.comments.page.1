[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533717","html_url":"https://github.com/coq/coq/issues/4170#issuecomment-337533717","issue_url":"https://api.github.com/repos/coq/coq/issues/4170","id":337533717,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzMzcxNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-03-30T18:50:32Z","updated_at":"2017-10-18T09:59:18Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nTwo hints are needed to be able to do the desired rewrite.  They should be incorporated into the standard library.\n\nRequire Import Coq.Arith.Arith Coq.Setoids.Setoid Coq.Classes.Morphisms Coq.Arith.Le Coq.Arith.Lt Coq.Program.Basics.\n\nHint Extern 0 => solve [apply reflexivity] : typeclass_instances.\n\nGoal forall x y z, x <= y -> x < z.\nProof.\n  intros x y z H.\n  Fail rewrite H.\nAdmitted.\n\nGlobal Instance le_lt_Proper : Proper (ge ==> le ==> impl) lt.\nProof.\n  repeat intro.\n  eapply lt_le_trans; [ | eassumption ].\n  eapply le_lt_trans; eassumption.\nQed.\n\nGoal forall x y z, x <= y -> x < z.\nProof.\n  intros x y z H.\n  rewrite H.\nAdmitted.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533720","html_url":"https://github.com/coq/coq/issues/4170#issuecomment-337533720","issue_url":"https://api.github.com/repos/coq/coq/issues/4170","id":337533720,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUzMzcyMA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-06-08T08:20:55Z","updated_at":"2017-10-18T09:59:18Z","author_association":"CONTRIBUTOR","body":"Comment author: @silene\n\nI am not an expert about generalized rewriting, but there are nonetheless two points that bother me here.\n\nFirst, why is the hint needed? Is it to paper over a bug somewhere in rewrite? I am surprised the hint was never needed before.\n\nSecond, why does the instance have signature (ge ==> le ==> impl) rather than (le --> le ++> impl)? It seems a bit counter-intuitive (if not plain wrong) to say that \"lt\" is both covariant and contravariant in both arguments.\n\nBy the way, using the signature with explicit variance make the need for the hint disappear. So I feel inclined to modify the standard library that way.\n\nMatthieu, any comment?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337533720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]