[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526912","html_url":"https://github.com/coq/coq/issues/3781#issuecomment-337526912","issue_url":"https://api.github.com/repos/coq/coq/issues/3781","id":337526912,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyNjkxMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-10-28T19:31:23Z","updated_at":"2017-11-19T11:04:55Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n``` coq\r\n\r\nGoal forall A B (x y : A) (f : A -> B) (p : f x = f y), f y = f x.\r\n  intros.\r\n  refine (@ eq_rect _ _ _ (@ eq_refl _ (f x)) _ p).\r\n  Fail intros; exact nat.  (* The command has indeed failed with message:\r\n=> Error:\r\nIn environment\r\nA : Type\r\nB : Type\r\nx : A\r\ny : A\r\nf : A -> B\r\np : f x = f y\r\nUnable to unify \"f x = f x\" with \"(fun X : B => ?Goal0) (f x)\". *)\r\n  Fail exact_no_check (fun b => b = b). (* The command has indeed failed with message:\r\n=> Error:\r\nIn environment\r\nA : Type\r\nB : Type\r\nx, y : A\r\nf : A -> B\r\np : f x = f y\r\nUnable to unify \"?T0 (f y)\" with \"f y = f x\". *)\r\n  intro b. admit.\r\nDefined. (* Toplevel input, characters 15-23:\r\nError: Illegal application:\r\nThe term \"eq_rect\" of type\r\n \"forall (A : Type) (x : A) (P : A -> Type),\r\n  P x -> forall y : A, x = y -> P y\"\r\ncannot be applied to the terms\r\n \"B\" : \"Type\"\r\n \"f x\" : \"B\"\r\n \"fun _ : B => match proof_admitted return Type with\r\n               end\" : \"B -> Type\"\r\n \"eq_refl\" : \"f x = f x\"\r\n \"f y\" : \"B\"\r\n \"p\" : \"f x = f y\"\r\nThe 4th term has type \"f x = f x\" which should be coercible to\r\n \"(fun _ : B => match proof_admitted return Type with\r\n                end) (f x)\". *)\r\n\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526913","html_url":"https://github.com/coq/coq/issues/3781#issuecomment-337526913","issue_url":"https://api.github.com/repos/coq/coq/issues/3781","id":337526913,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyNjkxMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-10-28T19:42:56Z","updated_at":"2017-11-19T11:05:53Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n\r\nNote: This works:\r\n```coq\r\n\r\nGoal forall A B (x y : A) (f : A -> B) (p : f x = f y), f y = f x.\r\n  intros.\r\n  refine (@ eq_rect _ _ _ (@ eq_refl _ (f x)) _ p).\r\n  intro b.\r\n  Fail exact (b = f x).\r\n  refine (b = f x).\r\nDefined.\r\n\r\n```\r\nWhy does [exact] fail here?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526915","html_url":"https://github.com/coq/coq/issues/3781#issuecomment-337526915","issue_url":"https://api.github.com/repos/coq/coq/issues/3781","id":337526915,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyNjkxNQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-10-29T11:29:20Z","updated_at":"2017-10-18T09:39:40Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nExact is not (yet) implemented as a refine. So it may be that it does not do type inference/unification in quite the same way. But IÂ don't have any fine analysis to provide.\n\nI guess that the success of refine is not faulty but it leaves a conversion problem in the environment which you have to respect (and is, unfortunately, not printed). The buggy tactics here seems to be admit which ignores the conversion problems. There are probably other tactic which can do that.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526917","html_url":"https://github.com/coq/coq/issues/3781#issuecomment-337526917","issue_url":"https://api.github.com/repos/coq/coq/issues/3781","id":337526917,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyNjkxNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-10-29T16:34:13Z","updated_at":"2017-10-18T09:39:40Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\n[assumption] also ignores the unification problem.  I think the buggy tactic is the initial [refine], which leaves you with a goal that is actually completely solvable (or at least very constrained) by unification, an no notice that this is the case.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526919","html_url":"https://github.com/coq/coq/issues/3781#issuecomment-337526919","issue_url":"https://api.github.com/repos/coq/coq/issues/3781","id":337526919,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyNjkxOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-10-30T09:31:18Z","updated_at":"2017-10-18T09:39:40Z","author_association":"CONTRIBUTOR","body":"Comment author: @aspiwack\n\nWell there are two (equally valid) views there. You could say that refine should solve the constrained goals (or fail), or you could say that goal printing should print the conversion problems if there are some left.\n\nHugo has also proposed a middle-ground where the internal concept of \"candidates\" (a list of possible solutions to some of the goals) should be exposed, but not the other conversion problems.\n\nI must say that IÂ have no strong opinion about that. Keeping the unification problems is \"more complete\", but it's also more complex.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337526919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/345508552","html_url":"https://github.com/coq/coq/issues/3781#issuecomment-345508552","issue_url":"https://api.github.com/repos/coq/coq/issues/3781","id":345508552,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTUwODU1Mg==","user":{"login":"SkySkimmer","id":2461932,"node_id":"MDQ6VXNlcjI0NjE5MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2461932?v=4","gravatar_id":"","url":"https://api.github.com/users/SkySkimmer","html_url":"https://github.com/SkySkimmer","followers_url":"https://api.github.com/users/SkySkimmer/followers","following_url":"https://api.github.com/users/SkySkimmer/following{/other_user}","gists_url":"https://api.github.com/users/SkySkimmer/gists{/gist_id}","starred_url":"https://api.github.com/users/SkySkimmer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SkySkimmer/subscriptions","organizations_url":"https://api.github.com/users/SkySkimmer/orgs","repos_url":"https://api.github.com/users/SkySkimmer/repos","events_url":"https://api.github.com/users/SkySkimmer/events{/privacy}","received_events_url":"https://api.github.com/users/SkySkimmer/received_events","type":"User","site_admin":false},"created_at":"2017-11-19T11:09:50Z","updated_at":"2017-11-19T11:09:50Z","author_association":"CONTRIBUTOR","body":"> I think the buggy tactic is the initial [refine]\r\n\r\nThe initial refine fails in 8.7.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/345508552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]