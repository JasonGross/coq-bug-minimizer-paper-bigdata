[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547402","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547402","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547402,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQwMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T01:06:39Z","updated_at":"2017-10-18T10:41:54Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nIn the attached development, in src/Specific/FancyMachine256/Barrett.v, there \nis a [vm_compute] that I estimate will take about 2-5 hours to run, while \n[native_compute], [lazy], and [compute] all run in under 0.1 seconds.  The \nsubsequent proof shows a [do] statement that partially reduces one of the \nsubterms; telling it to go around 21 times makes the [vm_compute] take about \n0.4 seconds.  It takes multiple seconds starting at around 16.  What's going on \nhere?\n\nWith the exception of a single [Fail Timeout 5 Eval native_compute in ...] \nline, the attached repo should build with 8.4pl1-8.4pl6, 8.5, 8.5pl1, 8.5pl2, \nand the tip of the v8.6 branch.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547403","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547403","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547403,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQwMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T01:06:46Z","updated_at":"2017-10-18T10:41:55Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nCreated attachment 767\nexample of exponential vm_compute\n\n> Attached file: [slow_fiat_crypto_vm_compute.zip](https://coq.inria.fr/bugfiles/attachment.cgi?id=767) (application/zip, 57856 bytes)\n> Description:   example of exponential vm_compute\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547404","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547404","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547404,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQwNA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T07:04:37Z","updated_at":"2017-10-18T10:41:55Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nIt seems this comes from the whd_all call in Inductiveops.find_mrectype function, which is used in turn in Vnorm...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547406","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547406","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547406,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQwNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T07:08:30Z","updated_at":"2017-10-18T10:41:55Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nBut how can native_compute be fast? It is doing the same call to whd_all, isn't it?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547408","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547408","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547408,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQwOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T07:09:43Z","updated_at":"2017-10-18T10:41:55Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nOh sorry, I misread. You're right that there is a difference between vnorm and nativenorm there. Interesting! I'll have a closer look.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547409","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547409","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547409,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQwOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T14:07:31Z","updated_at":"2017-10-18T10:41:55Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nOK, the difference comes from the implementation of whd_all called. In the native variant, it comes from the kernel, while in the VM variant, it comes from Reductionops (there is a leading open module atop of the file). In particular, the following one-line patch solves your issue:\n\ndiff --git a/pretyping/inductiveops.ml b/pretyping/inductiveops.ml\nindex 214e19f..f37bc81 100644\n--- a/pretyping/inductiveops.ml\n+++ b/pretyping/inductiveops.ml\n@ @  -451,7 +451,7 @ @  let extract_mrectype t =\n     | _ -> raise Not_found\n \n let find_mrectype_vect env sigma c =\n-  let (t, l) = decompose_appvect (whd_all env sigma c) in\n+  let (t, l) = decompose_appvect (Reduction.whd_all env c) in\n   match kind_of_term t with\n     | Ind ind -> (ind, l)\n     | _ -> raise Not_found\n\nI still have no clue why this costs so much though.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547410","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547410","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547410,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQxMA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T14:21:30Z","updated_at":"2017-10-18T10:41:55Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nIsn't this refolding again?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547411","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547411","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547411,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQxMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T14:22:33Z","updated_at":"2017-10-18T10:41:55Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nWasn't this fixed already? But yes, it could be. I'm scrutinizing the code to check this assumption.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547413","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547413","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547413,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQxMw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T14:25:42Z","updated_at":"2017-10-18T10:41:56Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nNo, but wait.\n\nIsn't Reductionops.whd_all doing call by name, while Reduction.whd_all is call by need?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547415","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547415","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547415,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQxNQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T14:27:35Z","updated_at":"2017-10-18T10:41:56Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThe kernel is clearly by-need, but I have no idea about the pretyper. I overheard it was by-name, but it may be rumours!\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547416","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547416","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547416,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQxNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T14:29:43Z","updated_at":"2017-10-18T10:41:56Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nI don't think it has to do with sharing. Even when unsetting the Kernel Term Sharing option, native_compute answers quickly (albeit a little slower than with the option turned on).\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547417","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547417","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547417,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQxNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-22T14:32:01Z","updated_at":"2017-10-18T10:41:56Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nOk, but it is definitely not smart to have these two functions with the same short name... Reductionops.whd_all is call by name it seems.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547418","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547418","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547418,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQxOA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T14:00:51Z","updated_at":"2017-10-18T10:41:56Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nI confirm that it is call-by-name, but I did not find out whether this was the source of the inefficiency. I tried to track down this stepwise, but the terms are so horrendous that it is hard to picture anything out of it, even when relying only on the slightly more palatable output of the Set RAKAM Debug option. What about applying my patch and claim that this bug is fixed?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547419","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547419","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547419,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQxOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T14:02:39Z","updated_at":"2017-10-18T10:41:56Z","author_association":"CONTRIBUTOR","body":"Comment author: @maximedenes\n\nYour patch is fine, but we should also investigate if there isn't a severe inefficiency to fix in the pretyping reduction. Please leave the bug open so that we remember, but you can apply the patch.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547420","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547420","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547420,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQyMA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T19:01:01Z","updated_at":"2017-10-18T10:41:56Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nNote that the correct fix is actually reverting f22ad60. We should probably be aware that the Pretyping version of whd_all is potentially computationally explosive and scan for other uses in the codebase...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547421","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547421","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547421,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQyMQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-23T19:19:58Z","updated_at":"2017-10-18T10:41:57Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nBug fixed in 1e3d73a, leaving it open while the exact cause of slowness is unknown.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547422","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547422","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547422,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQyMg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-24T06:50:11Z","updated_at":"2017-10-18T10:41:57Z","author_association":"CONTRIBUTOR","body":"Comment author: @herbelin\n\nWell done. Sorry for having been trapped by the whd_all overloading. All my support in your further investigations.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547424","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547424","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547424,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQyNA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-24T16:13:02Z","updated_at":"2017-10-18T10:41:57Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nI've pushed a minimalistic test in commit 8463f0a. It is based on Jason's example, but I stripped it down quite a lot to a mere ~250 lines. If somebody wants to fiddle with it to see where things go awry...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547426","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547426","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547426,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQyNg==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-28T08:52:54Z","updated_at":"2017-10-18T10:41:57Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nFrom my experiments, there is a value which keeps being normalized, which is \"forall Name var : Type, Context Name var -> Type\". I don't know why this does not answer immediately, though, as it is already in whf...\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547427","html_url":"https://github.com/coq/coq/issues/5096#issuecomment-337547427","issue_url":"https://api.github.com/repos/coq/coq/issues/5096","id":337547427,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzQyNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-10-07T23:38:08Z","updated_at":"2017-10-18T10:41:57Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThe previous comment was a red herring, this was actually triggered by the printer of terms I war using to debug.\n\nEssentially, I've crawled through the reduction, and I can't find any obvious bug. The steps are the expected ones, and I don't see anything suspicious, which was *not* the case with the refolding bug. The code for the machine seems OK as well. So I'm willing to buy the fact that it is a by-name vs. by-need issue, and I unilaterally decide to close this bug.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]