> doesn't the test-suite have some sort of complexity tests? How do they work? Is it documented how to add one?

The complexity tests in the test suite are based on the idea that if the complexity is different, for a large enough entry, the time difference factor is at least, say, 20, i.e., e.g. 0.5s and 10s, so that even with an approximation of the speed of the processor, we are able to discriminate the two values enough.

To add a test, if I remember correctly, a line of the form `(* Expected time < 2s *)` needs to occur in the file. The reference time is supposed to correspond to a 6120 bogomips and a cross-multiplication is done to adjust to the approximative bogomips of the machine running the test. I don't know `rdtsc`. If it gives a better approximation, that may be a good idea.
Unfortunately the complexity tests are indeed not documented as of today in the test-suite README, even though they seem very useful.
@herbelin I suspect `rdtsc` will give a similarly good approximation, though it should be available even on platforms without bogomips, I think.  I suspect that it will have the benefit, though, of giving a roughly consistent number even across platforms, and should also work on Windows (which does not have bogomips, AFAICT).  See, e.g., https://stackoverflow.com/questions/13772567/how-to-get-the-cpu-cycle-count-in-x86-64-from-c/.  (From https://stackoverflow.com/questions/52158572/whats-up-with-the-half-fence-behavior-of-rdtscp, it seems like maybe you want rdtscp, which is a core-specific time stamp counter value?)
Another option would be to try to get instruction counts from the PMU (Performance Monitor Unit), which is what perf uses.  (See, e.g., https://software.intel.com/en-us/forums/software-tuning-performance-optimization-platform-monitoring/topic/806895 )
