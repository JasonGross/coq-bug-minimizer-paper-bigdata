[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521535","html_url":"https://github.com/coq/coq/issues/3460#issuecomment-337521535","issue_url":"https://api.github.com/repos/coq/coq/issues/3460","id":337521535,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMTUzNQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-07-25T14:07:38Z","updated_at":"2020-02-01T19:55:12Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\r\n\r\n```coq\r\nGoal Set -> Prop.\r\nintro x.\r\nlet r := constr:(@ eq Set x x) in\r\nclear x;\r\n  exact r.\r\nQed. (* Toplevel input, characters 0-4:\r\nError: No such section variable or assumption: x. *)\r\n```\r\nIt would be nice if this were caught at `exact r` or at `clear`, rather than at `Qed` time.  (But only if that doesn't slow things down too much.)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521537","html_url":"https://github.com/coq/coq/issues/3460#issuecomment-337521537","issue_url":"https://api.github.com/repos/coq/coq/issues/3460","id":337521537,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMTUzNw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2014-07-26T23:25:18Z","updated_at":"2017-10-18T09:24:14Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\nThis is another manifestation of the fact that in general Ltac arguments are not real closures, capturing their Ltac & constr arguments. This is similar to the various bugs you encounter with tactic-in-term substitutions. It should be definitely fixed, but I do not know how, though.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521539","html_url":"https://github.com/coq/coq/issues/3460#issuecomment-337521539","issue_url":"https://api.github.com/repos/coq/coq/issues/3460","id":337521539,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzUyMTUzOQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2015-12-29T17:46:23Z","updated_at":"2017-10-18T09:24:14Z","author_association":"CONTRIBUTOR","body":"Comment author: @ppedrot\n\n*** Bug [BZ#4464](https://github.com/coq/coq/issues?q=is%3Aissue%20%22Original%20bug%20ID%3A%20BZ%234464%22) has been marked as a duplicate of this bug. ***\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337521539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/411277283","html_url":"https://github.com/coq/coq/issues/3460#issuecomment-411277283","issue_url":"https://api.github.com/repos/coq/coq/issues/3460","id":411277283,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMTI3NzI4Mw==","user":{"login":"pi8027","id":111003,"node_id":"MDQ6VXNlcjExMTAwMw==","avatar_url":"https://avatars.githubusercontent.com/u/111003?v=4","gravatar_id":"","url":"https://api.github.com/users/pi8027","html_url":"https://github.com/pi8027","followers_url":"https://api.github.com/users/pi8027/followers","following_url":"https://api.github.com/users/pi8027/following{/other_user}","gists_url":"https://api.github.com/users/pi8027/gists{/gist_id}","starred_url":"https://api.github.com/users/pi8027/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pi8027/subscriptions","organizations_url":"https://api.github.com/users/pi8027/orgs","repos_url":"https://api.github.com/users/pi8027/repos","events_url":"https://api.github.com/users/pi8027/events{/privacy}","received_events_url":"https://api.github.com/users/pi8027/received_events","type":"User","site_admin":false},"created_at":"2018-08-08T04:01:11Z","updated_at":"2018-08-08T04:01:11Z","author_association":"CONTRIBUTOR","body":"This issue can be used to overwrite variables in Ltac constrs without type checking:\r\n\r\n```\r\nGoal False.\r\nProof.\r\nset (x := True);\r\nlet y := constr: (I : x) in\r\nclear x; set (x := False);\r\nexact y.\r\n(* No more subgoals. *)\r\nFail Qed.\r\n(*\r\nThe command has indeed failed with message:\r\n         In environment\r\n         x := True : Prop\r\n         x0 := False : Prop\r\n         The term \"I\" has type \"True\" while it is expected to have type \"x0\".\r\n*)\r\n```","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/411277283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/411756693","html_url":"https://github.com/coq/coq/issues/3460#issuecomment-411756693","issue_url":"https://api.github.com/repos/coq/coq/issues/3460","id":411756693,"node_id":"MDEyOklzc3VlQ29tbWVudDQxMTc1NjY5Mw==","user":{"login":"herbelin","id":460771,"node_id":"MDQ6VXNlcjQ2MDc3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/460771?v=4","gravatar_id":"","url":"https://api.github.com/users/herbelin","html_url":"https://github.com/herbelin","followers_url":"https://api.github.com/users/herbelin/followers","following_url":"https://api.github.com/users/herbelin/following{/other_user}","gists_url":"https://api.github.com/users/herbelin/gists{/gist_id}","starred_url":"https://api.github.com/users/herbelin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/herbelin/subscriptions","organizations_url":"https://api.github.com/users/herbelin/orgs","repos_url":"https://api.github.com/users/herbelin/repos","events_url":"https://api.github.com/users/herbelin/events{/privacy}","received_events_url":"https://api.github.com/users/herbelin/received_events","type":"User","site_admin":false},"created_at":"2018-08-09T13:27:12Z","updated_at":"2018-08-09T13:27:28Z","author_association":"MEMBER","body":"Note: this is fixed by PR #8014. See also #8011.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/411756693/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/580990708","html_url":"https://github.com/coq/coq/issues/3460#issuecomment-580990708","issue_url":"https://api.github.com/repos/coq/coq/issues/3460","id":580990708,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MDk5MDcwOA==","user":{"login":"andres-erbsen","id":918403,"node_id":"MDQ6VXNlcjkxODQwMw==","avatar_url":"https://avatars.githubusercontent.com/u/918403?v=4","gravatar_id":"","url":"https://api.github.com/users/andres-erbsen","html_url":"https://github.com/andres-erbsen","followers_url":"https://api.github.com/users/andres-erbsen/followers","following_url":"https://api.github.com/users/andres-erbsen/following{/other_user}","gists_url":"https://api.github.com/users/andres-erbsen/gists{/gist_id}","starred_url":"https://api.github.com/users/andres-erbsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andres-erbsen/subscriptions","organizations_url":"https://api.github.com/users/andres-erbsen/orgs","repos_url":"https://api.github.com/users/andres-erbsen/repos","events_url":"https://api.github.com/users/andres-erbsen/events{/privacy}","received_events_url":"https://api.github.com/users/andres-erbsen/received_events","type":"User","site_admin":false},"created_at":"2020-02-01T04:30:27Z","updated_at":"2020-02-01T04:30:27Z","author_association":"CONTRIBUTOR","body":"I am posting a minimal case so I can point others here when they run into this.\r\n\r\n```coq\r\nGoal False -> False.\r\n  intros x.\r\n  let y := constr:(x) in\r\n  exact y.\r\n  Show Proof.\r\nQed. (* ok as expected *)\r\n\r\nGoal False -> False.\r\n  intros x.\r\nFail\r\n  let y := constr:(x) in\r\n  clear x;\r\n  exact y. (* cannot reinterpret \"x\" in the current environment *)\r\nAbort.\r\n\r\nGoal False -> False.\r\n  intros x.\r\n  let y := constr:(x : False) in\r\n  clear x;\r\n  exact y.\r\n  Show Proof. (* (fun _ : False => x : False) *)\r\nFail Qed. (* No such section variable or assumption: x. *)\r\nAbort.\r\n\r\nGoal False -> False /\\ False.\r\n  intros x.\r\n  let y := constr:(conj x x) in\r\n  clear x;\r\n  exact y.\r\n  Show Proof. (* (fun _ : False => conj x x) *)\r\nFail Qed. (* No such section variable or assumption: x *)\r\nAbort.\r\n\r\n(* WORKAROUND (roughly doing #8014): *)\r\nGoal False -> False /\\ False.\r\n  intros x.\r\nFail\r\n  let y := constr:(conj x x) in\r\n  clear x;\r\n  let __ := type of y in (* No such section variable or assumption: x. *)\r\n  idtac.\r\nAbort.\r\n```","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/580990708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/581007338","html_url":"https://github.com/coq/coq/issues/3460#issuecomment-581007338","issue_url":"https://api.github.com/repos/coq/coq/issues/3460","id":581007338,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTAwNzMzOA==","user":{"login":"herbelin","id":460771,"node_id":"MDQ6VXNlcjQ2MDc3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/460771?v=4","gravatar_id":"","url":"https://api.github.com/users/herbelin","html_url":"https://github.com/herbelin","followers_url":"https://api.github.com/users/herbelin/followers","following_url":"https://api.github.com/users/herbelin/following{/other_user}","gists_url":"https://api.github.com/users/herbelin/gists{/gist_id}","starred_url":"https://api.github.com/users/herbelin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/herbelin/subscriptions","organizations_url":"https://api.github.com/users/herbelin/orgs","repos_url":"https://api.github.com/users/herbelin/repos","events_url":"https://api.github.com/users/herbelin/events{/privacy}","received_events_url":"https://api.github.com/users/herbelin/received_events","type":"User","site_admin":false},"created_at":"2020-02-01T08:21:51Z","updated_at":"2020-02-01T08:21:51Z","author_association":"MEMBER","body":"Hi @andres-erbsen, I may try to reschedule #8014, applying @skyskimmer's suggestion there, so that time regression is not so bad. Ping there, if no news within the next weeks.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/581007338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]