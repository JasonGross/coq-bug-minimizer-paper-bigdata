[{"url":"https://api.github.com/repos/coq/coq/issues/comments/1170565434","html_url":"https://github.com/coq/coq/issues/16255#issuecomment-1170565434","issue_url":"https://api.github.com/repos/coq/coq/issues/16255","id":1170565434,"node_id":"IC_kwDOABUDh85FxWk6","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2022-06-29T22:42:29Z","updated_at":"2022-06-29T22:42:29Z","author_association":"MEMBER","body":"Indeed `make install` is not supported anymore, as the message indicates. (And it can't be fixed as we don't manage install at all ourselves now)\r\n\r\nThe recommended sequence for packagers is: `configure && make dunestrap && dune build -p coq-core,coq-stdlib,coq && dune install coq-core coq-stdlib coq $args` where args include destdir and other parameters such as prefix.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/1170565434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/1170574103","html_url":"https://github.com/coq/coq/issues/16255#issuecomment-1170574103","issue_url":"https://api.github.com/repos/coq/coq/issues/16255","id":1170574103,"node_id":"IC_kwDOABUDh85FxYsX","user":{"login":"Alizter","id":8614547,"node_id":"MDQ6VXNlcjg2MTQ1NDc=","avatar_url":"https://avatars.githubusercontent.com/u/8614547?v=4","gravatar_id":"","url":"https://api.github.com/users/Alizter","html_url":"https://github.com/Alizter","followers_url":"https://api.github.com/users/Alizter/followers","following_url":"https://api.github.com/users/Alizter/following{/other_user}","gists_url":"https://api.github.com/users/Alizter/gists{/gist_id}","starred_url":"https://api.github.com/users/Alizter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Alizter/subscriptions","organizations_url":"https://api.github.com/users/Alizter/orgs","repos_url":"https://api.github.com/users/Alizter/repos","events_url":"https://api.github.com/users/Alizter/events{/privacy}","received_events_url":"https://api.github.com/users/Alizter/received_events","type":"User","site_admin":false},"created_at":"2022-06-29T22:58:45Z","updated_at":"2022-06-29T22:58:45Z","author_association":"CONTRIBUTOR","body":"```\r\n./configure # configure script\r\nmake dunestrap # generate coq rules\r\ndune build -p coq-core,coq-stdlib,coq # build coq packages in release mode\r\ndune install coq-core coq-stdlib coq $args # install coq packages\r\n```","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/1170574103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/1171066904","html_url":"https://github.com/coq/coq/issues/16255#issuecomment-1171066904","issue_url":"https://api.github.com/repos/coq/coq/issues/16255","id":1171066904,"node_id":"IC_kwDOABUDh85FzRAY","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2022-06-30T10:49:49Z","updated_at":"2022-06-30T10:49:49Z","author_association":"MEMBER","body":"So indeed, to clarify what is going on, Coq's configure just now sets where `coqc` _does expect_ the stdlib to be present.\r\n\r\nThe build now produces *.install files which can be used by any opam-compatible install tool, dune install is just one of these tools.\r\n\r\n@JasonGross the Coq packages in unstable have been updated to follow this scheme I understand.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/1171066904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/1171343094","html_url":"https://github.com/coq/coq/issues/16255#issuecomment-1171343094","issue_url":"https://api.github.com/repos/coq/coq/issues/16255","id":1171343094,"node_id":"IC_kwDOABUDh85F0Ub2","user":{"login":"Zimmi48","id":1108325,"node_id":"MDQ6VXNlcjExMDgzMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1108325?v=4","gravatar_id":"","url":"https://api.github.com/users/Zimmi48","html_url":"https://github.com/Zimmi48","followers_url":"https://api.github.com/users/Zimmi48/followers","following_url":"https://api.github.com/users/Zimmi48/following{/other_user}","gists_url":"https://api.github.com/users/Zimmi48/gists{/gist_id}","starred_url":"https://api.github.com/users/Zimmi48/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zimmi48/subscriptions","organizations_url":"https://api.github.com/users/Zimmi48/orgs","repos_url":"https://api.github.com/users/Zimmi48/repos","events_url":"https://api.github.com/users/Zimmi48/events{/privacy}","received_events_url":"https://api.github.com/users/Zimmi48/received_events","type":"User","site_admin":false},"created_at":"2022-06-30T15:11:31Z","updated_at":"2022-06-30T15:11:31Z","author_association":"MEMBER","body":"`./configure` should still receive the `-prefix` option, right? (In your command summary, you both seem to suggest it shouldn't.)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/1171343094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/1171348453","html_url":"https://github.com/coq/coq/issues/16255#issuecomment-1171348453","issue_url":"https://api.github.com/repos/coq/coq/issues/16255","id":1171348453,"node_id":"IC_kwDOABUDh85F0Vvl","user":{"login":"ejgallego","id":7192257,"node_id":"MDQ6VXNlcjcxOTIyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7192257?v=4","gravatar_id":"","url":"https://api.github.com/users/ejgallego","html_url":"https://github.com/ejgallego","followers_url":"https://api.github.com/users/ejgallego/followers","following_url":"https://api.github.com/users/ejgallego/following{/other_user}","gists_url":"https://api.github.com/users/ejgallego/gists{/gist_id}","starred_url":"https://api.github.com/users/ejgallego/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ejgallego/subscriptions","organizations_url":"https://api.github.com/users/ejgallego/orgs","repos_url":"https://api.github.com/users/ejgallego/repos","events_url":"https://api.github.com/users/ejgallego/events{/privacy}","received_events_url":"https://api.github.com/users/ejgallego/received_events","type":"User","site_admin":false},"created_at":"2022-06-30T15:16:07Z","updated_at":"2022-06-30T15:16:07Z","author_association":"MEMBER","body":"@Zimmi48 `-prefix` is taken by configure, but only set's the search path for coqlib, it doesn't affect install. So a contract you have is that you gotta pass the same `-prefix` to configure and `dune install`.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/1171348453/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/1176941447","html_url":"https://github.com/coq/coq/issues/16255#issuecomment-1176941447","issue_url":"https://api.github.com/repos/coq/coq/issues/16255","id":1176941447,"node_id":"IC_kwDOABUDh85GJrOH","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2022-07-07T01:29:30Z","updated_at":"2022-07-07T01:29:30Z","author_association":"MEMBER","body":"It seems that coqc is no longer able to find its standard library even when the same prefix is passed to `./configure` and `dune install`, if the root of the install does not exactly match the prefix it was configured with (e.g., downloading an artifact from the CI, configuring to `./debian/tmp/usr/...` and then relocating that to `/usr/...`.  This seems like a regression...","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/1176941447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]