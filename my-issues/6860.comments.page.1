[{"url":"https://api.github.com/repos/coq/coq/issues/comments/369231779","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369231779","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369231779,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTIzMTc3OQ==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T12:59:44Z","updated_at":"2018-02-28T12:59:44Z","author_association":"MEMBER","body":"The lemma only \"rewrites\" if the term on the right of || is convertible to true, hence the tactic has to do the comparison.\r\n\r\nThis bug is bogus.\r\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369231779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369234901","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369234901","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369234901,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTIzNDkwMQ==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:13:05Z","updated_at":"2018-02-28T13:13:05Z","author_association":"MEMBER","body":"I think I was mistaken, according to the doc `constr_eq` does not perform conversion, just syntactic comparison.  I think the question boils down to: @ppedrot any idea why these two lines are so different?\r\n```\r\n  Time do 300 try match goal with |- context [_ || true] => idtac end.\r\n  Time do 300 try match goal with |- context [_ || ?b] => constr_eq b true end.\r\n```\r\ngiven that `?b` is never `true` ?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369234901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369236279","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369236279","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369236279,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTIzNjI3OQ==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:18:25Z","updated_at":"2018-02-28T13:18:25Z","author_association":"MEMBER","body":"@gares Backtrack. The second one keeps failing, while the first one succeeds exactly once, due to associativity of `||`. Not sure what is intended, but I'd recommend using `lazymatch`.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369236279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369238013","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369238013","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369238013,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTIzODAxMw==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:24:59Z","updated_at":"2018-02-28T13:26:42Z","author_association":"MEMBER","body":"no, the first line never succeeds (there is no `|| true` in the goal). You can put `fail` in place of `idtac`.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369238013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369239528","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369239528","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369239528,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTIzOTUyOA==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:31:11Z","updated_at":"2018-02-28T13:31:11Z","author_association":"MEMBER","body":"Oh, you're right, I misread the goal. Then I guess it's probably just Ltac overhead. In one case you never switch to the Ltac interpreter, in the other you call it about 10‚Åµ times, which is a lot.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369239528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369240258","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369240258","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369240258,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MDI1OA==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:34:01Z","updated_at":"2018-02-28T13:34:01Z","author_association":"MEMBER","body":"Hum, I still find it fishy. Rewrite is just a little faster (~3s). Rewrite probably calls unification, instead of eq_constr, and does not go trough the Ltac interpreter.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369240258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369240711","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369240711","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369240711,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MDcxMQ==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:35:46Z","updated_at":"2018-02-28T13:36:40Z","author_association":"MEMBER","body":"Ssr rewrite is a bit slower (it does match the goal twice)...\r\n\r\nTo me the `match` line is too close to the `lazymatch` one to backtrack as I expect","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369240711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369241305","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369241305","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369241305,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MTMwNQ==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:37:59Z","updated_at":"2018-02-28T13:37:59Z","author_association":"MEMBER","body":"```\r\n  Time do 300 try match goal with |- context [_ || true] => idtac end.\r\n  (* Finished transaction in 0.108 secs (0.108u,0.s) (successful) *)\r\n  Time do 300 try lazymatch goal with |- context [_ || true] => idtac end.\r\n  (* Finished transaction in 0.108 secs (0.108u,0.s) (successful) *)\r\n```\r\nIMHO the first line does not try to unify \"_ || true\" with all subterms","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369241305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369241360","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369241360","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369241360,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MTM2MA==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:38:09Z","updated_at":"2018-02-28T13:38:09Z","author_association":"MEMBER","body":"The profiles for `constr_eq` and `rewrite` are completely different, FWIW. The first one looks like it's due to reallocation of the context being build, while the second one is unification being somewhat stupid and checking for absence of evars repeatedly.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369241360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369241990","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369241990","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369241990,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MTk5MA==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:40:24Z","updated_at":"2018-02-28T13:40:24Z","author_association":"MEMBER","body":"ok I see, slow for different reasons. Still the two lines above seem very close but should perform differently, no?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369241990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369242834","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369242834","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369242834,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MjgzNA==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:43:18Z","updated_at":"2018-02-28T13:43:18Z","author_association":"MEMBER","body":"sorry, I'm wrong again. They both traverse the entire goal","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369242834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243094","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369243094","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369243094,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MzA5NA==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:44:11Z","updated_at":"2018-02-28T13:44:11Z","author_association":"MEMBER","body":"(Obvious troll is obvious). That's too tempting not to be said: Even Prolog specialists do not understand backtrack!","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243094/reactions","total_count":2,"+1":1,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243246","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369243246","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369243246,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MzI0Ng==","user":{"login":"maximedenes","id":647105,"node_id":"MDQ6VXNlcjY0NzEwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/647105?v=4","gravatar_id":"","url":"https://api.github.com/users/maximedenes","html_url":"https://github.com/maximedenes","followers_url":"https://api.github.com/users/maximedenes/followers","following_url":"https://api.github.com/users/maximedenes/following{/other_user}","gists_url":"https://api.github.com/users/maximedenes/gists{/gist_id}","starred_url":"https://api.github.com/users/maximedenes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maximedenes/subscriptions","organizations_url":"https://api.github.com/users/maximedenes/orgs","repos_url":"https://api.github.com/users/maximedenes/repos","events_url":"https://api.github.com/users/maximedenes/events{/privacy}","received_events_url":"https://api.github.com/users/maximedenes/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:44:55Z","updated_at":"2018-02-28T13:44:55Z","author_association":"MEMBER","body":"I think you should backtrack on this remark.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243285","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369243285","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369243285,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MzI4NQ==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:45:07Z","updated_at":"2018-02-28T13:45:07Z","author_association":"MEMBER","body":"eh eh, shame on me","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243626","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369243626","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369243626,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0MzYyNg==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:46:22Z","updated_at":"2018-02-28T13:46:22Z","author_association":"MEMBER","body":"Eliminating occur check in unification is not a 5' job... even if it is possible for this rewrite rule.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243859","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369243859","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369243859,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0Mzg1OQ==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:47:09Z","updated_at":"2018-02-28T13:47:09Z","author_association":"MEMBER","body":"I think I can speed up the `match` example though.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243995","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369243995","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369243995,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0Mzk5NQ==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:47:43Z","updated_at":"2018-02-28T13:47:43Z","author_association":"MEMBER","body":"But maybe we should ask @JasonGross to show his real file, this one seems a bit ad hoc.\r\n@ppedrot I think the bug is about rewrite, not match goal ;-)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369243995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369244407","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369244407","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369244407,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0NDQwNw==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T13:49:18Z","updated_at":"2018-02-28T13:49:18Z","author_association":"MEMBER","body":"> @ppedrot I think the bug is about rewrite, not match goal ;-)\r\n\r\nDoesn't mean there is no bug to fix in match goal though!","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369244407/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369248892","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369248892","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369248892,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI0ODg5Mg==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T14:05:16Z","updated_at":"2018-02-28T14:05:16Z","author_association":"MEMBER","body":"> we should ask @JasonGross to show his real file, this one seems a bit ad hoc.\r\n\r\nIn this case, there is no real file; I was answering a StackOverflow question, and the timing profile seemed a bit suspicious ( given that my understanding of `rewrite` is that it would look at all of the occurrences of `orb _ _` (up to beta), and then try to unify the second argument with `true`, and this unification should be instantaneous to fail because the term should always be ` false`, and thus it seems like it should be the same performance as ` match` with `constr_eq`... but my guess for the bottleneck in the ` match` with `constr_eq` was the overhead of binding Ltac contexts, which shouldn't show up in `rewrite`, and so this had me confused about the slowness of `rewrite`).\r\n\r\nSo this isn't an example of \"this thing is painful for me, please fix\", but instead \"this seems like it might reveal the root cause of a bit of unnecessary slowness in Coq, so hopefully fixing whatever shows up in this can help make Coq incrementally faster.\"","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369248892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369251263","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369251263","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369251263,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI1MTI2Mw==","user":{"login":"gares","id":1013846,"node_id":"MDQ6VXNlcjEwMTM4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1013846?v=4","gravatar_id":"","url":"https://api.github.com/users/gares","html_url":"https://github.com/gares","followers_url":"https://api.github.com/users/gares/followers","following_url":"https://api.github.com/users/gares/following{/other_user}","gists_url":"https://api.github.com/users/gares/gists{/gist_id}","starred_url":"https://api.github.com/users/gares/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gares/subscriptions","organizations_url":"https://api.github.com/users/gares/orgs","repos_url":"https://api.github.com/users/gares/repos","events_url":"https://api.github.com/users/gares/events{/privacy}","received_events_url":"https://api.github.com/users/gares/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T14:12:54Z","updated_at":"2018-02-28T14:12:54Z","author_association":"MEMBER","body":"OK, I've renaming the issue to reflect the optimization @ppedrot is probably already doing ;-)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369251263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369261577","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369261577","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369261577,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI2MTU3Nw==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T14:46:31Z","updated_at":"2018-02-28T14:46:59Z","author_association":"MEMBER","body":"I wrote a stupid patch at ppedrot/coq@5c0b379fdbf4dc9a86abde815d0bbdac4a061654, that delays the construction of the matched context until it is actually used. It seems to cut in half the time required by the `constr_eq` code.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369261577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369261957","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369261957","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369261957,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI2MTk1Nw==","user":{"login":"maximedenes","id":647105,"node_id":"MDQ6VXNlcjY0NzEwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/647105?v=4","gravatar_id":"","url":"https://api.github.com/users/maximedenes","html_url":"https://github.com/maximedenes","followers_url":"https://api.github.com/users/maximedenes/followers","following_url":"https://api.github.com/users/maximedenes/following{/other_user}","gists_url":"https://api.github.com/users/maximedenes/gists{/gist_id}","starred_url":"https://api.github.com/users/maximedenes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maximedenes/subscriptions","organizations_url":"https://api.github.com/users/maximedenes/orgs","repos_url":"https://api.github.com/users/maximedenes/repos","events_url":"https://api.github.com/users/maximedenes/events{/privacy}","received_events_url":"https://api.github.com/users/maximedenes/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T14:47:39Z","updated_at":"2018-02-28T14:47:39Z","author_association":"MEMBER","body":"Are you sure you are pointing to the right commit?","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369261957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/369262013","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-369262013","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":369262013,"node_id":"MDEyOklzc3VlQ29tbWVudDM2OTI2MjAxMw==","user":{"login":"maximedenes","id":647105,"node_id":"MDQ6VXNlcjY0NzEwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/647105?v=4","gravatar_id":"","url":"https://api.github.com/users/maximedenes","html_url":"https://github.com/maximedenes","followers_url":"https://api.github.com/users/maximedenes/followers","following_url":"https://api.github.com/users/maximedenes/following{/other_user}","gists_url":"https://api.github.com/users/maximedenes/gists{/gist_id}","starred_url":"https://api.github.com/users/maximedenes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maximedenes/subscriptions","organizations_url":"https://api.github.com/users/maximedenes/orgs","repos_url":"https://api.github.com/users/maximedenes/repos","events_url":"https://api.github.com/users/maximedenes/events{/privacy}","received_events_url":"https://api.github.com/users/maximedenes/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T14:47:51Z","updated_at":"2018-02-28T14:47:51Z","author_association":"MEMBER","body":"Ah you fixed it :)","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/369262013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/415507226","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-415507226","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":415507226,"node_id":"MDEyOklzc3VlQ29tbWVudDQxNTUwNzIyNg==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-08-23T17:43:26Z","updated_at":"2018-08-23T17:43:26Z","author_association":"MEMBER","body":"If this bug was about the `match goal` construct, I think it has been fixed. Now `match goal with [ |- context [_ || ?b] ] => fail end` is only twice as slow as `match goal with [ |- context [_ || true] ] => idtac end`, which is OK. The example with `constr_eq` is still about twelve times slower, but this is due to `constr_eq` and one should compare things that are comparable.\r\n\r\nI'd propose to close this bug if so.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/415507226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/435919522","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-435919522","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":435919522,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTkxOTUyMg==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-11-05T15:36:44Z","updated_at":"2018-11-05T15:36:44Z","author_association":"MEMBER","body":"No reaction, let's close.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/435919522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/435938645","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-435938645","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":435938645,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTkzODY0NQ==","user":{"login":"JasonGross","id":396076,"node_id":"MDQ6VXNlcjM5NjA3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/396076?v=4","gravatar_id":"","url":"https://api.github.com/users/JasonGross","html_url":"https://github.com/JasonGross","followers_url":"https://api.github.com/users/JasonGross/followers","following_url":"https://api.github.com/users/JasonGross/following{/other_user}","gists_url":"https://api.github.com/users/JasonGross/gists{/gist_id}","starred_url":"https://api.github.com/users/JasonGross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JasonGross/subscriptions","organizations_url":"https://api.github.com/users/JasonGross/orgs","repos_url":"https://api.github.com/users/JasonGross/repos","events_url":"https://api.github.com/users/JasonGross/events{/privacy}","received_events_url":"https://api.github.com/users/JasonGross/received_events","type":"User","site_admin":false},"created_at":"2018-11-05T16:26:40Z","updated_at":"2018-11-05T16:26:40Z","author_association":"MEMBER","body":"I am still curious what is going on with `constr_eq`.  What makes it 12x slower?\r\n(I have no strong objection to closing this bug, but I might decide to open another one about `constr_eq`.  I guess I should also test `constr_eq a b` against `match a with b`...) ","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/435938645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/435939855","html_url":"https://github.com/coq/coq/issues/6860#issuecomment-435939855","issue_url":"https://api.github.com/repos/coq/coq/issues/6860","id":435939855,"node_id":"MDEyOklzc3VlQ29tbWVudDQzNTkzOTg1NQ==","user":{"login":"ppedrot","id":1202327,"node_id":"MDQ6VXNlcjEyMDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/1202327?v=4","gravatar_id":"","url":"https://api.github.com/users/ppedrot","html_url":"https://github.com/ppedrot","followers_url":"https://api.github.com/users/ppedrot/followers","following_url":"https://api.github.com/users/ppedrot/following{/other_user}","gists_url":"https://api.github.com/users/ppedrot/gists{/gist_id}","starred_url":"https://api.github.com/users/ppedrot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppedrot/subscriptions","organizations_url":"https://api.github.com/users/ppedrot/orgs","repos_url":"https://api.github.com/users/ppedrot/repos","events_url":"https://api.github.com/users/ppedrot/events{/privacy}","received_events_url":"https://api.github.com/users/ppedrot/received_events","type":"User","site_admin":false},"created_at":"2018-11-05T16:29:42Z","updated_at":"2018-11-05T16:29:42Z","author_association":"MEMBER","body":"This is unrelated to constr_eq per se. It's rather that you're paying the cost of calling primitive tactics.","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/435939855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]