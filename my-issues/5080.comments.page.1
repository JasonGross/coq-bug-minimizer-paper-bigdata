[{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547176","html_url":"https://github.com/coq/coq/issues/5080#issuecomment-337547176","issue_url":"https://api.github.com/repos/coq/coq/issues/5080","id":337547176,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzE3Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-12T18:32:40Z","updated_at":"2017-10-18T10:41:11Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nI propose that we have\n  Set Ltac Profile Cutoff 2%. (* default value, as in 8.4 *)\nand, to get printing of all calls, including those that show up as negative or \ninf or over 100,\n  Unset Ltac Profile Cutoff.\n(or maybe [Set Ltac Profile Cutoff None.])\n\nHere's a contrived example where I would want [myidtac] to not show up:\n\nRequire Coq.ZArith.BinInt.\nLtac myidtac := idtac; idtac.\nLtac sleep := myidtac; let sleep := (eval vm_compute in \nCoq.ZArith.BinInt.Z.div_eucl) in idtac.\n   \nSet Ltac Profiling.\nGoal True.\n  do 10 sleep.\n  Show Ltac Profile.\n(* total time:      0.356s                                                      \n                                                                                \n                                                  \n                                                                                \n                                                                                \n                                                  \n tactic                                   local  total   calls       max        \n                                                                                \n                                                  \n────────────────────────────────────────┴──────┴──────┴───────┴─────────┘       \n                                                                                \n                                                  \n─sleep --------------------------------- 100.0% 100.0%      10    0.060s        \n                                                                                \n                                                  \n─myidtac -------------------------------   0.0%   0.0%      10    0.000s        \n                                                                                \n                                                  \n                                                                                \n                                                                                \n                                                  \n tactic                                   local  total   calls       max        \n                                                                                \n                                                  \n────────────────────────────────────────┴──────┴──────┴───────┴─────────┘       \n                                                                                \n                                                  \n─sleep --------------------------------- 100.0% 100.0%      10    0.060s        \n                                                                                \n                                                  \n└myidtac -------------------------------   0.0%   0.0%      10    0.000s        \n                                                                                \n                                                  \n                                                                                \n                                                                                \n                                                  \n *)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547177","html_url":"https://github.com/coq/coq/issues/5080#issuecomment-337547177","issue_url":"https://api.github.com/repos/coq/coq/issues/5080","id":337547177,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzE3Nw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-13T12:50:13Z","updated_at":"2017-10-18T10:41:11Z","author_association":"CONTRIBUTOR","body":"Comment author: @ejgallego\n\nI am not sure I fully understand the details here, but shouldn't that functionality live in the IDE/Client?\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547179","html_url":"https://github.com/coq/coq/issues/5080#issuecomment-337547179","issue_url":"https://api.github.com/repos/coq/coq/issues/5080","id":337547179,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzE3OQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-13T15:11:52Z","updated_at":"2017-10-18T10:41:11Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nSure, in the same way that syntax highlighting should live in the IDE/client.  When you [Print] something, coqc will do syntax highlighting.  When you run coqc with -profile-ltac, you should not see a table with every single low-level tactic run in the file, you should only see the biggest offenders (at least, you should have that option).  (Also, coqtop / coqtop -emacs is a client, no?)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547181","html_url":"https://github.com/coq/coq/issues/5080#issuecomment-337547181","issue_url":"https://api.github.com/repos/coq/coq/issues/5080","id":337547181,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzE4MQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-14T13:30:15Z","updated_at":"2017-10-18T10:41:11Z","author_association":"CONTRIBUTOR","body":"Comment author: @ejgallego\n\nHi Jason, \n\nindeed good point! coqtop is not yet a client, IMHO it would be great if that could happen for 8.7.\n\nAnd that is the crux of the matter, Set Ltac Profile ... doesn't live at the coqtop level but in a more global level, similar to Vernac. My worry is that such coqtop specific options affect other backends due to the printing code querying the option...\n\nFor instance, I have been working on a new batch compiler (sercomp) which works truly as a client of the API and it would be great if it didn't have to care about such options (or at least would be local/contained on the API, that is to say, printing a profile could be `pr_prof_data : pr_prof_data_opts -> prof_data -> pp_doc`\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547184","html_url":"https://github.com/coq/coq/issues/5080#issuecomment-337547184","issue_url":"https://api.github.com/repos/coq/coq/issues/5080","id":337547184,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzE4NA==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-15T11:14:13Z","updated_at":"2017-10-18T10:41:11Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nEmilio I fully agree with you, but Coq /today/ is far from that, so many things end up in the document.  So one more does not really change the game.\n\nRelated to that, if you take v8.6, now master stores in Profile_ltac.data (not exported) a map state_id -> profiling_info_for_that_tactic_call.  When one prints, coq filters this data keeping only relevant entries and sums them up.  \n\nI think it is a nice test case for serapi/UI.  You need to export a bit more functions,  but then you can probably provide, in the UI, a better presentation of the data (per line, per proof, ...).  See for example the \"flame graph\" we\nhave in ssr: http://ssr.msr-inria.inria.fr/~jenkins/annotated-old/theories/PFsection14.time.html\nOne could now subdivide the flame into the contribution of each tactic (not very useful for mathcomp, but still...)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547185","html_url":"https://github.com/coq/coq/issues/5080#issuecomment-337547185","issue_url":"https://api.github.com/repos/coq/coq/issues/5080","id":337547185,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzE4NQ==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-15T11:20:01Z","updated_at":"2017-10-18T10:41:11Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nI think I should better explain:\n- the profiling data is sent as feedback\n- the profiling data is stored in master (observes and stores)\n- the profiling data reaches the UI\n\nSo you have freedom:\n- process the feedback in the UI and display it immediately\n- accumulate the feedback in the UI, and display it only on demand\n- ignore it, and rather query when you like master (you need to export some API)\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547186","html_url":"https://github.com/coq/coq/issues/5080#issuecomment-337547186","issue_url":"https://api.github.com/repos/coq/coq/issues/5080","id":337547186,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzE4Ng==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-19T19:57:46Z","updated_at":"2017-10-18T10:41:12Z","author_association":"CONTRIBUTOR","body":"Comment author: @JasonGross\n\nThis is currently blocking me from using -profile-ltac as part of my standard \nbuild process, since the amount of output that it gives me is so much as to \nmake it useless.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547187","html_url":"https://github.com/coq/coq/issues/5080#issuecomment-337547187","issue_url":"https://api.github.com/repos/coq/coq/issues/5080","id":337547187,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNzU0NzE4Nw==","user":{"login":"coqbot","id":13040781,"node_id":"MDQ6VXNlcjEzMDQwNzgx","avatar_url":"https://avatars.githubusercontent.com/u/13040781?v=4","gravatar_id":"","url":"https://api.github.com/users/coqbot","html_url":"https://github.com/coqbot","followers_url":"https://api.github.com/users/coqbot/followers","following_url":"https://api.github.com/users/coqbot/following{/other_user}","gists_url":"https://api.github.com/users/coqbot/gists{/gist_id}","starred_url":"https://api.github.com/users/coqbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coqbot/subscriptions","organizations_url":"https://api.github.com/users/coqbot/orgs","repos_url":"https://api.github.com/users/coqbot/repos","events_url":"https://api.github.com/users/coqbot/events{/privacy}","received_events_url":"https://api.github.com/users/coqbot/received_events","type":"User","site_admin":false},"created_at":"2016-09-21T06:46:58Z","updated_at":"2017-10-18T10:41:12Z","author_association":"CONTRIBUTOR","body":"Comment author: @gares\n\nI'll try to code it next week, this one I'm busy.\n\n","reactions":{"url":"https://api.github.com/repos/coq/coq/issues/comments/337547187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]